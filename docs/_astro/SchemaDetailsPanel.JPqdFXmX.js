import{j as i}from"./jsx-runtime.DCqPeNwG.js";import{r as W}from"./index.66AI1_x2.js";/* empty css                       */import{b as ne}from"./url-builder.Dzt11NIp.js";import{g as Ot}from"./utils.3o3n54R3.js";import{a as kt,b as Mt,c as be,d as $t,F as Pe}from"./XMarkIcon.Dg371sj5.js";import{b as He,a as Re,F as ue}from"./ChevronUpIcon.BKjCCL5T.js";import{F as Ye}from"./UserIcon.hQiBrlw_.js";import{F as Qe}from"./ServerIcon.CZuN-42e.js";import{h as xt,p as vt}from"./index.DXj_uSRK.js";import yt from"./JSONSchemaViewer.DB8igcoM.js";import wt from"./AvroSchemaViewer.CV_-5E2k.js";import{R as Be,P as ze,O as Ve,C as We,T as Ue,D as Ge,a as ie}from"./index.DvWqczMf.js";function It({title:r,titleId:t,...n},e){return W.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:e,"aria-labelledby":t},n),r?W.createElement("title",{id:t},r):null,W.createElement("path",{d:"M10 9a3 3 0 1 0 0-6 3 3 0 0 0 0 6ZM6 8a2 2 0 1 1-4 0 2 2 0 0 1 4 0ZM1.49 15.326a.78.78 0 0 1-.358-.442 3 3 0 0 1 4.308-3.516 6.484 6.484 0 0 0-1.905 3.959c-.023.222-.014.442.025.654a4.97 4.97 0 0 1-2.07-.655ZM16.44 15.98a4.97 4.97 0 0 0 2.07-.654.78.78 0 0 0 .357-.442 3 3 0 0 0-4.308-3.517 6.484 6.484 0 0 1 1.907 3.96 2.32 2.32 0 0 1-.026.654ZM18 8a2 2 0 1 1-4 0 2 2 0 0 1 4 0ZM5.304 16.19a.844.844 0 0 1-.277-.71 5 5 0 0 1 9.947 0 .843.843 0 0 1-.277.71A6.975 6.975 0 0 1 10 18a6.974 6.974 0 0 1-4.696-1.81Z"}))}const Dt=W.forwardRef(It),Oe=r=>{if(!r)return"json";switch(r.toLowerCase()){case"avro":case"avsc":case"json":return"json";case"proto":return"protobuf";case"xsd":case"xml":return"xml";case"graphql":case"gql":return"graphql";case"yaml":case"yml":case"openapi":case"asyncapi":return"yaml";case"ts":case"typescript":return"typescript";case"js":case"javascript":return"javascript";default:return"json"}},Ke=r=>{if(!r)return"JSON";const t=r.toLowerCase();switch(t){case"avro":case"avsc":return"Avro";case"proto":return"Protobuf";case"xsd":return"XML Schema";case"graphql":case"gql":return"GraphQL";case"yaml":case"yml":return"YAML";case"json":return"JSON Schema";case"openapi":return"OpenAPI";case"asyncapi":return"AsyncAPI";default:return t.toUpperCase()}},et=async r=>{try{return await navigator.clipboard.writeText(r),!0}catch(t){return console.error("Failed to copy:",t),!1}},Ft=(r,t,n)=>{const e=new Blob([r],{type:"text/plain"}),s=URL.createObjectURL(e),l=document.createElement("a");l.href=s,l.download=`${t}.${n}`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(s)};function _(){}_.prototype={diff:function(t,n){var e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=s.callback;typeof s=="function"&&(l=s,s={});var a=this;function d(L){return L=a.postProcess(L,s),l?(setTimeout(function(){l(L)},0),!0):L}t=this.castInput(t,s),n=this.castInput(n,s),t=this.removeEmpty(this.tokenize(t,s)),n=this.removeEmpty(this.tokenize(n,s));var f=n.length,m=t.length,g=1,v=f+m;s.maxEditLength!=null&&(v=Math.min(v,s.maxEditLength));var C=(e=s.timeout)!==null&&e!==void 0?e:1/0,c=Date.now()+C,u=[{oldPos:-1,lastComponent:void 0}],p=this.extractCommon(u[0],n,t,0,s);if(u[0].oldPos+1>=m&&p+1>=f)return d(tt(a,u[0].lastComponent,n,t,a.useLongestToken));var x=-1/0,N=1/0;function k(){for(var L=Math.max(x,-g);L<=Math.min(N,g);L+=2){var S=void 0,O=u[L-1],D=u[L+1];O&&(u[L-1]=void 0);var o=!1;if(D){var h=D.oldPos-L;o=D&&0<=h&&h<f}var b=O&&O.oldPos+1<m;if(!o&&!b){u[L]=void 0;continue}if(!b||o&&O.oldPos<D.oldPos?S=a.addToPath(D,!0,!1,0,s):S=a.addToPath(O,!1,!0,1,s),p=a.extractCommon(S,n,t,L,s),S.oldPos+1>=m&&p+1>=f)return d(tt(a,S.lastComponent,n,t,a.useLongestToken));u[L]=S,S.oldPos+1>=m&&(N=Math.min(N,L-1)),p+1>=f&&(x=Math.max(x,L+1))}g++}if(l)(function L(){setTimeout(function(){if(g>v||Date.now()>c)return l();k()||L()},0)})();else for(;g<=v&&Date.now()<=c;){var j=k();if(j)return j}},addToPath:function(t,n,e,s,l){var a=t.lastComponent;return a&&!l.oneChangePerToken&&a.added===n&&a.removed===e?{oldPos:t.oldPos+s,lastComponent:{count:a.count+1,added:n,removed:e,previousComponent:a.previousComponent}}:{oldPos:t.oldPos+s,lastComponent:{count:1,added:n,removed:e,previousComponent:a}}},extractCommon:function(t,n,e,s,l){for(var a=n.length,d=e.length,f=t.oldPos,m=f-s,g=0;m+1<a&&f+1<d&&this.equals(e[f+1],n[m+1],l);)m++,f++,g++,l.oneChangePerToken&&(t.lastComponent={count:1,previousComponent:t.lastComponent,added:!1,removed:!1});return g&&!l.oneChangePerToken&&(t.lastComponent={count:g,previousComponent:t.lastComponent,added:!1,removed:!1}),t.oldPos=f,m},equals:function(t,n,e){return e.comparator?e.comparator(t,n):t===n||e.ignoreCase&&t.toLowerCase()===n.toLowerCase()},removeEmpty:function(t){for(var n=[],e=0;e<t.length;e++)t[e]&&n.push(t[e]);return n},castInput:function(t){return t},tokenize:function(t){return Array.from(t)},join:function(t){return t.join("")},postProcess:function(t){return t}};function tt(r,t,n,e,s){for(var l=[],a;t;)l.push(t),a=t.previousComponent,delete t.previousComponent,t=a;l.reverse();for(var d=0,f=l.length,m=0,g=0;d<f;d++){var v=l[d];if(v.removed)v.value=r.join(e.slice(g,g+v.count)),g+=v.count;else{if(!v.added&&s){var C=n.slice(m,m+v.count);C=C.map(function(c,u){var p=e[g+u];return p.length>c.length?p:c}),v.value=r.join(C)}else v.value=r.join(n.slice(m,m+v.count));m+=v.count,v.added||(g+=v.count)}}return l}var At=new _;function Pt(r,t,n){return At.diff(r,t,n)}function nt(r,t){var n;for(n=0;n<r.length&&n<t.length;n++)if(r[n]!=t[n])return r.slice(0,n);return r.slice(0,n)}function rt(r,t){var n;if(!r||!t||r[r.length-1]!=t[t.length-1])return"";for(n=0;n<r.length&&n<t.length;n++)if(r[r.length-(n+1)]!=t[t.length-(n+1)])return r.slice(-n);return r.slice(-n)}function ke(r,t,n){if(r.slice(0,t.length)!=t)throw Error("string ".concat(JSON.stringify(r)," doesn't start with prefix ").concat(JSON.stringify(t),"; this is a bug"));return n+r.slice(t.length)}function Me(r,t,n){if(!t)return r+n;if(r.slice(-t.length)!=t)throw Error("string ".concat(JSON.stringify(r)," doesn't end with suffix ").concat(JSON.stringify(t),"; this is a bug"));return r.slice(0,-t.length)+n}function oe(r,t){return ke(r,t,"")}function he(r,t){return Me(r,t,"")}function st(r,t){return t.slice(0,Ht(r,t))}function Ht(r,t){var n=0;r.length>t.length&&(n=r.length-t.length);var e=t.length;r.length<t.length&&(e=r.length);var s=Array(e),l=0;s[0]=0;for(var a=1;a<e;a++){for(t[a]==t[l]?s[a]=s[l]:s[a]=l;l>0&&t[a]!=t[l];)l=s[l];t[a]==t[l]&&l++}l=0;for(var d=n;d<r.length;d++){for(;l>0&&r[d]!=t[l];)l=s[l];r[d]==t[l]&&l++}return l}var me="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",Rt=new RegExp("[".concat(me,"]+|\\s+|[^").concat(me,"]"),"ug"),xe=new _;xe.equals=function(r,t,n){return n.ignoreCase&&(r=r.toLowerCase(),t=t.toLowerCase()),r.trim()===t.trim()};xe.tokenize=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n;if(t.intlSegmenter){if(t.intlSegmenter.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');n=Array.from(t.intlSegmenter.segment(r),function(l){return l.segment})}else n=r.match(Rt)||[];var e=[],s=null;return n.forEach(function(l){/\s/.test(l)?s==null?e.push(l):e.push(e.pop()+l):/\s/.test(s)?e[e.length-1]==s?e.push(e.pop()+l):e.push(s+l):e.push(l),s=l}),e};xe.join=function(r){return r.map(function(t,n){return n==0?t:t.replace(/^\s+/,"")}).join("")};xe.postProcess=function(r,t){if(!r||t.oneChangePerToken)return r;var n=null,e=null,s=null;return r.forEach(function(l){l.added?e=l:l.removed?s=l:((e||s)&&it(n,s,e,l),n=l,e=null,s=null)}),(e||s)&&it(n,s,e,null),r};function it(r,t,n,e){if(t&&n){var s=t.value.match(/^\s*/)[0],l=t.value.match(/\s*$/)[0],a=n.value.match(/^\s*/)[0],d=n.value.match(/\s*$/)[0];if(r){var f=nt(s,a);r.value=Me(r.value,a,f),t.value=oe(t.value,f),n.value=oe(n.value,f)}if(e){var m=rt(l,d);e.value=ke(e.value,d,m),t.value=he(t.value,m),n.value=he(n.value,m)}}else if(n)r&&(n.value=n.value.replace(/^\s*/,"")),e&&(e.value=e.value.replace(/^\s*/,""));else if(r&&e){var g=e.value.match(/^\s*/)[0],v=t.value.match(/^\s*/)[0],C=t.value.match(/\s*$/)[0],c=nt(g,v);t.value=oe(t.value,c);var u=rt(oe(g,c),C);t.value=he(t.value,u),e.value=ke(e.value,g,u),r.value=Me(r.value,g,g.slice(0,g.length-u.length))}else if(e){var p=e.value.match(/^\s*/)[0],x=t.value.match(/\s*$/)[0],N=st(x,p);t.value=he(t.value,N)}else if(r){var k=r.value.match(/\s*$/)[0],j=t.value.match(/^\s*/)[0],L=st(k,j);t.value=oe(t.value,L)}}var Nt=new _;Nt.tokenize=function(r){var t=new RegExp("(\\r?\\n)|[".concat(me,"]+|[^\\S\\n\\r]+|[^").concat(me,"]"),"ug");return r.match(t)||[]};function Bt(r,t,n){return Nt.diff(r,t,n)}var ve=new _;ve.tokenize=function(r,t){t.stripTrailingCr&&(r=r.replace(/\r\n/g,`
`));var n=[],e=r.split(/(\n|\r\n)/);e[e.length-1]||e.pop();for(var s=0;s<e.length;s++){var l=e[s];s%2&&!t.newlineIsToken?n[n.length-1]+=l:n.push(l)}return n};ve.equals=function(r,t,n){return n.ignoreWhitespace?((!n.newlineIsToken||!r.includes(`
`))&&(r=r.trim()),(!n.newlineIsToken||!t.includes(`
`))&&(t=t.trim())):n.ignoreNewlineAtEof&&!n.newlineIsToken&&(r.endsWith(`
`)&&(r=r.slice(0,-1)),t.endsWith(`
`)&&(t=t.slice(0,-1))),_.prototype.equals.call(this,r,t,n)};function at(r,t,n){return ve.diff(r,t,n)}var zt=new _;zt.tokenize=function(r){return r.split(/(\S.+?[.!?])(?=\s+|$)/)};var Vt=new _;Vt.tokenize=function(r){return r.split(/([{}:;,]|\s+)/)};function lt(r,t){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(r);t&&(e=e.filter(function(s){return Object.getOwnPropertyDescriptor(r,s).enumerable})),n.push.apply(n,e)}return n}function pe(r){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lt(Object(n),!0).forEach(function(e){Gt(r,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):lt(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))})}return r}function Wt(r,t){if(typeof r!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var e=n.call(r,t);if(typeof e!="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(r)}function Ut(r){var t=Wt(r,"string");return typeof t=="symbol"?t:t+""}function $e(r){"@babel/helpers - typeof";return $e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$e(r)}function Gt(r,t,n){return t=Ut(t),t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}function Ce(r){return _t(r)||qt(r)||Jt(r)||Xt()}function _t(r){if(Array.isArray(r))return Ie(r)}function qt(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function Jt(r,t){if(r){if(typeof r=="string")return Ie(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ie(r,t)}}function Ie(r,t){(t==null||t>r.length)&&(t=r.length);for(var n=0,e=new Array(t);n<t;n++)e[n]=r[n];return e}function Xt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var fe=new _;fe.useLongestToken=!0;fe.tokenize=ve.tokenize;fe.castInput=function(r,t){var n=t.undefinedReplacement,e=t.stringifyReplacer,s=e===void 0?function(l,a){return typeof a>"u"?n:a}:e;return typeof r=="string"?r:JSON.stringify(De(r,null,null,s),s,"  ")};fe.equals=function(r,t,n){return _.prototype.equals.call(fe,r.replace(/,([\r\n])/g,"$1"),t.replace(/,([\r\n])/g,"$1"),n)};function De(r,t,n,e,s){t=t||[],n=n||[],e&&(r=e(s,r));var l;for(l=0;l<t.length;l+=1)if(t[l]===r)return n[l];var a;if(Object.prototype.toString.call(r)==="[object Array]"){for(t.push(r),a=new Array(r.length),n.push(a),l=0;l<r.length;l+=1)a[l]=De(r[l],t,n,e,s);return t.pop(),n.pop(),a}if(r&&r.toJSON&&(r=r.toJSON()),$e(r)==="object"&&r!==null){t.push(r),a={},n.push(a);var d=[],f;for(f in r)Object.prototype.hasOwnProperty.call(r,f)&&d.push(f);for(d.sort(),l=0;l<d.length;l+=1)f=d[l],a[f]=De(r[f],t,n,e,f);t.pop(),n.pop()}else a=r;return a}var Fe=new _;Fe.tokenize=function(r){return r.slice()};Fe.join=Fe.removeEmpty=function(r){return r};function ot(r,t,n,e,s,l,a){if(a||(a={}),typeof a=="function"&&(a={callback:a}),typeof a.context>"u"&&(a.context=4),a.newlineIsToken)throw new Error("newlineIsToken may not be used with patch-generation functions, only with diffing functions");if(a.callback){var d=a,f=d.callback;at(n,e,pe(pe({},a),{},{callback:function(v){var C=m(v);f(C)}}))}else return m(at(n,e,a));function m(g){if(!g)return;g.push({value:"",lines:[]});function v(o){return o.map(function(h){return" "+h})}for(var C=[],c=0,u=0,p=[],x=1,N=1,k=function(){var h=g[j],b=h.lines||Yt(h.value);if(h.lines=b,h.added||h.removed){var T;if(!c){var $=g[j-1];c=x,u=N,$&&(p=a.context>0?v($.lines.slice(-a.context)):[],c-=p.length,u-=p.length)}(T=p).push.apply(T,Ce(b.map(function(B){return(h.added?"+":"-")+B}))),h.added?N+=b.length:x+=b.length}else{if(c)if(b.length<=a.context*2&&j<g.length-2){var V;(V=p).push.apply(V,Ce(v(b)))}else{var F,E=Math.min(b.length,a.context);(F=p).push.apply(F,Ce(v(b.slice(0,E))));var I={oldStart:c,oldLines:x-c+E,newStart:u,newLines:N-u+E,lines:p};C.push(I),c=0,u=0,p=[]}x+=b.length,N+=b.length}},j=0;j<g.length;j++)k();for(var L=0,S=C;L<S.length;L++)for(var O=S[L],D=0;D<O.lines.length;D++)O.lines[D].endsWith(`
`)?O.lines[D]=O.lines[D].slice(0,-1):(O.lines.splice(D+1,0,"\\ No newline at end of file"),D++);return{oldFileName:r,newFileName:t,oldHeader:s,newHeader:l,hunks:C}}}function Ae(r){if(Array.isArray(r))return r.map(Ae).join(`
`);var t=[];r.oldFileName==r.newFileName&&t.push("Index: "+r.oldFileName),t.push("==================================================================="),t.push("--- "+r.oldFileName+(typeof r.oldHeader>"u"?"":"	"+r.oldHeader)),t.push("+++ "+r.newFileName+(typeof r.newHeader>"u"?"":"	"+r.newHeader));for(var n=0;n<r.hunks.length;n++){var e=r.hunks[n];e.oldLines===0&&(e.oldStart-=1),e.newLines===0&&(e.newStart-=1),t.push("@@ -"+e.oldStart+","+e.oldLines+" +"+e.newStart+","+e.newLines+" @@"),t.push.apply(t,e.lines)}return t.join(`
`)+`
`}function Zt(r,t,n,e,s,l,a){var d;if(typeof a=="function"&&(a={callback:a}),(d=a)!==null&&d!==void 0&&d.callback){var m=a,g=m.callback;ot(r,t,n,e,s,l,pe(pe({},a),{},{callback:function(C){C?g(Ae(C)):g()}}))}else{var f=ot(r,t,n,e,s,l,a);return f?Ae(f):void 0}}function Yt(r){var t=r.endsWith(`
`),n=r.split(`
`).map(function(e){return e+`
`});return t?n.pop():n.push(n.pop().slice(0,-1)),n}var H;(function(r){r.INSERT="insert",r.DELETE="delete",r.CONTEXT="context"})(H||(H={}));const Qt={LINE_BY_LINE:"line-by-line"},Kt={NONE:"none"},en={WORD:"word"};var re;(function(r){r.AUTO="auto",r.DARK="dark",r.LIGHT="light"})(re||(re={}));const tn=["-","[","]","/","{","}","(",")","*","+","?",".","\\","^","$","|"],nn=RegExp("["+tn.join("\\")+"]","g");function rn(r){return r.replace(nn,"\\$&")}function ct(r){return r&&r.replace(/\\/g,"/")}function sn(r){let t,n,e,s=0;for(t=0,e=r.length;t<e;t++)n=r.charCodeAt(t),s=(s<<5)-s+n,s|=0;return s}function jt(r){const t=r.length;let n=-1/0;for(let e=0;e<t;e++)n=Math.max(n,r[e]);return n}function dt(r,t){const n=r.split(".");return n.length>1?n[n.length-1]:t}function ft(r,t){return t.reduce((n,e)=>n||r.startsWith(e),!1)}const ut=["a/","b/","i/","w/","c/","o/"];function K(r,t,n){const e=n!==void 0?[...ut,n]:ut,s=t?new RegExp(`^${rn(t)} "?(.+?)"?$`):new RegExp('^"?(.+?)"?$'),[,l=""]=s.exec(r)||[],a=e.find(f=>l.indexOf(f)===0);return(a?l.slice(a.length):l).replace(/\s+\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}(?:\.\d+)? [+-]\d{4}.*$/,"")}function an(r,t){return K(r,"---",t)}function ln(r,t){return K(r,"+++",t)}function on(r,t={}){const n=[];let e=null,s=null,l=null,a=null,d=null,f=null,m=null;const g="--- ",v="+++ ",C="@@",c=/^old mode (\d{6})/,u=/^new mode (\d{6})/,p=/^deleted file mode (\d{6})/,x=/^new file mode (\d{6})/,N=/^copy from "?(.+)"?/,k=/^copy to "?(.+)"?/,j=/^rename from "?(.+)"?/,L=/^rename to "?(.+)"?/,S=/^similarity index (\d+)%/,O=/^dissimilarity index (\d+)%/,D=/^index ([\da-z]+)\.\.([\da-z]+)\s*(\d{6})?/,o=/^Binary files (.*) and (.*) differ/,h=/^GIT binary patch/,b=/^index ([\da-z]+),([\da-z]+)\.\.([\da-z]+)/,T=/^mode (\d{6}),(\d{6})\.\.(\d{6})/,$=/^new file mode (\d{6})/,V=/^deleted file mode (\d{6}),(\d{6})/,F=r.replace(/\\ No newline at end of file/g,"").replace(/\r\n?/g,`
`).split(`
`);function E(){s!==null&&e!==null&&(e.blocks.push(s),s=null)}function I(){e!==null&&(!e.oldName&&f!==null&&(e.oldName=f),!e.newName&&m!==null&&(e.newName=m),e.newName&&(n.push(e),e=null)),f=null,m=null}function B(){E(),I(),e={blocks:[],deletedLines:0,addedLines:0}}function z(y){E();let M;e!==null&&((M=/^@@ -(\d+)(?:,\d+)? \+(\d+)(?:,\d+)? @@.*/.exec(y))?(e.isCombined=!1,l=parseInt(M[1],10),d=parseInt(M[2],10)):(M=/^@@@ -(\d+)(?:,\d+)? -(\d+)(?:,\d+)? \+(\d+)(?:,\d+)? @@@.*/.exec(y))?(e.isCombined=!0,l=parseInt(M[1],10),a=parseInt(M[2],10),d=parseInt(M[3],10)):(y.startsWith(C)&&console.error("Failed to parse lines, starting in 0!"),l=0,d=0,e.isCombined=!1)),s={lines:[],oldStartLine:l,oldStartLine2:a,newStartLine:d,header:y}}function P(y){if(e===null||s===null||l===null||d===null)return;const M={content:y},w=e.isCombined?["+ "," +","++"]:["+"],G=e.isCombined?["- "," -","--"]:["-"];ft(y,w)?(e.addedLines++,M.type=H.INSERT,M.oldNumber=void 0,M.newNumber=d++):ft(y,G)?(e.deletedLines++,M.type=H.DELETE,M.oldNumber=l++,M.newNumber=void 0):(M.type=H.CONTEXT,M.oldNumber=l++,M.newNumber=d++),s.lines.push(M)}function Z(y,M){let w=M;for(;w<F.length-3;){if(y.startsWith("diff"))return!1;if(F[w].startsWith(g)&&F[w+1].startsWith(v)&&F[w+2].startsWith(C))return!0;w++}return!1}return F.forEach((y,M)=>{if(!y||y.startsWith("*"))return;let w;const G=F[M-1],ae=F[M+1],Ne=F[M+2];if(y.startsWith("diff --git")||y.startsWith("diff --combined")){if(B(),(w=/^diff --git "?([a-ciow]\/.+)"? "?([a-ciow]\/.+)"?/.exec(y))&&(f=K(w[1],void 0,t.dstPrefix),m=K(w[2],void 0,t.srcPrefix)),e===null)throw new Error("Where is my file !!!");e.isGitDiff=!0;return}if(y.startsWith("Binary files")&&!e?.isGitDiff){if(B(),(w=/^Binary files "?([a-ciow]\/.+)"? and "?([a-ciow]\/.+)"? differ/.exec(y))&&(f=K(w[1],void 0,t.dstPrefix),m=K(w[2],void 0,t.srcPrefix)),e===null)throw new Error("Where is my file !!!");e.isBinary=!0;return}if((!e||!e.isGitDiff&&e&&y.startsWith(g)&&ae.startsWith(v)&&Ne.startsWith(C))&&B(),e?.isTooBig)return;if(e&&(typeof t.diffMaxChanges=="number"&&e.addedLines+e.deletedLines>t.diffMaxChanges||typeof t.diffMaxLineLength=="number"&&y.length>t.diffMaxLineLength)){e.isTooBig=!0,e.addedLines=0,e.deletedLines=0,e.blocks=[],s=null;const le=typeof t.diffTooBigMessage=="function"?t.diffTooBigMessage(n.length):"Diff too big to be displayed";z(le);return}if(y.startsWith(g)&&ae.startsWith(v)||y.startsWith(v)&&G.startsWith(g)){if(e&&!e.oldName&&y.startsWith("--- ")&&(w=an(y,t.srcPrefix))){e.oldName=w,e.language=dt(e.oldName,e.language);return}if(e&&!e.newName&&y.startsWith("+++ ")&&(w=ln(y,t.dstPrefix))){e.newName=w,e.language=dt(e.newName,e.language);return}}if(e&&(y.startsWith(C)||e.isGitDiff&&e.oldName&&e.newName&&!s)){z(y);return}if(s&&(y.startsWith("+")||y.startsWith("-")||y.startsWith(" "))){P(y);return}const ee=!Z(y,M);if(e===null)throw new Error("Where is my file !!!");(w=c.exec(y))?e.oldMode=w[1]:(w=u.exec(y))?e.newMode=w[1]:(w=p.exec(y))?(e.deletedFileMode=w[1],e.isDeleted=!0):(w=x.exec(y))?(e.newFileMode=w[1],e.isNew=!0):(w=N.exec(y))?(ee&&(e.oldName=w[1]),e.isCopy=!0):(w=k.exec(y))?(ee&&(e.newName=w[1]),e.isCopy=!0):(w=j.exec(y))?(ee&&(e.oldName=w[1]),e.isRename=!0):(w=L.exec(y))?(ee&&(e.newName=w[1]),e.isRename=!0):(w=o.exec(y))?(e.isBinary=!0,e.oldName=K(w[1],void 0,t.srcPrefix),e.newName=K(w[2],void 0,t.dstPrefix),z("Binary file")):h.test(y)?(e.isBinary=!0,z(y)):(w=S.exec(y))?e.unchangedPercentage=parseInt(w[1],10):(w=O.exec(y))?e.changedPercentage=parseInt(w[1],10):(w=D.exec(y))?(e.checksumBefore=w[1],e.checksumAfter=w[2],w[3]&&(e.mode=w[3])):(w=b.exec(y))?(e.checksumBefore=[w[2],w[3]],e.checksumAfter=w[1]):(w=T.exec(y))?(e.oldMode=[w[2],w[3]],e.newMode=w[1]):(w=$.exec(y))?(e.newFileMode=w[1],e.isNew=!0):(w=V.exec(y))&&(e.deletedFileMode=w[1],e.isDeleted=!0)}),E(),I(),n}function cn(r,t){if(r.length===0)return t.length;if(t.length===0)return r.length;const n=[];let e;for(e=0;e<=t.length;e++)n[e]=[e];let s;for(s=0;s<=r.length;s++)n[0][s]=s;for(e=1;e<=t.length;e++)for(s=1;s<=r.length;s++)t.charAt(e-1)===r.charAt(s-1)?n[e][s]=n[e-1][s-1]:n[e][s]=Math.min(n[e-1][s-1]+1,Math.min(n[e][s-1]+1,n[e-1][s]+1));return n[t.length][r.length]}function _e(r){return(t,n)=>{const e=r(t).trim(),s=r(n).trim();return cn(e,s)/(e.length+s.length)}}function qe(r){function t(e,s,l=new Map){let a=1/0,d;for(let f=0;f<e.length;++f)for(let m=0;m<s.length;++m){const g=JSON.stringify([e[f],s[m]]);let v;l.has(g)&&(v=l.get(g))||(v=r(e[f],s[m]),l.set(g,v)),v<a&&(a=v,d={indexA:f,indexB:m,score:a})}return d}function n(e,s,l=0,a=new Map){const d=t(e,s,a);if(!d||e.length+s.length<3)return[[e,s]];const f=e.slice(0,d.indexA),m=s.slice(0,d.indexB),g=[e[d.indexA]],v=[s[d.indexB]],C=d.indexA+1,c=d.indexB+1,u=e.slice(C),p=s.slice(c),x=n(f,m,l+1,a),N=n(g,v,l+1,a),k=n(u,p,l+1,a);let j=N;return(d.indexA>0||d.indexB>0)&&(j=x.concat(j)),(e.length>C||s.length>c)&&(j=j.concat(k)),j}return n}const U={INSERTS:"d2h-ins",DELETES:"d2h-del",CONTEXT:"d2h-cntx",INFO:"d2h-info",INSERT_CHANGES:"d2h-ins d2h-change",DELETE_CHANGES:"d2h-del d2h-change"},ye={matching:Kt.NONE,matchWordsThreshold:.25,maxLineLengthHighlight:1e4,diffStyle:en.WORD,colorScheme:re.LIGHT},J="/",Ct=_e(r=>r.value),dn=qe(Ct);function Te(r){return r.indexOf("dev/null")!==-1}function fn(r){return r.replace(/(<ins[^>]*>((.|\n)*?)<\/ins>)/g,"")}function un(r){return r.replace(/(<del[^>]*>((.|\n)*?)<\/del>)/g,"")}function ge(r){switch(r){case H.CONTEXT:return U.CONTEXT;case H.INSERT:return U.INSERTS;case H.DELETE:return U.DELETES}}function Je(r){switch(r){case re.DARK:return"d2h-dark-color-scheme";case re.AUTO:return"d2h-auto-color-scheme";case re.LIGHT:default:return"d2h-light-color-scheme"}}function hn(r){return r?2:1}function se(r){return r.slice(0).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")}function X(r,t,n=!0){const e=hn(t);return{prefix:r.substring(0,e),content:n?se(r.substring(e)):r.substring(e)}}function we(r){const t=ct(r.oldName),n=ct(r.newName);if(t!==n&&!Te(t)&&!Te(n)){const e=[],s=[],l=t.split(J),a=n.split(J),d=l.length,f=a.length;let m=0,g=d-1,v=f-1;for(;m<g&&m<v&&l[m]===a[m];)e.push(a[m]),m+=1;for(;g>m&&v>m&&l[g]===a[v];)s.unshift(a[v]),g-=1,v-=1;const C=e.join(J),c=s.join(J),u=l.slice(m,g+1).join(J),p=a.slice(m,v+1).join(J);return C.length&&c.length?C+J+"{"+u+" → "+p+"}"+J+c:C.length?C+J+"{"+u+" → "+p+"}":c.length?"{"+u+" → "+p+"}"+J+c:t+" → "+n}else return Te(n)?t:n}function Xe(r){return`d2h-${sn(we(r)).toString().slice(-6)}`}function Ze(r){let t="file-changed";return r.isRename||r.isCopy?t="file-renamed":r.isNew?t="file-added":r.isDeleted?t="file-deleted":r.newName!==r.oldName&&(t="file-renamed"),t}function Tt(r,t,n,e={}){const{matching:s,maxLineLengthHighlight:l,matchWordsThreshold:a,diffStyle:d}=Object.assign(Object.assign({},ye),e),f=X(r,n,!1),m=X(t,n,!1);if(f.content.length>l||m.content.length>l)return{oldLine:{prefix:f.prefix,content:se(f.content)},newLine:{prefix:m.prefix,content:se(m.content)}};const g=d==="char"?Pt(f.content,m.content):Bt(f.content,m.content),v=[];if(d==="word"&&s==="words"){const c=g.filter(x=>x.removed),u=g.filter(x=>x.added);dn(u,c).forEach(x=>{x[0].length===1&&x[1].length===1&&Ct(x[0][0],x[1][0])<a&&(v.push(x[0][0]),v.push(x[1][0]))})}const C=g.reduce((c,u)=>{const p=u.added?"ins":u.removed?"del":null,x=v.indexOf(u)>-1?' class="d2h-change"':"",N=se(u.value);return p!==null?`${c}<${p}${x}>${N}</${p}>`:`${c}${N}`},"");return{oldLine:{prefix:f.prefix,content:fn(C)},newLine:{prefix:m.prefix,content:un(C)}}}const ht="file-summary",mn="icon",pn={colorScheme:ye.colorScheme};class gn{constructor(t,n={}){this.hoganUtils=t,this.config=Object.assign(Object.assign({},pn),n)}render(t){const n=t.map(e=>this.hoganUtils.render(ht,"line",{fileHtmlId:Xe(e),oldName:e.oldName,newName:e.newName,fileName:we(e),deletedLines:"-"+e.deletedLines,addedLines:"+"+e.addedLines},{fileIcon:this.hoganUtils.template(mn,Ze(e))})).join(`
`);return this.hoganUtils.render(ht,"wrapper",{colorScheme:Je(this.config.colorScheme),filesNumber:t.length,files:n})}}const Lt=Object.assign(Object.assign({},ye),{renderNothingWhenEmpty:!1,matchingMaxComparisons:2500,maxLineSizeInBlockForComparison:200}),ce="generic",mt="line-by-line",bn="icon",xn="tag";class vn{constructor(t,n={}){this.hoganUtils=t,this.config=Object.assign(Object.assign({},Lt),n)}render(t){const n=t.map(e=>{let s;return e.blocks.length?s=this.generateFileHtml(e):s=this.generateEmptyDiff(),this.makeFileDiffHtml(e,s)}).join(`
`);return this.hoganUtils.render(ce,"wrapper",{colorScheme:Je(this.config.colorScheme),content:n})}makeFileDiffHtml(t,n){if(this.config.renderNothingWhenEmpty&&Array.isArray(t.blocks)&&t.blocks.length===0)return"";const e=this.hoganUtils.template(mt,"file-diff"),s=this.hoganUtils.template(ce,"file-path"),l=this.hoganUtils.template(bn,"file"),a=this.hoganUtils.template(xn,Ze(t));return e.render({file:t,fileHtmlId:Xe(t),diffs:n,filePath:s.render({fileDiffName:we(t)},{fileIcon:l,fileTag:a})})}generateEmptyDiff(){return this.hoganUtils.render(ce,"empty-diff",{contentClass:"d2h-code-line",CSSLineClass:U})}generateFileHtml(t){const n=qe(_e(e=>X(e.content,t.isCombined).content));return t.blocks.map(e=>{let s=this.hoganUtils.render(ce,"block-header",{CSSLineClass:U,blockHeader:t.isTooBig?e.header:se(e.header),lineClass:"d2h-code-linenumber",contentClass:"d2h-code-line"});return this.applyLineGroupping(e).forEach(([l,a,d])=>{if(a.length&&d.length&&!l.length)this.applyRematchMatching(a,d,n).map(([f,m])=>{const{left:g,right:v}=this.processChangedLines(t,t.isCombined,f,m);s+=g,s+=v});else if(l.length)l.forEach(f=>{const{prefix:m,content:g}=X(f.content,t.isCombined);s+=this.generateSingleLineHtml(t,{type:U.CONTEXT,prefix:m,content:g,oldNumber:f.oldNumber,newNumber:f.newNumber})});else if(a.length||d.length){const{left:f,right:m}=this.processChangedLines(t,t.isCombined,a,d);s+=f,s+=m}else console.error("Unknown state reached while processing groups of lines",l,a,d)}),s}).join(`
`)}applyLineGroupping(t){const n=[];let e=[],s=[];for(let l=0;l<t.lines.length;l++){const a=t.lines[l];(a.type!==H.INSERT&&s.length||a.type===H.CONTEXT&&e.length>0)&&(n.push([[],e,s]),e=[],s=[]),a.type===H.CONTEXT?n.push([[a],[],[]]):a.type===H.INSERT&&e.length===0?n.push([[],[],[a]]):a.type===H.INSERT&&e.length>0?s.push(a):a.type===H.DELETE&&e.push(a)}return(e.length||s.length)&&(n.push([[],e,s]),e=[],s=[]),n}applyRematchMatching(t,n,e){const s=t.length*n.length,l=jt(t.concat(n).map(d=>d.content.length));return s<this.config.matchingMaxComparisons&&l<this.config.maxLineSizeInBlockForComparison&&(this.config.matching==="lines"||this.config.matching==="words")?e(t,n):[[t,n]]}processChangedLines(t,n,e,s){const l={right:"",left:""},a=Math.max(e.length,s.length);for(let d=0;d<a;d++){const f=e[d],m=s[d],g=f!==void 0&&m!==void 0?Tt(f.content,m.content,n,this.config):void 0,v=f!==void 0&&f.oldNumber!==void 0?Object.assign(Object.assign({},g!==void 0?{prefix:g.oldLine.prefix,content:g.oldLine.content,type:U.DELETE_CHANGES}:Object.assign(Object.assign({},X(f.content,n)),{type:ge(f.type)})),{oldNumber:f.oldNumber,newNumber:f.newNumber}):void 0,C=m!==void 0&&m.newNumber!==void 0?Object.assign(Object.assign({},g!==void 0?{prefix:g.newLine.prefix,content:g.newLine.content,type:U.INSERT_CHANGES}:Object.assign(Object.assign({},X(m.content,n)),{type:ge(m.type)})),{oldNumber:m.oldNumber,newNumber:m.newNumber}):void 0,{left:c,right:u}=this.generateLineHtml(t,v,C);l.left+=c,l.right+=u}return l}generateLineHtml(t,n,e){return{left:this.generateSingleLineHtml(t,n),right:this.generateSingleLineHtml(t,e)}}generateSingleLineHtml(t,n){if(n===void 0)return"";const e=this.hoganUtils.render(mt,"numbers",{oldNumber:n.oldNumber||"",newNumber:n.newNumber||""});return this.hoganUtils.render(ce,"line",{type:n.type,lineClass:"d2h-code-linenumber",contentClass:"d2h-code-line",prefix:n.prefix===" "?"&nbsp;":n.prefix,content:n.content,lineNumber:e,line:n,file:t})}}const St=Object.assign(Object.assign({},ye),{renderNothingWhenEmpty:!1,matchingMaxComparisons:2500,maxLineSizeInBlockForComparison:200}),de="generic",yn="side-by-side",wn="icon",Nn="tag";class jn{constructor(t,n={}){this.hoganUtils=t,this.config=Object.assign(Object.assign({},St),n)}render(t){const n=t.map(e=>{let s;return e.blocks.length?s=this.generateFileHtml(e):s=this.generateEmptyDiff(),this.makeFileDiffHtml(e,s)}).join(`
`);return this.hoganUtils.render(de,"wrapper",{colorScheme:Je(this.config.colorScheme),content:n})}makeFileDiffHtml(t,n){if(this.config.renderNothingWhenEmpty&&Array.isArray(t.blocks)&&t.blocks.length===0)return"";const e=this.hoganUtils.template(yn,"file-diff"),s=this.hoganUtils.template(de,"file-path"),l=this.hoganUtils.template(wn,"file"),a=this.hoganUtils.template(Nn,Ze(t));return e.render({file:t,fileHtmlId:Xe(t),diffs:n,filePath:s.render({fileDiffName:we(t)},{fileIcon:l,fileTag:a})})}generateEmptyDiff(){return{right:"",left:this.hoganUtils.render(de,"empty-diff",{contentClass:"d2h-code-side-line",CSSLineClass:U})}}generateFileHtml(t){const n=qe(_e(e=>X(e.content,t.isCombined).content));return t.blocks.map(e=>{const s={left:this.makeHeaderHtml(e.header,t),right:this.makeHeaderHtml("")};return this.applyLineGroupping(e).forEach(([l,a,d])=>{if(a.length&&d.length&&!l.length)this.applyRematchMatching(a,d,n).map(([f,m])=>{const{left:g,right:v}=this.processChangedLines(t.isCombined,f,m);s.left+=g,s.right+=v});else if(l.length)l.forEach(f=>{const{prefix:m,content:g}=X(f.content,t.isCombined),{left:v,right:C}=this.generateLineHtml({type:U.CONTEXT,prefix:m,content:g,number:f.oldNumber},{type:U.CONTEXT,prefix:m,content:g,number:f.newNumber});s.left+=v,s.right+=C});else if(a.length||d.length){const{left:f,right:m}=this.processChangedLines(t.isCombined,a,d);s.left+=f,s.right+=m}else console.error("Unknown state reached while processing groups of lines",l,a,d)}),s}).reduce((e,s)=>({left:e.left+s.left,right:e.right+s.right}),{left:"",right:""})}applyLineGroupping(t){const n=[];let e=[],s=[];for(let l=0;l<t.lines.length;l++){const a=t.lines[l];(a.type!==H.INSERT&&s.length||a.type===H.CONTEXT&&e.length>0)&&(n.push([[],e,s]),e=[],s=[]),a.type===H.CONTEXT?n.push([[a],[],[]]):a.type===H.INSERT&&e.length===0?n.push([[],[],[a]]):a.type===H.INSERT&&e.length>0?s.push(a):a.type===H.DELETE&&e.push(a)}return(e.length||s.length)&&(n.push([[],e,s]),e=[],s=[]),n}applyRematchMatching(t,n,e){const s=t.length*n.length,l=jt(t.concat(n).map(d=>d.content.length));return s<this.config.matchingMaxComparisons&&l<this.config.maxLineSizeInBlockForComparison&&(this.config.matching==="lines"||this.config.matching==="words")?e(t,n):[[t,n]]}makeHeaderHtml(t,n){return this.hoganUtils.render(de,"block-header",{CSSLineClass:U,blockHeader:n?.isTooBig?t:se(t),lineClass:"d2h-code-side-linenumber",contentClass:"d2h-code-side-line"})}processChangedLines(t,n,e){const s={right:"",left:""},l=Math.max(n.length,e.length);for(let a=0;a<l;a++){const d=n[a],f=e[a],m=d!==void 0&&f!==void 0?Tt(d.content,f.content,t,this.config):void 0,g=d!==void 0&&d.oldNumber!==void 0?Object.assign(Object.assign({},m!==void 0?{prefix:m.oldLine.prefix,content:m.oldLine.content,type:U.DELETE_CHANGES}:Object.assign(Object.assign({},X(d.content,t)),{type:ge(d.type)})),{number:d.oldNumber}):void 0,v=f!==void 0&&f.newNumber!==void 0?Object.assign(Object.assign({},m!==void 0?{prefix:m.newLine.prefix,content:m.newLine.content,type:U.INSERT_CHANGES}:Object.assign(Object.assign({},X(f.content,t)),{type:ge(f.type)})),{number:f.newNumber}):void 0,{left:C,right:c}=this.generateLineHtml(g,v);s.left+=C,s.right+=c}return s}generateLineHtml(t,n){return{left:this.generateSingleHtml(t),right:this.generateSingleHtml(n)}}generateSingleHtml(t){const n="d2h-code-side-linenumber",e="d2h-code-side-line";return this.hoganUtils.render(de,"line",{type:t?.type||`${U.CONTEXT} d2h-emptyplaceholder`,lineClass:t!==void 0?n:`${n} d2h-code-side-emptyplaceholder`,contentClass:t!==void 0?e:`${e} d2h-code-side-emptyplaceholder`,prefix:t?.prefix===" "?"&nbsp;":t?.prefix,content:t?.content,lineNumber:t?.number})}}var Le={},pt;function Cn(){return pt||(pt=1,(function(r){(function(t){var n=/\S/,e=/\"/g,s=/\n/g,l=/\r/g,a=/\\/g,d=/\u2028/,f=/\u2029/;t.tags={"#":1,"^":2,"<":3,$:4,"/":5,"!":6,">":7,"=":8,_v:9,"{":10,"&":11,_t:12},t.scan=function(h,b){var T=h.length,$=0,V=1,F=2,E=$,I=null,B=null,z="",P=[],Z=!1,y=0,M=0,w="{{",G="}}";function ae(){z.length>0&&(P.push({tag:"_t",text:new String(z)}),z="")}function Ne(){for(var Y=!0,q=M;q<P.length;q++)if(Y=t.tags[P[q].tag]<t.tags._v||P[q].tag=="_t"&&P[q].text.match(n)===null,!Y)return!1;return Y}function ee(Y,q){if(ae(),Y&&Ne())for(var Q=M,te;Q<P.length;Q++)P[Q].text&&((te=P[Q+1])&&te.tag==">"&&(te.indent=P[Q].text.toString()),P.splice(Q,1));else q||P.push({tag:`
`});Z=!1,M=P.length}function le(Y,q){var Q="="+G,te=Y.indexOf(Q,q),je=g(Y.substring(Y.indexOf("=",q)+1,te)).split(" ");return w=je[0],G=je[je.length-1],te+Q.length-1}for(b&&(b=b.split(" "),w=b[0],G=b[1]),y=0;y<T;y++)E==$?v(w,h,y)?(--y,ae(),E=V):h.charAt(y)==`
`?ee(Z):z+=h.charAt(y):E==V?(y+=w.length-1,B=t.tags[h.charAt(y+1)],I=B?h.charAt(y+1):"_v",I=="="?(y=le(h,y),E=$):(B&&y++,E=F),Z=y):v(G,h,y)?(P.push({tag:I,n:g(z),otag:w,ctag:G,i:I=="/"?Z-w.length:y+G.length}),z="",y+=G.length-1,E=$,I=="{"&&(G=="}}"?y++:m(P[P.length-1]))):z+=h.charAt(y);return ee(Z,!0),P};function m(o){o.n.substr(o.n.length-1)==="}"&&(o.n=o.n.substring(0,o.n.length-1))}function g(o){return o.trim?o.trim():o.replace(/^\s*|\s*$/g,"")}function v(o,h,b){if(h.charAt(b)!=o.charAt(0))return!1;for(var T=1,$=o.length;T<$;T++)if(h.charAt(b+T)!=o.charAt(T))return!1;return!0}var C={_t:!0,"\n":!0,$:!0,"/":!0};function c(o,h,b,T){var $=[],V=null,F=null,E=null;for(F=b[b.length-1];o.length>0;){if(E=o.shift(),F&&F.tag=="<"&&!(E.tag in C))throw new Error("Illegal content in < super tag.");if(t.tags[E.tag]<=t.tags.$||u(E,T))b.push(E),E.nodes=c(o,E.tag,b,T);else if(E.tag=="/"){if(b.length===0)throw new Error("Closing tag without opener: /"+E.n);if(V=b.pop(),E.n!=V.n&&!p(E.n,V.n,T))throw new Error("Nesting error: "+V.n+" vs. "+E.n);return V.end=E.i,$}else E.tag==`
`&&(E.last=o.length==0||o[0].tag==`
`);$.push(E)}if(b.length>0)throw new Error("missing closing tag: "+b.pop().n);return $}function u(o,h){for(var b=0,T=h.length;b<T;b++)if(h[b].o==o.n)return o.tag="#",!0}function p(o,h,b){for(var T=0,$=b.length;T<$;T++)if(b[T].c==o&&b[T].o==h)return!0}function x(o){var h=[];for(var b in o)h.push('"'+j(b)+'": function(c,p,t,i) {'+o[b]+"}");return"{ "+h.join(",")+" }"}function N(o){var h=[];for(var b in o.partials)h.push('"'+j(b)+'":{name:"'+j(o.partials[b].name)+'", '+N(o.partials[b])+"}");return"partials: {"+h.join(",")+"}, subs: "+x(o.subs)}t.stringify=function(o,h,b){return"{code: function (c,p,i) { "+t.wrapMain(o.code)+" },"+N(o)+"}"};var k=0;t.generate=function(o,h,b){k=0;var T={code:"",subs:{},partials:{}};return t.walk(o,T),b.asString?this.stringify(T,h,b):this.makeTemplate(T,h,b)},t.wrapMain=function(o){return'var t=this;t.b(i=i||"");'+o+"return t.fl();"},t.template=t.Template,t.makeTemplate=function(o,h,b){var T=this.makePartials(o);return T.code=new Function("c","p","i",this.wrapMain(o.code)),new this.template(T,h,this,b)},t.makePartials=function(o){var h,b={subs:{},partials:o.partials,name:o.name};for(h in b.partials)b.partials[h]=this.makePartials(b.partials[h]);for(h in o.subs)b.subs[h]=new Function("c","p","t","i",o.subs[h]);return b};function j(o){return o.replace(a,"\\\\").replace(e,'\\"').replace(s,"\\n").replace(l,"\\r").replace(d,"\\u2028").replace(f,"\\u2029")}function L(o){return~o.indexOf(".")?"d":"f"}function S(o,h){var b="<"+(h.prefix||""),T=b+o.n+k++;return h.partials[T]={name:o.n,partials:{}},h.code+='t.b(t.rp("'+j(T)+'",c,p,"'+(o.indent||"")+'"));',T}t.codegen={"#":function(o,h){h.code+="if(t.s(t."+L(o.n)+'("'+j(o.n)+'",c,p,1),c,p,0,'+o.i+","+o.end+',"'+o.otag+" "+o.ctag+'")){t.rs(c,p,function(c,p,t){',t.walk(o.nodes,h),h.code+="});c.pop();}"},"^":function(o,h){h.code+="if(!t.s(t."+L(o.n)+'("'+j(o.n)+'",c,p,1),c,p,1,0,0,"")){',t.walk(o.nodes,h),h.code+="};"},">":S,"<":function(o,h){var b={partials:{},code:"",subs:{},inPartial:!0};t.walk(o.nodes,b);var T=h.partials[S(o,h)];T.subs=b.subs,T.partials=b.partials},$:function(o,h){var b={subs:{},code:"",partials:h.partials,prefix:o.n};t.walk(o.nodes,b),h.subs[o.n]=b.code,h.inPartial||(h.code+='t.sub("'+j(o.n)+'",c,p,i);')},"\n":function(o,h){h.code+=D('"\\n"'+(o.last?"":" + i"))},_v:function(o,h){h.code+="t.b(t.v(t."+L(o.n)+'("'+j(o.n)+'",c,p,0)));'},_t:function(o,h){h.code+=D('"'+j(o.text)+'"')},"{":O,"&":O};function O(o,h){h.code+="t.b(t.t(t."+L(o.n)+'("'+j(o.n)+'",c,p,0)));'}function D(o){return"t.b("+o+");"}t.walk=function(o,h){for(var b,T=0,$=o.length;T<$;T++)b=t.codegen[o[T].tag],b&&b(o[T],h);return h},t.parse=function(o,h,b){return b=b||{},c(o,"",[],b.sectionTags||[])},t.cache={},t.cacheKey=function(o,h){return[o,!!h.asString,!!h.disableLambda,h.delimiters,!!h.modelGet].join("||")},t.compile=function(o,h){h=h||{};var b=t.cacheKey(o,h),T=this.cache[b];if(T){var $=T.partials;for(var V in $)delete $[V].instance;return T}return T=this.generate(this.parse(this.scan(o,h.delimiters),o,h),o,h),this.cache[b]=T}})(r)})(Le)),Le}var Se={},gt;function Tn(){return gt||(gt=1,(function(r){(function(t){t.Template=function(c,u,p,x){c=c||{},this.r=c.code||this.r,this.c=p,this.options=x||{},this.text=u||"",this.partials=c.partials||{},this.subs=c.subs||{},this.buf=""},t.Template.prototype={r:function(c,u,p){return""},v,t:g,render:function(u,p,x){return this.ri([u],p||{},x)},ri:function(c,u,p){return this.r(c,u,p)},ep:function(c,u){var p=this.partials[c],x=u[p.name];if(p.instance&&p.base==x)return p.instance;if(typeof x=="string"){if(!this.c)throw new Error("No compiler available.");x=this.c.compile(x,this.options)}if(!x)return null;if(this.partials[c].base=x,p.subs){u.stackText||(u.stackText={});for(key in p.subs)u.stackText[key]||(u.stackText[key]=this.activeSub!==void 0&&u.stackText[this.activeSub]?u.stackText[this.activeSub]:this.text);x=e(x,p.subs,p.partials,this.stackSubs,this.stackPartials,u.stackText)}return this.partials[c].instance=x,x},rp:function(c,u,p,x){var N=this.ep(c,p);return N?N.ri(u,p,x):""},rs:function(c,u,p){var x=c[c.length-1];if(!C(x)){p(c,u,this);return}for(var N=0;N<x.length;N++)c.push(x[N]),p(c,u,this),c.pop()},s:function(c,u,p,x,N,k,j){var L;return C(c)&&c.length===0?!1:(typeof c=="function"&&(c=this.ms(c,u,p,x,N,k,j)),L=!!c,!x&&L&&u&&u.push(typeof c=="object"?c:u[u.length-1]),L)},d:function(c,u,p,x){var N,k=c.split("."),j=this.f(k[0],u,p,x),L=this.options.modelGet,S=null;if(c==="."&&C(u[u.length-2]))j=u[u.length-1];else for(var O=1;O<k.length;O++)N=n(k[O],j,L),N!==void 0?(S=j,j=N):j="";return x&&!j?!1:(!x&&typeof j=="function"&&(u.push(S),j=this.mv(j,u,p),u.pop()),j)},f:function(c,u,p,x){for(var N=!1,k=null,j=!1,L=this.options.modelGet,S=u.length-1;S>=0;S--)if(k=u[S],N=n(c,k,L),N!==void 0){j=!0;break}return j?(!x&&typeof N=="function"&&(N=this.mv(N,u,p)),N):x?!1:""},ls:function(c,u,p,x,N){var k=this.options.delimiters;return this.options.delimiters=N,this.b(this.ct(g(c.call(u,x)),u,p)),this.options.delimiters=k,!1},ct:function(c,u,p){if(this.options.disableLambda)throw new Error("Lambda features disabled.");return this.c.compile(c,this.options).render(u,p)},b:function(c){this.buf+=c},fl:function(){var c=this.buf;return this.buf="",c},ms:function(c,u,p,x,N,k,j){var L,S=u[u.length-1],O=c.call(S);return typeof O=="function"?x?!0:(L=this.activeSub&&this.subsText&&this.subsText[this.activeSub]?this.subsText[this.activeSub]:this.text,this.ls(O,S,p,L.substring(N,k),j)):O},mv:function(c,u,p){var x=u[u.length-1],N=c.call(x);return typeof N=="function"?this.ct(g(N.call(x)),x,p):N},sub:function(c,u,p,x){var N=this.subs[c];N&&(this.activeSub=c,N(u,p,this,x),this.activeSub=!1)}};function n(c,u,p){var x;return u&&typeof u=="object"&&(u[c]!==void 0?x=u[c]:p&&u.get&&typeof u.get=="function"&&(x=u.get(c))),x}function e(c,u,p,x,N,k){function j(){}j.prototype=c;function L(){}L.prototype=c.subs;var S,O=new j;O.subs=new L,O.subsText={},O.buf="",x=x||{},O.stackSubs=x,O.subsText=k;for(S in u)x[S]||(x[S]=u[S]);for(S in x)O.subs[S]=x[S];N=N||{},O.stackPartials=N;for(S in p)N[S]||(N[S]=p[S]);for(S in N)O.partials[S]=N[S];return O}var s=/&/g,l=/</g,a=/>/g,d=/\'/g,f=/\"/g,m=/[&<>\"\']/;function g(c){return String(c??"")}function v(c){return c=g(c),m.test(c)?c.replace(s,"&amp;").replace(l,"&lt;").replace(a,"&gt;").replace(d,"&#39;").replace(f,"&quot;"):c}var C=Array.isArray||function(c){return Object.prototype.toString.call(c)==="[object Array]"}})(r)})(Se)),Se}var Ee,bt;function Ln(){if(bt)return Ee;bt=1;var r=Cn();return r.Template=Tn().Template,r.template=r.Template,Ee=r,Ee}var A=Ln();const R={};R["file-summary-line"]=new A.Template({code:function(r,t,n){var e=this;return e.b(n=n||""),e.b('<li class="d2h-file-list-line">'),e.b(`
`+n),e.b('    <span class="d2h-file-name-wrapper">'),e.b(`
`+n),e.b(e.rp("<fileIcon0",r,t,"      ")),e.b('      <a href="#'),e.b(e.v(e.f("fileHtmlId",r,t,0))),e.b('" class="d2h-file-name">'),e.b(e.v(e.f("fileName",r,t,0))),e.b("</a>"),e.b(`
`+n),e.b('      <span class="d2h-file-stats">'),e.b(`
`+n),e.b('          <span class="d2h-lines-added">'),e.b(e.v(e.f("addedLines",r,t,0))),e.b("</span>"),e.b(`
`+n),e.b('          <span class="d2h-lines-deleted">'),e.b(e.v(e.f("deletedLines",r,t,0))),e.b("</span>"),e.b(`
`+n),e.b("      </span>"),e.b(`
`+n),e.b("    </span>"),e.b(`
`+n),e.b("</li>"),e.fl()},partials:{"<fileIcon0":{name:"fileIcon",partials:{},subs:{}}},subs:{}});R["file-summary-wrapper"]=new A.Template({code:function(r,t,n){var e=this;return e.b(n=n||""),e.b('<div class="d2h-file-list-wrapper '),e.b(e.v(e.f("colorScheme",r,t,0))),e.b('">'),e.b(`
`+n),e.b('    <div class="d2h-file-list-header">'),e.b(`
`+n),e.b('        <span class="d2h-file-list-title">Files changed ('),e.b(e.v(e.f("filesNumber",r,t,0))),e.b(")</span>"),e.b(`
`+n),e.b('        <a class="d2h-file-switch d2h-hide">hide</a>'),e.b(`
`+n),e.b('        <a class="d2h-file-switch d2h-show">show</a>'),e.b(`
`+n),e.b("    </div>"),e.b(`
`+n),e.b('    <ol class="d2h-file-list">'),e.b(`
`+n),e.b("    "),e.b(e.t(e.f("files",r,t,0))),e.b(`
`+n),e.b("    </ol>"),e.b(`
`+n),e.b("</div>"),e.fl()},partials:{},subs:{}});R["generic-block-header"]=new A.Template({code:function(r,t,n){var e=this;return e.b(n=n||""),e.b("<tr>"),e.b(`
`+n),e.b('    <td class="'),e.b(e.v(e.f("lineClass",r,t,0))),e.b(" "),e.b(e.v(e.d("CSSLineClass.INFO",r,t,0))),e.b('"></td>'),e.b(`
`+n),e.b('    <td class="'),e.b(e.v(e.d("CSSLineClass.INFO",r,t,0))),e.b('">'),e.b(`
`+n),e.b('        <div class="'),e.b(e.v(e.f("contentClass",r,t,0))),e.b('">'),e.s(e.f("blockHeader",r,t,1),r,t,0,156,173,"{{ }}")&&(e.rs(r,t,function(s,l,a){a.b(a.t(a.f("blockHeader",s,l,0)))}),r.pop()),e.s(e.f("blockHeader",r,t,1),r,t,1,0,0,"")||e.b("&nbsp;"),e.b("</div>"),e.b(`
`+n),e.b("    </td>"),e.b(`
`+n),e.b("</tr>"),e.fl()},partials:{},subs:{}});R["generic-empty-diff"]=new A.Template({code:function(r,t,n){var e=this;return e.b(n=n||""),e.b("<tr>"),e.b(`
`+n),e.b('    <td class="'),e.b(e.v(e.d("CSSLineClass.INFO",r,t,0))),e.b('">'),e.b(`
`+n),e.b('        <div class="'),e.b(e.v(e.f("contentClass",r,t,0))),e.b('">'),e.b(`
`+n),e.b("            File without changes"),e.b(`
`+n),e.b("        </div>"),e.b(`
`+n),e.b("    </td>"),e.b(`
`+n),e.b("</tr>"),e.fl()},partials:{},subs:{}});R["generic-file-path"]=new A.Template({code:function(r,t,n){var e=this;return e.b(n=n||""),e.b('<span class="d2h-file-name-wrapper">'),e.b(`
`+n),e.b(e.rp("<fileIcon0",r,t,"    ")),e.b('    <span class="d2h-file-name">'),e.b(e.v(e.f("fileDiffName",r,t,0))),e.b("</span>"),e.b(`
`+n),e.b(e.rp("<fileTag1",r,t,"    ")),e.b("</span>"),e.b(`
`+n),e.b('<label class="d2h-file-collapse">'),e.b(`
`+n),e.b('    <input class="d2h-file-collapse-input" type="checkbox" name="viewed" value="viewed">'),e.b(`
`+n),e.b("    Viewed"),e.b(`
`+n),e.b("</label>"),e.fl()},partials:{"<fileIcon0":{name:"fileIcon",partials:{},subs:{}},"<fileTag1":{name:"fileTag",partials:{},subs:{}}},subs:{}});R["generic-line"]=new A.Template({code:function(r,t,n){var e=this;return e.b(n=n||""),e.b("<tr>"),e.b(`
`+n),e.b('    <td class="'),e.b(e.v(e.f("lineClass",r,t,0))),e.b(" "),e.b(e.v(e.f("type",r,t,0))),e.b('">'),e.b(`
`+n),e.b("      "),e.b(e.t(e.f("lineNumber",r,t,0))),e.b(`
`+n),e.b("    </td>"),e.b(`
`+n),e.b('    <td class="'),e.b(e.v(e.f("type",r,t,0))),e.b('">'),e.b(`
`+n),e.b('        <div class="'),e.b(e.v(e.f("contentClass",r,t,0))),e.b('">'),e.b(`
`+n),e.s(e.f("prefix",r,t,1),r,t,0,162,238,"{{ }}")&&(e.rs(r,t,function(s,l,a){a.b('            <span class="d2h-code-line-prefix">'),a.b(a.t(a.f("prefix",s,l,0))),a.b("</span>"),a.b(`
`+n)}),r.pop()),e.s(e.f("prefix",r,t,1),r,t,1,0,0,"")||(e.b('            <span class="d2h-code-line-prefix">&nbsp;</span>'),e.b(`
`+n)),e.s(e.f("content",r,t,1),r,t,0,371,445,"{{ }}")&&(e.rs(r,t,function(s,l,a){a.b('            <span class="d2h-code-line-ctn">'),a.b(a.t(a.f("content",s,l,0))),a.b("</span>"),a.b(`
`+n)}),r.pop()),e.s(e.f("content",r,t,1),r,t,1,0,0,"")||(e.b('            <span class="d2h-code-line-ctn"><br></span>'),e.b(`
`+n)),e.b("        </div>"),e.b(`
`+n),e.b("    </td>"),e.b(`
`+n),e.b("</tr>"),e.fl()},partials:{},subs:{}});R["generic-wrapper"]=new A.Template({code:function(r,t,n){var e=this;return e.b(n=n||""),e.b('<div class="d2h-wrapper '),e.b(e.v(e.f("colorScheme",r,t,0))),e.b('">'),e.b(`
`+n),e.b("    "),e.b(e.t(e.f("content",r,t,0))),e.b(`
`+n),e.b("</div>"),e.fl()},partials:{},subs:{}});R["icon-file-added"]=new A.Template({code:function(r,t,n){var e=this;return e.b(n=n||""),e.b('<svg aria-hidden="true" class="d2h-icon d2h-added" height="16" title="added" version="1.1" viewBox="0 0 14 16"'),e.b(`
`+n),e.b('     width="14">'),e.b(`
`+n),e.b('    <path d="M13 1H1C0.45 1 0 1.45 0 2v12c0 0.55 0.45 1 1 1h12c0.55 0 1-0.45 1-1V2c0-0.55-0.45-1-1-1z m0 13H1V2h12v12zM6 9H3V7h3V4h2v3h3v2H8v3H6V9z"></path>'),e.b(`
`+n),e.b("</svg>"),e.fl()},partials:{},subs:{}});R["icon-file-changed"]=new A.Template({code:function(r,t,n){var e=this;return e.b(n=n||""),e.b('<svg aria-hidden="true" class="d2h-icon d2h-changed" height="16" title="modified" version="1.1"'),e.b(`
`+n),e.b('     viewBox="0 0 14 16" width="14">'),e.b(`
`+n),e.b('    <path d="M13 1H1C0.45 1 0 1.45 0 2v12c0 0.55 0.45 1 1 1h12c0.55 0 1-0.45 1-1V2c0-0.55-0.45-1-1-1z m0 13H1V2h12v12zM4 8c0-1.66 1.34-3 3-3s3 1.34 3 3-1.34 3-3 3-3-1.34-3-3z"></path>'),e.b(`
`+n),e.b("</svg>"),e.fl()},partials:{},subs:{}});R["icon-file-deleted"]=new A.Template({code:function(r,t,n){var e=this;return e.b(n=n||""),e.b('<svg aria-hidden="true" class="d2h-icon d2h-deleted" height="16" title="removed" version="1.1"'),e.b(`
`+n),e.b('     viewBox="0 0 14 16" width="14">'),e.b(`
`+n),e.b('    <path d="M13 1H1C0.45 1 0 1.45 0 2v12c0 0.55 0.45 1 1 1h12c0.55 0 1-0.45 1-1V2c0-0.55-0.45-1-1-1z m0 13H1V2h12v12zM11 9H3V7h8v2z"></path>'),e.b(`
`+n),e.b("</svg>"),e.fl()},partials:{},subs:{}});R["icon-file-renamed"]=new A.Template({code:function(r,t,n){var e=this;return e.b(n=n||""),e.b('<svg aria-hidden="true" class="d2h-icon d2h-moved" height="16" title="renamed" version="1.1"'),e.b(`
`+n),e.b('     viewBox="0 0 14 16" width="14">'),e.b(`
`+n),e.b('    <path d="M6 9H3V7h3V4l5 4-5 4V9z m8-7v12c0 0.55-0.45 1-1 1H1c-0.55 0-1-0.45-1-1V2c0-0.55 0.45-1 1-1h12c0.55 0 1 0.45 1 1z m-1 0H1v12h12V2z"></path>'),e.b(`
`+n),e.b("</svg>"),e.fl()},partials:{},subs:{}});R["icon-file"]=new A.Template({code:function(r,t,n){var e=this;return e.b(n=n||""),e.b('<svg aria-hidden="true" class="d2h-icon" height="16" version="1.1" viewBox="0 0 12 16" width="12">'),e.b(`
`+n),e.b('    <path d="M6 5H2v-1h4v1zM2 8h7v-1H2v1z m0 2h7v-1H2v1z m0 2h7v-1H2v1z m10-7.5v9.5c0 0.55-0.45 1-1 1H1c-0.55 0-1-0.45-1-1V2c0-0.55 0.45-1 1-1h7.5l3.5 3.5z m-1 0.5L8 2H1v12h10V5z"></path>'),e.b(`
`+n),e.b("</svg>"),e.fl()},partials:{},subs:{}});R["line-by-line-file-diff"]=new A.Template({code:function(r,t,n){var e=this;return e.b(n=n||""),e.b('<div id="'),e.b(e.v(e.f("fileHtmlId",r,t,0))),e.b('" class="d2h-file-wrapper" data-lang="'),e.b(e.v(e.d("file.language",r,t,0))),e.b('">'),e.b(`
`+n),e.b('    <div class="d2h-file-header">'),e.b(`
`+n),e.b("    "),e.b(e.t(e.f("filePath",r,t,0))),e.b(`
`+n),e.b("    </div>"),e.b(`
`+n),e.b('    <div class="d2h-file-diff">'),e.b(`
`+n),e.b('        <div class="d2h-code-wrapper">'),e.b(`
`+n),e.b('            <table class="d2h-diff-table">'),e.b(`
`+n),e.b('                <tbody class="d2h-diff-tbody">'),e.b(`
`+n),e.b("                "),e.b(e.t(e.f("diffs",r,t,0))),e.b(`
`+n),e.b("                </tbody>"),e.b(`
`+n),e.b("            </table>"),e.b(`
`+n),e.b("        </div>"),e.b(`
`+n),e.b("    </div>"),e.b(`
`+n),e.b("</div>"),e.fl()},partials:{},subs:{}});R["line-by-line-numbers"]=new A.Template({code:function(r,t,n){var e=this;return e.b(n=n||""),e.b('<div class="line-num1">'),e.b(e.v(e.f("oldNumber",r,t,0))),e.b("</div>"),e.b(`
`+n),e.b('<div class="line-num2">'),e.b(e.v(e.f("newNumber",r,t,0))),e.b("</div>"),e.fl()},partials:{},subs:{}});R["side-by-side-file-diff"]=new A.Template({code:function(r,t,n){var e=this;return e.b(n=n||""),e.b('<div id="'),e.b(e.v(e.f("fileHtmlId",r,t,0))),e.b('" class="d2h-file-wrapper" data-lang="'),e.b(e.v(e.d("file.language",r,t,0))),e.b('">'),e.b(`
`+n),e.b('    <div class="d2h-file-header">'),e.b(`
`+n),e.b("      "),e.b(e.t(e.f("filePath",r,t,0))),e.b(`
`+n),e.b("    </div>"),e.b(`
`+n),e.b('    <div class="d2h-files-diff">'),e.b(`
`+n),e.b('        <div class="d2h-file-side-diff">'),e.b(`
`+n),e.b('            <div class="d2h-code-wrapper">'),e.b(`
`+n),e.b('                <table class="d2h-diff-table">'),e.b(`
`+n),e.b('                    <tbody class="d2h-diff-tbody">'),e.b(`
`+n),e.b("                    "),e.b(e.t(e.d("diffs.left",r,t,0))),e.b(`
`+n),e.b("                    </tbody>"),e.b(`
`+n),e.b("                </table>"),e.b(`
`+n),e.b("            </div>"),e.b(`
`+n),e.b("        </div>"),e.b(`
`+n),e.b('        <div class="d2h-file-side-diff">'),e.b(`
`+n),e.b('            <div class="d2h-code-wrapper">'),e.b(`
`+n),e.b('                <table class="d2h-diff-table">'),e.b(`
`+n),e.b('                    <tbody class="d2h-diff-tbody">'),e.b(`
`+n),e.b("                    "),e.b(e.t(e.d("diffs.right",r,t,0))),e.b(`
`+n),e.b("                    </tbody>"),e.b(`
`+n),e.b("                </table>"),e.b(`
`+n),e.b("            </div>"),e.b(`
`+n),e.b("        </div>"),e.b(`
`+n),e.b("    </div>"),e.b(`
`+n),e.b("</div>"),e.fl()},partials:{},subs:{}});R["tag-file-added"]=new A.Template({code:function(r,t,n){var e=this;return e.b(n=n||""),e.b('<span class="d2h-tag d2h-added d2h-added-tag">ADDED</span>'),e.fl()},partials:{},subs:{}});R["tag-file-changed"]=new A.Template({code:function(r,t,n){var e=this;return e.b(n=n||""),e.b('<span class="d2h-tag d2h-changed d2h-changed-tag">CHANGED</span>'),e.fl()},partials:{},subs:{}});R["tag-file-deleted"]=new A.Template({code:function(r,t,n){var e=this;return e.b(n=n||""),e.b('<span class="d2h-tag d2h-deleted d2h-deleted-tag">DELETED</span>'),e.fl()},partials:{},subs:{}});R["tag-file-renamed"]=new A.Template({code:function(r,t,n){var e=this;return e.b(n=n||""),e.b('<span class="d2h-tag d2h-moved d2h-moved-tag">RENAMED</span>'),e.fl()},partials:{},subs:{}});class Sn{constructor({compiledTemplates:t={},rawTemplates:n={}}){const e=Object.entries(n).reduce((s,[l,a])=>{const d=A.compile(a,{asString:!1});return Object.assign(Object.assign({},s),{[l]:d})},{});this.preCompiledTemplates=Object.assign(Object.assign(Object.assign({},R),t),e)}static compile(t){return A.compile(t,{asString:!1})}render(t,n,e,s,l){const a=this.templateKey(t,n);try{return this.preCompiledTemplates[a].render(e,s,l)}catch{throw new Error(`Could not find template to render '${a}'`)}}template(t,n){return this.preCompiledTemplates[this.templateKey(t,n)]}templateKey(t,n){return`${t}-${n}`}}const En=Object.assign(Object.assign(Object.assign({},Lt),St),{outputFormat:Qt.LINE_BY_LINE,drawFileList:!0});function On(r,t={}){const n=Object.assign(Object.assign({},En),t),e=typeof r=="string"?on(r,n):r,s=new Sn(n),{colorScheme:l}=n,a={colorScheme:l},d=n.drawFileList?new gn(s,a).render(e):"",f=n.outputFormat==="side-by-side"?new jn(s,n).render(e):new vn(s,n).render(e);return d+f}function kn({message:r,availableVersions:t,selectedVersion:n,onVersionChange:e,onCopy:s,onDownload:l,isCopied:a,schemaViewMode:d,onViewModeChange:f,hasParsedSchema:m,hasDiffs:g,diffCount:v}){const{color:C,Icon:c}=Ot(r.collection),u=t.length>1;return i.jsxs("div",{className:"flex-shrink-0 border-b border-gray-200 p-3",children:[i.jsx("div",{className:"flex items-start justify-between mb-3",children:i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[i.jsx(c,{className:`h-5 w-5 text-${C}-500 flex-shrink-0`}),i.jsx("a",{href:ne(`/docs/${r.collection}/${r.data.id}/${r.data.version}`),className:`text-lg font-semibold text-gray-900 hover:text-${C}-600 hover:underline truncate`,children:r.data.name}),u?i.jsx("select",{value:n||r.data.version,onChange:p=>e(p.target.value),className:"text-xs text-gray-700 bg-white border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:t.map(p=>i.jsxs("option",{value:p.data.version,children:["v",p.data.version]},p.data.version))}):i.jsxs("span",{className:"text-xs text-gray-500 flex-shrink-0",children:["v",r.data.version]})]}),i.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[i.jsx("span",{className:`inline-flex items-center rounded-full bg-${C}-100 px-1.5 py-0.5 text-xs font-medium text-${C}-800`,children:r.collection}),i.jsx("span",{className:"inline-flex items-center gap-1 rounded-full bg-gray-100 px-1.5 py-0.5 text-xs font-medium text-gray-800",children:(()=>{const p=r.schemaExtension?.toLowerCase();if(p==="openapi"||p==="asyncapi"||p==="graphql"||p==="avro"||p==="json"||p==="proto"){const N=ne(`/icons/${p==="json"?"json-schema":p}.svg`,!0);return i.jsxs(i.Fragment,{children:[i.jsx("img",{src:N,alt:`${p} icon`,className:"h-3 w-3"}),Ke(r.schemaExtension)]})}return Ke(r.schemaExtension)})()})]}),r.data.summary&&i.jsx("p",{className:"text-xs text-gray-600 line-clamp-2",children:r.data.summary})]})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"flex items-center gap-1 mr-2 border-r border-gray-300 pr-2",children:[i.jsxs("button",{onClick:()=>f("code"),className:`inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded transition-colors ${d==="code"?"bg-primary text-white":"text-gray-600 hover:bg-gray-100"}`,title:"Code view",children:[i.jsx(kt,{className:"h-3.5 w-3.5"}),"Code"]}),m&&i.jsxs("button",{onClick:()=>f("schema"),className:`inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded transition-colors ${d==="schema"?"bg-primary text-white":"text-gray-600 hover:bg-gray-100"}`,title:"Schema view",children:[i.jsx(Mt,{className:"h-3.5 w-3.5"}),"Schema"]}),g&&i.jsxs("button",{onClick:()=>f("diff"),className:`inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded transition-colors ${d==="diff"?"bg-primary text-white":"text-gray-600 hover:bg-gray-100"}`,title:"View version history diffs",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Diff (",v,")"]})]}),i.jsxs("button",{onClick:s,className:"inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",title:"Copy schema to clipboard",children:[i.jsx(be,{className:"h-4 w-4"}),a?"Copied!":"Copy"]}),i.jsxs("button",{onClick:l,className:"inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",title:"Download schema file",children:[i.jsx($t,{className:"h-4 w-4"}),"Download"]}),i.jsx("a",{href:ne(`/docs/${r.collection}/${r.data.id}/${r.data.version}`),className:"inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors ml-auto",title:"View full documentation",children:"View Docs →"})]})]})}function Mn({message:r,isExpanded:t,onToggle:n,onCopy:e,copiedId:s,apiAccessEnabled:l=!1}){let a="";if(r.collection==="services"){const f=r.specType||"openapi";a=`/api/schemas/services/${r.data.id}/${r.data.version}/${f}`}else a=`/api/schemas/${r.collection}/${r.data.id}/${r.data.version}`;const d=typeof window<"u"?`curl -X GET "${window.location.origin}${a}"`:"";return i.jsxs("div",{className:"flex-shrink-0 border-b border-gray-200",children:[i.jsxs("button",{onClick:n,className:"w-full flex items-center justify-between px-4 py-1.5 text-left hover:bg-gray-50 transition-colors",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),i.jsx("span",{className:"text-xs font-semibold text-gray-900",children:"API Access"}),i.jsx("span",{className:"inline-flex items-center rounded-full bg-purple-100 px-2 py-0.5 text-xs font-medium text-purple-800",children:"Scale"})]}),t?i.jsx(He,{className:"h-4 w-4 text-gray-600"}):i.jsx(Re,{className:"h-4 w-4 text-gray-600"})]}),t&&i.jsx("div",{className:"px-4 pb-2 bg-gray-50",children:l?i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Access this schema programmatically via API"}),i.jsxs("div",{className:"bg-gray-900 rounded-md p-3",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsx("span",{className:"text-xs text-gray-400 font-mono",children:"GET"}),i.jsxs("button",{onClick:()=>e(d,`${r.data.id}-api`),className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-gray-300 hover:text-white transition-colors",title:"Copy curl command",children:[i.jsx(be,{className:"h-3.5 w-3.5"}),s===`${r.data.id}-api`?"Copied!":"Copy"]})]}),i.jsx("code",{className:"block text-xs text-green-400 font-mono break-all",children:a}),i.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-700",children:[i.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Example:"}),i.jsx("code",{className:"block text-xs text-gray-300 font-mono whitespace-pre-wrap break-all",children:d})]})]})]}):i.jsx("div",{className:"bg-white border border-purple-200 rounded-md p-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Upgrade to Scale"}),i.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Access your schemas programmatically via API. Perfect for CI/CD pipelines, automation, and integrations."}),i.jsxs("a",{href:"https://eventcatalog.cloud",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-white bg-purple-600 rounded-md hover:bg-purple-700 transition-colors",children:["Start 14-day free trial",i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})]})]})})})]})}function $n({message:r,isExpanded:t,onToggle:n}){const e=r.data.owners||[];return e.length===0?null:i.jsxs("div",{className:"flex-shrink-0 border-b border-gray-200",children:[i.jsxs("button",{onClick:n,className:"w-full flex items-center justify-between px-4 py-1.5 text-left hover:bg-gray-50 transition-colors",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ye,{className:"h-4 w-4 text-gray-600"}),i.jsx("span",{className:"text-xs font-semibold text-gray-900",children:"Owners"}),i.jsx("span",{className:"inline-flex items-center rounded-full bg-gray-100 px-2 py-0.5 text-xs font-medium text-gray-700",children:e.length})]}),t?i.jsx(He,{className:"h-4 w-4 text-gray-600"}):i.jsx(Re,{className:"h-4 w-4 text-gray-600"})]}),t&&i.jsx("div",{className:"px-4 pb-2 bg-gray-50",children:i.jsx("div",{className:"flex flex-wrap gap-2",children:e.map((s,l)=>{const a=s.type==="users"?Ye:Dt;return i.jsxs("a",{href:s.href,className:"inline-flex items-center gap-1.5 pl-1 pr-3 py-1 text-xs font-medium text-gray-700 bg-white border border-gray-200 rounded-full hover:border-gray-300 hover:shadow-sm transition-all",title:s.name,children:[i.jsx("div",{className:"flex items-center justify-center w-5 h-5 bg-gradient-to-b from-purple-500 to-purple-600 rounded-full",children:i.jsx(a,{className:"h-3 w-3 text-white"})}),i.jsx("span",{className:"font-medium",children:s.name})]},`${s.id}-${l}`)})})})]})}function In({message:r,isExpanded:t,onToggle:n}){const e=r.data.producers||[],s=r.data.consumers||[],l=e.length+s.length;return l===0?null:i.jsxs("div",{className:"flex-shrink-0 border-b border-gray-200",children:[i.jsxs("button",{onClick:n,className:"w-full flex items-center justify-between px-4 py-1.5 text-left hover:bg-gray-50 transition-colors",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),i.jsx("span",{className:"text-xs font-semibold text-gray-900",children:"Producers & Consumers"}),i.jsxs("span",{className:"inline-flex items-center rounded-full bg-gray-100 px-2 py-0.5 text-xs font-medium text-gray-700",children:[l," services"]})]}),t?i.jsx(He,{className:"h-4 w-4 text-gray-600"}):i.jsx(Re,{className:"h-4 w-4 text-gray-600"})]}),t&&i.jsxs("div",{className:"px-4 pb-2 bg-gray-50",children:[e.length>0&&i.jsxs("div",{className:"mb-3",children:[i.jsxs("h4",{className:"text-xs font-semibold text-gray-900 mb-2",children:["Producers (",e.length,")"]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:e.map((a,d)=>i.jsxs("a",{href:ne(`/docs/services/${a.id}/${a.version}`),className:"inline-flex items-center gap-1.5 pl-1 pr-3 py-1 text-xs font-medium text-gray-700 bg-white border border-gray-200 rounded-full hover:border-gray-300 hover:shadow-sm transition-all",title:`View ${a.id}`,children:[i.jsx("div",{className:"flex items-center justify-center w-5 h-5 bg-gradient-to-b from-pink-500 to-pink-600 rounded-full",children:i.jsx(Qe,{className:"h-3 w-3 text-white"})}),i.jsx("span",{className:"font-medium",children:a.id}),i.jsxs("span",{className:"text-gray-500 text-[11px]",children:["v",a.version]})]},`${a.id}-${d}`))})]}),s.length>0&&i.jsxs("div",{children:[i.jsxs("h4",{className:"text-xs font-semibold text-gray-900 mb-2",children:["Consumers (",s.length,")"]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:s.map((a,d)=>i.jsxs("a",{href:ne(`/docs/services/${a.id}/${a.version}`),className:"inline-flex items-center gap-1.5 pl-1 pr-3 py-1 text-xs font-medium text-gray-700 bg-white border border-gray-200 rounded-full hover:border-gray-300 hover:shadow-sm transition-all",title:`View ${a.id}`,children:[i.jsx("div",{className:"flex items-center justify-center w-5 h-5 bg-gradient-to-b from-pink-500 to-pink-600 rounded-full",children:i.jsx(Qe,{className:"h-3 w-3 text-white"})}),i.jsx("span",{className:"font-medium",children:a.id}),i.jsxs("span",{className:"text-gray-500 text-[11px]",children:["v",a.version]})]},`${a.id}-${d}`))})]})]})]})}function Dn({message:r,onCopy:t,isCopied:n,viewMode:e,parsedSchema:s,parsedAvroSchema:l,showRequired:a=!1,onOpenFullscreen:d}){if(!r.schemaContent)return i.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:i.jsx("p",{className:"text-sm",children:"No schema content available"})});if(e==="schema"){if(l)return i.jsx(wt,{schema:l,onOpenFullscreen:d,showRequired:a});if(s)return i.jsx(yt,{schema:s,onOpenFullscreen:d})}return i.jsxs("div",{className:"h-full overflow-auto p-3 relative bg-white border border-gray-200 rounded-lg",children:[i.jsxs("div",{className:"absolute top-5 right-5 z-10 flex items-center gap-2",children:[r.collection==="services"&&(()=>{const f=r.specType||"openapi",m=r.specFilenameWithoutExtension||"schema";let g="spec";f==="asyncapi"?g="asyncapi":f==="graphql"&&(g="graphql");const v=ne(`/docs/services/${r.data.id}/${r.data.version}/${g}/${m}`);return i.jsxs("a",{href:v,className:"inline-flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 rounded-md transition-colors shadow-sm",title:"View full specification",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})}),"View Spec"]})})(),d&&i.jsxs("button",{onClick:d,className:"inline-flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 rounded-md transition-colors shadow-sm",title:"Open in fullscreen",children:[i.jsx(ue,{className:"h-3.5 w-3.5"}),"Fullscreen"]}),i.jsxs("button",{onClick:t,className:"inline-flex items-center gap-1.5 px-2.5 py-1.5 text-xs font-medium text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 rounded-md transition-colors shadow-sm",title:"Copy code",children:[i.jsx(be,{className:"h-3.5 w-3.5"}),n?"Copied!":"Copy"]})]}),i.jsx(xt,{language:Oe(r.schemaExtension),style:vt.oneLight,customStyle:{margin:0,padding:"0.75rem",paddingTop:"2.5rem",borderRadius:"0.5rem",fontSize:"0.875rem",lineHeight:"1.6",height:"100%",overflow:"auto"},className:"bg-white border border-gray-200 rounded-lg",showLineNumbers:!0,wrapLines:!0,wrapLongLines:!0,children:r.schemaContent})]})}function Et({diffs:r,onOpenFullscreen:t,apiAccessEnabled:n=!1}){return r.length===0?null:i.jsxs("div",{className:"h-full overflow-auto p-4",children:[i.jsxs("div",{className:"mb-4 flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Version History"}),i.jsx("p",{className:"text-sm text-gray-600",children:n?`Showing ${r.length} version comparison${r.length!==1?"s":""}`:"Compare schema versions side-by-side"})]}),t&&n&&i.jsxs("button",{onClick:t,className:"inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",title:"Open in fullscreen",children:[i.jsx(ue,{className:"h-4 w-4"}),"Fullscreen"]})]}),n?i.jsx("div",{className:"space-y-8",children:r.map((e,s)=>i.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[i.jsx("div",{className:"bg-gray-50 border-b border-gray-200 px-4 py-3",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm",children:[i.jsxs("span",{className:"font-semibold text-gray-900",children:["v",e.newerVersion]}),i.jsx("span",{className:"text-gray-500 mx-2",children:"→"}),i.jsxs("span",{className:"font-semibold text-gray-900",children:["v",e.olderVersion]})]}),i.jsx("span",{className:"text-xs text-gray-500",children:s===0?"Latest change":`${s+1} version${s+1!==1?"s":""} ago`})]})}),i.jsx("div",{className:"bg-white relative",children:i.jsx("div",{dangerouslySetInnerHTML:{__html:e.diffHtml}})})]},`${e.newerVersion}-${e.olderVersion}`))}):i.jsx("div",{className:"bg-white border border-purple-200 rounded-lg p-8",children:i.jsxs("div",{className:"flex flex-col items-center text-center max-w-md mx-auto",children:[i.jsx("div",{className:"flex-shrink-0 mb-4",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),i.jsx("h4",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Upgrade to Scale"}),i.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Compare schema versions side-by-side with visual diffs. Track breaking changes, see exactly what changed between versions, and maintain better schema governance."}),i.jsxs("a",{href:"https://eventcatalog.cloud",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-white bg-purple-600 rounded-md hover:bg-purple-700 transition-colors",children:["Start 14-day free trial",i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})]})})]})}function Fn({isOpen:r,onOpenChange:t,diffs:n,messageName:e,apiAccessEnabled:s=!1}){return i.jsx(Be,{open:r,onOpenChange:t,children:i.jsxs(ze,{children:[i.jsx(Ve,{className:"fixed inset-0 bg-black/50 data-[state=open]:animate-overlayShow z-50"}),i.jsxs(We,{className:"fixed inset-4 md:inset-8 rounded-lg bg-white shadow-xl focus:outline-none data-[state=open]:animate-contentShow z-[100] flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 flex-shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(ue,{className:"h-6 w-6 text-gray-500"}),i.jsxs("div",{children:[i.jsx(Ue,{className:"text-xl font-semibold text-gray-900",children:"Version History"}),i.jsx(Ge,{className:"text-sm text-gray-600 mt-1",children:e})]})]}),i.jsx(ie,{asChild:!0,children:i.jsx("button",{type:"button",className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-md transition-colors","aria-label":"Close",children:i.jsx(Pe,{className:"h-6 w-6"})})})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:n.length>0?i.jsx(Et,{diffs:n,apiAccessEnabled:s}):i.jsx("div",{className:"flex items-center justify-center h-full",children:i.jsx("p",{className:"text-gray-500 text-center",children:"No version history available"})})}),i.jsx("div",{className:"flex justify-end p-4 border-t border-gray-200 flex-shrink-0",children:i.jsx(ie,{asChild:!0,children:i.jsx("button",{type:"button",className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors",children:"Close"})})})]})]})})}function An({isOpen:r,onOpenChange:t,message:n,onCopy:e,isCopied:s}){return n.schemaContent?i.jsx(Be,{open:r,onOpenChange:t,children:i.jsxs(ze,{children:[i.jsx(Ve,{className:"fixed inset-0 bg-black/50 data-[state=open]:animate-overlayShow z-50"}),i.jsxs(We,{className:"fixed inset-4 md:inset-8 rounded-lg bg-white shadow-xl focus:outline-none data-[state=open]:animate-contentShow z-[100] flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 flex-shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(ue,{className:"h-6 w-6 text-gray-500"}),i.jsxs("div",{children:[i.jsx(Ue,{className:"text-xl font-semibold text-gray-900",children:n.data.name}),i.jsxs(Ge,{className:"text-sm text-gray-600 mt-1",children:["v",n.data.version," · ",Oe(n.schemaExtension).toUpperCase()]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:e,className:"inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium text-gray-700 bg-white border border-gray-300 hover:bg-gray-50 rounded-md transition-colors",title:"Copy code",children:[i.jsx(be,{className:"h-4 w-4"}),s?"Copied!":"Copy"]}),i.jsx(ie,{asChild:!0,children:i.jsx("button",{type:"button",className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-md transition-colors","aria-label":"Close",children:i.jsx(Pe,{className:"h-6 w-6"})})})]})]}),i.jsx("div",{className:"flex-1 overflow-auto p-6",children:i.jsx(xt,{language:Oe(n.schemaExtension),style:vt.oneLight,customStyle:{margin:0,padding:"1rem",borderRadius:"0.5rem",fontSize:"0.875rem",lineHeight:"1.6",height:"100%"},className:"bg-white border border-gray-200 rounded-lg",showLineNumbers:!0,wrapLines:!0,wrapLongLines:!0,children:n.schemaContent})}),i.jsx("div",{className:"flex justify-end p-4 border-t border-gray-200 flex-shrink-0",children:i.jsx(ie,{asChild:!0,children:i.jsx("button",{type:"button",className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors",children:"Close"})})})]})]})}):null}function Pn({isOpen:r,onOpenChange:t,message:n,parsedSchema:e,parsedAvroSchema:s}){if(!e&&!s)return null;const l=!!s;return i.jsx(Be,{open:r,onOpenChange:t,children:i.jsxs(ze,{children:[i.jsx(Ve,{className:"fixed inset-0 bg-black/50 data-[state=open]:animate-overlayShow z-50"}),i.jsxs(We,{className:"fixed inset-4 md:inset-8 rounded-lg bg-white shadow-xl focus:outline-none data-[state=open]:animate-contentShow z-[100] flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 flex-shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(ue,{className:"h-6 w-6 text-gray-500"}),i.jsxs("div",{children:[i.jsx(Ue,{className:"text-xl font-semibold text-gray-900",children:n.data.name}),i.jsxs(Ge,{className:"text-sm text-gray-600 mt-1",children:["v",n.data.version," · ",l?"Avro":"JSON"," Schema"]})]})]}),i.jsx(ie,{asChild:!0,children:i.jsx("button",{type:"button",className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-md transition-colors","aria-label":"Close",children:i.jsx(Pe,{className:"h-6 w-6"})})})]}),i.jsx("div",{className:"flex-1 overflow-hidden p-6",children:l?i.jsx(wt,{schema:s,expand:!0,search:!0}):i.jsx(yt,{schema:e,expand:!0,search:!0})}),i.jsx("div",{className:"flex justify-end p-4 border-t border-gray-200 flex-shrink-0",children:i.jsx(ie,{asChild:!0,children:i.jsx("button",{type:"button",className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors",children:"Close"})})})]})]})})}function Yn({message:r,availableVersions:t,selectedVersion:n,onVersionChange:e,apiAccessEnabled:s=!1,showOwners:l=!0,showProducersConsumers:a=!0}){const[d,f]=W.useState(null),[m,g]=W.useState("code"),[v,C]=W.useState(!1),[c,u]=W.useState(!1),[p,x]=W.useState(!1),[N,k]=W.useState(!1),[j,L]=W.useState(!1),[S,O]=W.useState(!1),D=t.length>1,o=W.useMemo(()=>{const E=[];if(!D)return E;for(let I=0;I<t.length-1;I++){const B=t[I],z=t[I+1];if(B.schemaContent&&z.schemaContent){const P=Zt(`v${z.data.version}`,`v${B.data.version}`,z.schemaContent,B.schemaContent,"","",{context:3}),Z=On(P,{drawFileList:!1,matching:"lines",outputFormat:"side-by-side"});E.push({newerVersion:B.data.version,olderVersion:z.data.version,diffHtml:Z,newerContent:B.schemaContent,olderContent:z.schemaContent})}}return E},[t,D]),h=W.useMemo(()=>{if(!(r.schemaExtension?.toLowerCase()==="json"&&r.schemaContent&&r.schemaContent.trim()!==""))return null;try{const I=JSON.parse(r.schemaContent??"");return!I.properties&&!I.$schema&&!I.type?null:I}catch{return null}},[r.schemaContent,r.schemaExtension]),b=W.useMemo(()=>{const E=r.schemaExtension?.toLowerCase();if(!((E==="avro"||E==="avsc")&&r.schemaContent&&r.schemaContent.trim()!==""))return null;try{const B=JSON.parse(r.schemaContent??"");return B.type?B:null}catch{return null}},[r.schemaContent,r.schemaExtension]),T=async()=>{if(!r.schemaContent)return;await et(r.schemaContent)&&(f(r.data.id),setTimeout(()=>f(null),2e3))},$=async(E,I)=>{await et(E)&&(f(I),setTimeout(()=>f(null),2e3))},V=()=>{r.schemaContent&&Ft(r.schemaContent,r.data.id,r.schemaExtension||"json")},F=d===r.data.id;return i.jsxs("div",{className:"h-full flex flex-col bg-white overflow-hidden",children:[i.jsx(kn,{message:r,availableVersions:t,selectedVersion:n,onVersionChange:e,onCopy:T,onDownload:V,isCopied:F,schemaViewMode:m,onViewModeChange:g,hasParsedSchema:!!h||!!b,hasDiffs:o.length>0,diffCount:o.length}),i.jsx(Mn,{message:r,isExpanded:v,onToggle:()=>C(!v),onCopy:$,copiedId:d,apiAccessEnabled:s}),r.collection!=="services"&&a&&i.jsx(In,{message:r,isExpanded:p,onToggle:()=>x(!p)}),l&&i.jsx($n,{message:r,isExpanded:c,onToggle:()=>u(!c)}),i.jsx("div",{className:"flex-1 overflow-hidden",children:m==="diff"&&o.length>0?i.jsx(Et,{diffs:o,onOpenFullscreen:()=>k(!0),apiAccessEnabled:s}):i.jsx(Dn,{message:r,onCopy:T,isCopied:F,viewMode:m,parsedSchema:h,parsedAvroSchema:b,showRequired:!0,onOpenFullscreen:m==="code"?()=>L(!0):m==="schema"&&(h||b)?()=>O(!0):void 0})}),i.jsx(Fn,{isOpen:N,onOpenChange:k,diffs:o,messageName:r.data.name,apiAccessEnabled:s}),i.jsx(An,{isOpen:j,onOpenChange:L,message:r,onCopy:T,isCopied:F}),i.jsx(Pn,{isOpen:S,onOpenChange:O,message:r,parsedSchema:h,parsedAvroSchema:b})]})}export{Yn as S,Ke as g};
