import{j as e}from"./jsx-runtime.DCqPeNwG.js";import{R as B,r as n}from"./index.66AI1_x2.js";import{F as E}from"./DocumentTextIcon.CYz0cPkW.js";import{F as q,a as z}from"./CubeIcon.BBfv_05B.js";import{F as U,a as D}from"./UserIcon.BT0TRYmm.js";import{F as Q}from"./QueueListIcon.CFcY8mzd.js";import{a as C,b as W,c as Y,F as _}from"./ServerIcon.Bm0Sn4r6.js";import{F as H}from"./RectangleGroupIcon.DKuBn3vz.js";import"./_commonjsHelpers.Cpj98o6Y.js";const V=B.memo(({item:l,typeConfig:u,currentSearch:g})=>{const d=u[l.type]||u.other,F=(o=>o==="other"?"Page":o==="asyncapi"?"AsyncAPI":o==="openapi"?"OpenAPI":o==="language"?"Language":o==="entities"?"Entity":o==="queries"?"Query":o.endsWith("s")?o.charAt(0).toUpperCase()+o.slice(1,-1):o.charAt(0).toUpperCase()+o.slice(1))(l.type),a=d.icon;return e.jsx("a",{href:l.url,className:"block group",children:e.jsxs("div",{className:`bg-gradient-to-br ${d.bg} to-white border rounded-lg p-3 hover:border-purple-300 hover:shadow-md transition-all duration-200 group-hover:shadow-lg ${d.border}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 group-hover:text-purple-700 transition-colors",children:l.name}),e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium ${d.badgeBg} ${d.text} ${d.border} border`,children:[e.jsx(a,{className:"h-3 w-3"}),F]})]}),l.description&&e.jsx("div",{className:"text-xs text-gray-500 mb-2 line-clamp-2 opacity-80",children:g.trim()?e.jsx("span",{dangerouslySetInnerHTML:{__html:l.description}}):e.jsx("span",{children:l.description.replace(/<[^>]*>/g,"")})}),l.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:l.tags.map((o,m)=>e.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-md text-xs font-medium bg-gray-100 text-gray-700",children:o},m))})]})})}),G=B.memo(({results:l,typeConfig:u,currentSearch:g})=>e.jsx(e.Fragment,{children:l.map(d=>e.jsx(V,{item:d,typeConfig:u,currentSearch:g},d.id))})),ie=()=>{const[l,u]=n.useState(!1),[g,d]=n.useState(null),[L,F]=n.useState(!1),[a,o]=n.useState(""),[m,M]=n.useState("all"),[i,S]=n.useState([]),[v,R]=n.useState(!1),[y,T]=n.useState(!1);n.useEffect(()=>{const t=s=>{u(s.detail.isOpen)};return window.addEventListener("searchModalToggle",t),()=>window.removeEventListener("searchModalToggle",t)},[]);const N=()=>{window.searchModalState&&window.searchModalState.close()},p=n.useMemo(()=>({domains:{bg:"bg-orange-50/10",badgeBg:"bg-orange-500/20",text:"text-orange-800",border:"border-orange-200",icon:H},services:{bg:"bg-pink-50/10",badgeBg:"bg-pink-500/20",text:"text-pink-800",border:"border-pink-200",icon:_},events:{bg:"bg-orange-50/10",badgeBg:"bg-orange-500/20",text:"text-orange-800",border:"border-orange-200",icon:Y},commands:{bg:"bg-blue-50/10",badgeBg:"bg-blue-500/20",text:"text-blue-800",border:"border-blue-200",icon:W},queries:{bg:"bg-green-50/10",badgeBg:"bg-green-500/20",text:"text-green-800",border:"border-green-200",icon:C},entities:{bg:"bg-purple-50/10",badgeBg:"bg-purple-500/20",text:"text-purple-800",border:"border-purple-200",icon:z},channels:{bg:"bg-indigo-50/10",badgeBg:"bg-indigo-500/20",text:"text-indigo-800",border:"border-indigo-200",icon:Q},teams:{bg:"bg-teal-50/10",badgeBg:"bg-teal-500/20",text:"text-teal-800",border:"border-teal-200",icon:D},users:{bg:"bg-cyan-50/10",badgeBg:"bg-cyan-500/20",text:"text-cyan-800",border:"border-cyan-200",icon:U},language:{bg:"bg-amber-50/10",badgeBg:"bg-amber-500/20",text:"text-amber-800",border:"border-amber-200",icon:q},openapi:{bg:"bg-emerald-50/10",badgeBg:"bg-emerald-500/20",text:"text-emerald-800",border:"border-emerald-200",icon:E},asyncapi:{bg:"bg-violet-50/10",badgeBg:"bg-violet-500/20",text:"text-violet-800",border:"border-violet-200",icon:E},other:{bg:"bg-gray-50/10",badgeBg:"bg-gray-500/20",text:"text-gray-800",border:"border-gray-200",icon:E}}),[]);n.useEffect(()=>{typeof window<"u"&&(async()=>{try{const c=await new Promise((r,x)=>{if(window.pagefind)r(window.pagefind);else{const b=()=>{window.removeEventListener("pagefindLoaded",b),r(window.pagefind)},j=setTimeout(()=>{window.removeEventListener("pagefindLoaded",b),x(new Error("Pagefind failed to load - catalog may not be indexed"))},2e3);window.addEventListener("pagefindLoaded",()=>{clearTimeout(j),b()})}});await c.init(),d(c)}catch(s){console.error("Failed to initialize Pagefind:",s),F(!0)}})()},[]);const P=n.useCallback(t=>t.includes("/language/")?"language":t.includes("/spec/")?"openapi":t.includes("/asyncapi")?"asyncapi":t.includes("/domains/")?"domains":t.includes("/services/")?"services":t.includes("/events/")?"events":t.includes("/commands/")?"commands":t.includes("/queries/")?"queries":t.includes("/entities/")?"entities":t.includes("/channels/")?"channels":t.includes("/teams/")?"teams":t.includes("/users/")?"users":"other",[]),k=n.useCallback(async t=>{if(!g||!t.trim())return[];R(!0);try{const s=await g.debouncedSearch(t);if(!s||!s.results)return[];const c=[];for(const r of s.results){const x=await r.data(),b=P(x.url);let j=x.meta?.title||"Untitled";j=j.replace(/^(Domains?|Services?|Events?|Commands?|Queries?|Entities?|Channels?|Teams?|Users?|Language) \| /,""),c.push({id:r.id,name:j,type:b,description:x.excerpt||"",url:x.url,tags:x.meta?.tags?x.meta.tags.split(",").map(O=>O.trim()):[]})}return c}catch(s){return console.error("Search error:",s),[]}finally{R(!1)}},[g]),I=n.useCallback((t,s)=>{let c=t;return s!=="all"&&(c=c.filter(r=>r.type===s)),y&&a.trim()&&(c=c.filter(r=>r.name.toLowerCase().includes(a.toLowerCase()))),c},[y,a]),$=n.useCallback(async()=>{if(a.trim()){const t=await k(a);S(t)}else S([])},[a,k]);n.useEffect(()=>{if(!a.trim()){S([]);return}const t=setTimeout(()=>{$()},300);return()=>clearTimeout(t)},[a,$]);const A=t=>{o(t.target.value)},h=t=>{M(t)},w=n.useMemo(()=>I(i,m),[i,m,y,a]),f=n.useMemo(()=>({all:i.length,domains:i.filter(t=>t.type==="domains").length,services:i.filter(t=>t.type==="services").length,events:i.filter(t=>t.type==="events").length,commands:i.filter(t=>t.type==="commands").length,queries:i.filter(t=>t.type==="queries").length,entities:i.filter(t=>t.type==="entities").length,channels:i.filter(t=>t.type==="channels").length,teams:i.filter(t=>t.type==="teams").length,users:i.filter(t=>t.type==="users").length,language:i.filter(t=>t.type==="language").length,openapi:i.filter(t=>t.type==="openapi").length,asyncapi:i.filter(t=>t.type==="asyncapi").length}),[i]);return n.useEffect(()=>{const t=s=>{s.key==="Escape"&&N()};if(l)return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[l,N]),l?e.jsxs("div",{children:[e.jsx("style",{children:`
        .search-results mark {
          background-color: #fef3c7;
          color: #92400e;
          padding: 0.125rem 0.25rem;
          border-radius: 0.25rem;
          font-weight: 500;
        }
      `}),e.jsxs("div",{className:"fixed inset-0 z-[9999] overflow-y-auto",role:"dialog","aria-modal":"true",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-25 transition-opacity backdrop-blur-sm bg-black/10 z-[9998]",onClick:N}),e.jsx("div",{className:"fixed inset-0 z-[10000] w-screen overflow-y-auto p-4 sm:p-6 md:p-10",onClick:N,children:e.jsx("div",{className:"mx-auto max-w-6xl divide-y divide-gray-100 overflow-hidden rounded-xl bg-white shadow-2xl ring-1 ring-black ring-opacity-5 transition-all",onClick:t=>t.stopPropagation(),children:L?e.jsx("div",{className:"flex items-center justify-center py-10 px-8",children:e.jsxs("div",{className:"text-left max-w-lg",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Search Index Not Found"}),e.jsx("p",{className:"text-gray-600 mb-8 leading-relaxed text-sm",children:"Your EventCatalog needs to be built to generate the search index. This enables fast searching across all your domains, services, events, and documentation."})]}),e.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 rounded-xl p-6 mb-6 border border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center justify-center",children:[e.jsx("svg",{className:"h-5 w-5 text-green-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Build Your Catalog"]}),e.jsx("div",{className:"bg-gray-900 rounded-lg p-4 mb-4",children:e.jsx("code",{className:"text-green-400 font-mono text-sm",children:"npm run build"})}),e.jsx("p",{className:"text-sm text-gray-600",children:"This will generate your catalog and create the search index"})]}),e.jsxs("div",{className:"flex items-start text-left bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsx("svg",{className:"h-5 w-5 text-blue-600 mr-3 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-1",children:"Need to update search results?"}),e.jsxs("p",{className:"text-sm text-blue-700",children:["Run ",e.jsx("code",{className:"bg-blue-100 px-1 py-0.5 rounded text-xs font-mono",children:"npm run build"})," again after making changes to your catalog content."]})]})]})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative px-6 pt-4 pb-2",children:[e.jsx(C,{className:"pointer-events-none absolute left-10 top-[25px] h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search for domains, services, events...",className:"w-full border border-gray-200 rounded-lg bg-white pl-12 pr-4 py-2 text-gray-900 placeholder:text-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm",value:a,onChange:A,autoFocus:!0})]}),e.jsxs("div",{className:"flex h-[500px]",children:[e.jsxs("div",{className:"w-56 p-3 border-r border-gray-200 bg-gray-50 overflow-y-auto",children:[e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"space-y-1",children:e.jsx("button",{className:`w-full px-2 py-1 text-xs rounded-md transition-colors ${m==="all"?"bg-purple-200 text-purple-900 font-semibold":"hover:bg-purple-100 text-gray-700 hover:text-purple-800"}`,onClick:()=>h("all"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-1.5",children:e.jsx("span",{children:"All Resources"})}),e.jsx("span",{className:"text-xs text-gray-700 font-thin",children:f.all})]})})})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-xs font-bold text-gray-600 mb-2",children:"Resources"}),e.jsx("div",{className:"space-y-1",children:Object.entries({domains:"Domains",services:"Services",entities:"Entities",language:"Ubiquitous Language"}).map(([t,s])=>{const r=p[t]?.icon;return e.jsx("button",{className:`w-full px-2 py-1 text-xs rounded-md transition-colors ${m===t?"bg-purple-200 text-purple-900 font-semibold":"hover:bg-purple-100 text-gray-700 hover:text-purple-800"}`,onClick:()=>h(t),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[r&&e.jsx(r,{className:"h-3 w-3"}),e.jsx("span",{className:"font-thin",children:s})]}),e.jsx("span",{className:"text-xs text-gray-700 font-thin",children:f[t]})]})},t)})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-xs font-bold text-gray-600 mb-2",children:"Messages"}),e.jsx("div",{className:"space-y-1",children:Object.entries({events:"Events",commands:"Commands",queries:"Queries",channels:"Channels"}).map(([t,s])=>{const r=p[t]?.icon;return e.jsx("button",{className:`w-full px-2 py-1 text-xs rounded-md transition-colors ${m===t?"bg-purple-200 text-purple-900 font-semibold":"hover:bg-purple-100 text-gray-700 hover:text-purple-800"}`,onClick:()=>h(t),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[r&&e.jsx(r,{className:"h-3 w-3"}),e.jsx("span",{className:"font-thin",children:s})]}),e.jsx("span",{className:"text-xs text-gray-700 font-thin",children:f[t]})]})},t)})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-xs font-bold text-gray-600 mb-2",children:"Organization"}),e.jsx("div",{className:"space-y-1",children:Object.entries({teams:"Teams",users:"Users"}).map(([t,s])=>{const r=p[t]?.icon;return e.jsx("button",{className:`w-full px-2 py-1 text-xs rounded-md transition-colors ${m===t?"bg-purple-200 text-purple-900 font-semibold":"hover:bg-purple-100 text-gray-700 hover:text-purple-800"}`,onClick:()=>h(t),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[r&&e.jsx(r,{className:"h-3 w-3"}),e.jsx("span",{className:"font-thin",children:s})]}),e.jsx("span",{className:"text-xs text-gray-700 font-thin",children:f[t]})]})},t)})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-xs font-bold text-gray-600 mb-2",children:"Specifications"}),e.jsx("div",{className:"space-y-1",children:Object.entries({openapi:"OpenAPI Specification",asyncapi:"AsyncAPI Specification"}).map(([t,s])=>{const r=p[t].icon;return e.jsx("button",{className:`w-full px-2 py-1 text-xs rounded-md transition-colors ${m===t?"bg-purple-200 text-purple-900 font-semibold":"hover:bg-purple-100 text-gray-700 hover:text-purple-800"}`,onClick:()=>h(t),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(r,{className:"h-3 w-3"}),e.jsx("span",{className:"font-thin",children:s})]}),e.jsx("span",{className:"text-xs text-gray-700 font-thin",children:f[t]})]})},t)})})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[a.trim()&&(w.length>0||v)&&e.jsxs("div",{className:"p-4 pb-2 flex items-center justify-between border-b border-gray-100",children:[e.jsxs("div",{className:"text-sm text-gray-500 font-thin",children:[e.jsxs("span",{children:[w.length," results"]}),' for "',a,'"',v&&e.jsx("span",{className:"ml-2",children:"Loading..."})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"exact-match-results",type:"checkbox",checked:y,onChange:t=>T(t.target.checked),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"exact-match-results",className:"ml-2 text-sm text-gray-600",children:"Exact match in title"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:a.trim()?w.length===0&&!v?e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(C,{className:"mx-auto h-8 w-8 text-gray-300"}),e.jsx("h3",{className:"mt-2 text-sm font-bold text-gray-900",children:"No results found"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-500 font-thin",children:['No results found for "',e.jsx("span",{className:"font-medium",children:a}),'".']})]})}):v?e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"}),e.jsx("h3",{className:"mt-4 text-sm font-medium text-gray-900",children:"Searching..."}),e.jsxs("p",{className:"mt-2 text-sm text-gray-500 font-thin",children:['Finding results for "',e.jsx("span",{className:"font-medium",children:a}),'"']})]})}):e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"search-results grid grid-cols-1 lg:grid-cols-2 gap-3",children:e.jsx(G,{results:w,typeConfig:p,currentSearch:a})})}):e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(C,{className:"mx-auto h-8 w-8 text-gray-300"}),e.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"Discover your EventCatalog"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500 font-thin",children:"Start typing to search for domains, services, events, and more."})]})})})]})]})]})})})]})]}):null};export{ie as default};
