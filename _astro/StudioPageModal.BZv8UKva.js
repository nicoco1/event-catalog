import{j as e}from"./jsx-runtime.DCqPeNwG.js";import{r as s}from"./index.66AI1_x2.js";import{R as h,P as y,O as f,C as b,T as j,D as w,a as C}from"./index.CW_7X3uJ.js";import{L as v}from"./loader-circle.DWPDv1y3.js";import{C as N,a as S}from"./clipboard.DoXN61Vo.js";import{E}from"./external-link.Cc5NOFPQ.js";import"./_commonjsHelpers.Cpj98o6Y.js";import"./index.DTNPTf-c.js";import"./index.BXXhdAF5.js";import"./createLucideIcon.BukmfUhN.js";const M=()=>{const[m,a]=s.useState(!1),[o,n]=s.useState(!1),[l,u]=s.useState(!1),[r,i]=s.useState(!1),[c,d]=s.useState(null);s.useEffect(()=>{const t=()=>a(!0);return window.addEventListener("openStudioModal",t),()=>window.removeEventListener("openStudioModal",t)},[]);const x=async()=>{i(!0),d(null);try{const t=await fetch("/api/catalog");if(!t.ok)throw new Error("Failed to fetch catalog data");const g=await t.json();await navigator.clipboard.writeText(JSON.stringify(g,null,2)),n(!0),u(!0),setTimeout(()=>n(!1),2e3)}catch(t){console.error("Failed to copy resources:",t),d("Failed to copy resources. Please try again.")}finally{i(!1)}},p=()=>{window.open("https://app.eventcatalog.studio/playground?import-resources=true&utm_source=eventcatalog&utm_medium=referral&utm_campaign=studio-page","_blank"),a(!1)};return e.jsx(h,{open:m,onOpenChange:a,children:e.jsxs(y,{children:[e.jsx(f,{className:"fixed inset-0 bg-black/50 data-[state=open]:animate-overlayShow z-50"}),e.jsxs(b,{className:"fixed top-1/2 left-1/2 w-[90vw] max-w-md -translate-x-1/2 -translate-y-1/2 rounded-lg bg-white p-6 shadow-xl focus:outline-none data-[state=open]:animate-contentShow z-[100]",children:[e.jsx(j,{className:"text-lg font-semibold text-gray-900 mb-3",children:"Open EventCatalog Studio"}),e.jsxs(w,{className:"text-sm text-gray-600 mb-6",children:["Import your catalog resources into"," ",e.jsx("a",{href:"https://eventcatalog.studio",className:"text-gray-900 hover:text-gray-700 underline font-semibold",target:"_blank",rel:"noopener noreferrer",children:"EventCatalog Studio"})," ","to create architecture diagrams."]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-900 mb-2",children:"Step 1: Copy your resources"}),e.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Copy your EventCatalog resources to your clipboard."}),e.jsx("button",{onClick:x,disabled:r,className:`w-full flex items-center justify-center space-x-2 px-4 py-2 text-sm font-medium rounded-md border transition-colors ${o?"bg-green-50 border-green-200 text-green-700":r?"bg-gray-100 border-gray-300 text-gray-400 cursor-not-allowed":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:r?e.jsxs(e.Fragment,{children:[e.jsx(v,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"Loading resources..."})]}):o?e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"w-4 h-4"}),e.jsx("span",{children:"Copied!"})]}):e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"w-4 h-4"}),e.jsx("span",{children:"Copy resources to clipboard"})]})}),c&&e.jsx("p",{className:"text-xs text-red-600 mt-2",children:c})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-900 mb-2",children:"Step 2: Open EventCatalog Studio"}),e.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"Go to EventCatalog Studio and paste your resources into the modal dialog."}),e.jsxs("button",{onClick:p,disabled:!l,className:`w-full flex items-center justify-center space-x-2 px-4 py-2 text-sm font-medium rounded-md transition-colors ${l?"bg-gray-900 text-white hover:bg-gray-800":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[e.jsx(E,{className:"w-4 h-4"}),e.jsx("span",{children:"Open EventCatalog Studio"})]}),e.jsx("p",{className:"text-[12px] text-gray-500 italic mt-4 mb-0",children:"All data is stored locally in your browser. Nothing is sent to external servers."})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx(C,{asChild:!0,children:e.jsx("button",{type:"button",className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors",onClick:()=>a(!1),children:"Close"})})})]})]})})};export{M as default};
