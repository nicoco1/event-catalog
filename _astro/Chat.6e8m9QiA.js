import{j as f}from"./jsx-runtime.DCqPeNwG.js";import{r as k,R as Ue}from"./index.66AI1_x2.js";import{R as Qt,b as Ks,P as Gt,O as Kt,C as Xt,T as er,a as tr,D as Xs}from"./index.CW_7X3uJ.js";import{W as En,i as ea,C as ta,F as ra,X as na,S as sa}from"./lucide-react.0ungtBZm.js";import{s as rr,k as aa,w as oa,o as $e,V as In,l as ia,m as ca,n as ua,p as la,u as da,r as fa,q as ha,t as pa,v as ma,x as ga,y as j}from"./index.njDnTKDv.js";import{g as Tn}from"./_commonjsHelpers.Cpj98o6Y.js";import{C as gr,a as yr}from"./clipboard.DoXN61Vo.js";import{h as ut}from"./prism.CvWiTcRG.js";import{C as vr}from"./chevron-right.D4ifzUqr.js";import{C as br}from"./chevron-down.CdffG64G.js";import"./index.DTNPTf-c.js";import"./index.BXXhdAF5.js";import"./createLucideIcon.BukmfUhN.js";import"./database.Bx4WLkcY.js";import"./box.Dpj119uS.js";import"./square-pen.DcpjThHI.js";import"./external-link.Cc5NOFPQ.js";import"./history.BrJFi3lo.js";import"./loader-circle.DWPDv1y3.js";import"./panel-left.CnGaY6NH.js";import"./users.CMrsoqVr.js";const ya={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Cn=6048e5,va=864e5,wr=Symbol.for("constructDateFrom");function pe(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&wr in e?e[wr](t):e instanceof Date?new e.constructor(t):new Date(t)}function oe(e,t){return pe(t||e,e)}let ba={};function wt(){return ba}function We(e,t){const r=wt(),n=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,s=oe(e,t?.in),a=s.getDay(),i=(a<n?7:0)+a-n;return s.setDate(s.getDate()-i),s.setHours(0,0,0,0),s}function lt(e,t){return We(e,{...t,weekStartsOn:1})}function On(e,t){const r=oe(e,t?.in),n=r.getFullYear(),s=pe(r,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const a=lt(s),i=pe(r,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const o=lt(i);return r.getTime()>=a.getTime()?n+1:r.getTime()>=o.getTime()?n:n-1}function xr(e){const t=oe(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function wa(e,...t){const r=pe.bind(null,t.find(n=>typeof n=="object"));return t.map(r)}function _r(e,t){const r=oe(e,t?.in);return r.setHours(0,0,0,0),r}function xa(e,t,r){const[n,s]=wa(r?.in,e,t),a=_r(n),i=_r(s),o=+a-xr(a),l=+i-xr(i);return Math.round((o-l)/va)}function _a(e,t){const r=On(e,t),n=pe(e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),lt(n)}function Sa(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function ka(e){return!(!Sa(e)&&typeof e!="number"||isNaN(+oe(e)))}function Ea(e,t){const r=oe(e,t?.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}const Ia={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Ta=(e,t,r)=>{let n;const s=Ia[e];return typeof s=="string"?n=s:t===1?n=s.one:n=s.other.replace("{{count}}",t.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Ct(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const Ca={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Oa={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Pa={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ja={date:Ct({formats:Ca,defaultWidth:"full"}),time:Ct({formats:Oa,defaultWidth:"full"}),dateTime:Ct({formats:Pa,defaultWidth:"full"})},Na={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Ma=(e,t,r,n)=>Na[e];function Pe(e){return(t,r)=>{const n=r?.context?String(r.context):"standalone";let s;if(n==="formatting"&&e.formattingValues){const i=e.defaultFormattingWidth||e.defaultWidth,o=r?.width?String(r.width):i;s=e.formattingValues[o]||e.formattingValues[i]}else{const i=e.defaultWidth,o=r?.width?String(r.width):e.defaultWidth;s=e.values[o]||e.values[i]}const a=e.argumentCallback?e.argumentCallback(t):t;return s[a]}}const za={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Aa={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},$a={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Ra={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Da={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Za={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Fa=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},La={ordinalNumber:Fa,era:Pe({values:za,defaultWidth:"wide"}),quarter:Pe({values:Aa,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Pe({values:$a,defaultWidth:"wide"}),day:Pe({values:Ra,defaultWidth:"wide"}),dayPeriod:Pe({values:Da,defaultWidth:"wide",formattingValues:Za,defaultFormattingWidth:"wide"})};function je(e){return(t,r={})=>{const n=r.width,s=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],a=t.match(s);if(!a)return null;const i=a[0],o=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?Wa(o,d=>d.test(i)):Ua(o,d=>d.test(i));let u;u=e.valueCallback?e.valueCallback(l):l,u=r.valueCallback?r.valueCallback(u):u;const c=t.slice(i.length);return{value:u,rest:c}}}function Ua(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function Wa(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function qa(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const s=n[0],a=t.match(e.parsePattern);if(!a)return null;let i=e.valueCallback?e.valueCallback(a[0]):a[0];i=r.valueCallback?r.valueCallback(i):i;const o=t.slice(s.length);return{value:i,rest:o}}}const Va=/^(\d+)(th|st|nd|rd)?/i,Ba=/\d+/i,Ja={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Ha={any:[/^b/i,/^(a|c)/i]},Ya={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Qa={any:[/1/i,/2/i,/3/i,/4/i]},Ga={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Ka={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Xa={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},eo={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},to={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ro={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},no={ordinalNumber:qa({matchPattern:Va,parsePattern:Ba,valueCallback:e=>parseInt(e,10)}),era:je({matchPatterns:Ja,defaultMatchWidth:"wide",parsePatterns:Ha,defaultParseWidth:"any"}),quarter:je({matchPatterns:Ya,defaultMatchWidth:"wide",parsePatterns:Qa,defaultParseWidth:"any",valueCallback:e=>e+1}),month:je({matchPatterns:Ga,defaultMatchWidth:"wide",parsePatterns:Ka,defaultParseWidth:"any"}),day:je({matchPatterns:Xa,defaultMatchWidth:"wide",parsePatterns:eo,defaultParseWidth:"any"}),dayPeriod:je({matchPatterns:to,defaultMatchWidth:"any",parsePatterns:ro,defaultParseWidth:"any"})},so={code:"en-US",formatDistance:Ta,formatLong:ja,formatRelative:Ma,localize:La,match:no,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ao(e,t){const r=oe(e,t?.in);return xa(r,Ea(r))+1}function oo(e,t){const r=oe(e,t?.in),n=+lt(r)-+_a(r);return Math.round(n/Cn)+1}function Pn(e,t){const r=oe(e,t?.in),n=r.getFullYear(),s=wt(),a=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,i=pe(t?.in||e,0);i.setFullYear(n+1,0,a),i.setHours(0,0,0,0);const o=We(i,t),l=pe(t?.in||e,0);l.setFullYear(n,0,a),l.setHours(0,0,0,0);const u=We(l,t);return+r>=+o?n+1:+r>=+u?n:n-1}function io(e,t){const r=wt(),n=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,s=Pn(e,t),a=pe(t?.in||e,0);return a.setFullYear(s,0,n),a.setHours(0,0,0,0),We(a,t)}function co(e,t){const r=oe(e,t?.in),n=+We(r,t)-+io(r,t);return Math.round(n/Cn)+1}function $(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const fe={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return $(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):$(r+1,2)},d(e,t){return $(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return $(e.getHours()%12||12,t.length)},H(e,t){return $(e.getHours(),t.length)},m(e,t){return $(e.getMinutes(),t.length)},s(e,t){return $(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return $(s,t.length)}},Se={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Sr={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return fe.y(e,t)},Y:function(e,t,r,n){const s=Pn(e,n),a=s>0?s:1-s;if(t==="YY"){const i=a%100;return $(i,2)}return t==="Yo"?r.ordinalNumber(a,{unit:"year"}):$(a,t.length)},R:function(e,t){const r=On(e);return $(r,t.length)},u:function(e,t){const r=e.getFullYear();return $(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return $(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return $(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return fe.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return $(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const s=co(e,n);return t==="wo"?r.ordinalNumber(s,{unit:"week"}):$(s,t.length)},I:function(e,t,r){const n=oo(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):$(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):fe.d(e,t)},D:function(e,t,r){const n=ao(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):$(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const s=e.getDay(),a=(s-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return $(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const s=e.getDay(),a=(s-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return $(a,t.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),s=n===0?7:n;switch(t){case"i":return String(s);case"ii":return $(s,t.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let s;switch(n===12?s=Se.noon:n===0?s=Se.midnight:s=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let s;switch(n>=17?s=Se.evening:n>=12?s=Se.afternoon:n>=4?s=Se.morning:s=Se.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return fe.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):fe.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):$(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):$(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):fe.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):fe.s(e,t)},S:function(e,t){return fe.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return Er(n);case"XXXX":case"XX":return be(n);case"XXXXX":case"XXX":default:return be(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return Er(n);case"xxxx":case"xx":return be(n);case"xxxxx":case"xxx":default:return be(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+kr(n,":");case"OOOO":default:return"GMT"+be(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+kr(n,":");case"zzzz":default:return"GMT"+be(n,":")}},t:function(e,t,r){const n=Math.trunc(+e/1e3);return $(n,t.length)},T:function(e,t,r){return $(+e,t.length)}};function kr(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=Math.trunc(n/60),a=n%60;return a===0?r+String(s):r+String(s)+t+$(a,2)}function Er(e,t){return e%60===0?(e>0?"-":"+")+$(Math.abs(e)/60,2):be(e,t)}function be(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=$(Math.trunc(n/60),2),a=$(n%60,2);return r+s+t+a}const Ir=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},jn=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},uo=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return Ir(e,t);let a;switch(n){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;case"PPPP":default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",Ir(n,t)).replace("{{time}}",jn(s,t))},lo={p:jn,P:uo},fo=/^D+$/,ho=/^Y+$/,po=["D","DD","YY","YYYY"];function mo(e){return fo.test(e)}function go(e){return ho.test(e)}function yo(e,t,r){const n=vo(e,t,r);if(console.warn(n),po.includes(e))throw new RangeError(n)}function vo(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const bo=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,wo=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,xo=/^'([^]*?)'?$/,_o=/''/g,So=/[a-zA-Z]/;function ko(e,t,r){const n=wt(),s=n.locale??so,a=n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,i=n.weekStartsOn??n.locale?.options?.weekStartsOn??0,o=oe(e,r?.in);if(!ka(o))throw new RangeError("Invalid time value");let l=t.match(wo).map(c=>{const d=c[0];if(d==="p"||d==="P"){const v=lo[d];return v(c,s.formatLong)}return c}).join("").match(bo).map(c=>{if(c==="''")return{isToken:!1,value:"'"};const d=c[0];if(d==="'")return{isToken:!1,value:Eo(c)};if(Sr[d])return{isToken:!0,value:c};if(d.match(So))throw new RangeError("Format string contains an unescaped latin alphabet character `"+d+"`");return{isToken:!1,value:c}});s.localize.preprocessor&&(l=s.localize.preprocessor(o,l));const u={firstWeekContainsDate:a,weekStartsOn:i,locale:s};return l.map(c=>{if(!c.isToken)return c.value;const d=c.value;(go(d)||mo(d))&&yo(d,t,String(e));const v=Sr[d[0]];return v(o,d,s.localize,u)}).join("")}function Eo(e){const t=e.match(xo);return t?t[1].replace(_o,"'"):e}const Nn=k.createContext(void 0),Ne="chat_sessions";function Io({children:e}){const[t,r]=k.useState(()=>{if(typeof window<"u"){const d=localStorage.getItem(Ne);return d?JSON.parse(d):[]}return[]}),[n,s]=k.useState(null),[a,i]=k.useState(!1),o=()=>{const d={id:crypto.randomUUID(),title:`Chat ${t.length+1}`,messages:[],lastUpdated:Date.now(),createdAt:Date.now()};r(v=>{const h=[d,...v];return localStorage.setItem(Ne,JSON.stringify(h)),h}),s(d)},l=d=>{r(v=>{const h=v.findIndex(m=>m.id===d.id);if(h===-1)return v;const p=[...v];return p[h]={...d,lastUpdated:Date.now()},localStorage.setItem(Ne,JSON.stringify(p)),p})},u=d=>{r(v=>{const h=v.filter(p=>p.id!==d);return localStorage.setItem(Ne,JSON.stringify(h)),h}),n?.id===d&&s(null)},c=(d,v)=>{r(h=>{const p=h.findIndex(y=>y.id===d);if(p===-1)return h;const m=[...h];return m[p].messages=v,m[p].lastUpdated=Date.now(),localStorage.setItem(Ne,JSON.stringify(m)),m})};return k.useEffect(()=>{t.length>0?s(t[0]):o()},[]),f.jsx(Nn.Provider,{value:{sessions:t,currentSession:n,createSession:o,updateSession:l,deleteSession:u,setCurrentSession:s,isStreaming:a,setIsStreaming:i,storeMessagesToSession:c},children:e})}function Mn(){const e=k.useContext(Nn);if(e===void 0)throw new Error("useChat must be used within a ChatProvider");return e}const To=()=>{const{sessions:e=[],currentSession:t,createSession:r,deleteSession:n,setCurrentSession:s,isStreaming:a}=Mn(),[i,o]=Ue.useState(!1);return k.useEffect(()=>{const l=localStorage.getItem("eventCatalogAIVisited");(!l||l==="false")&&(localStorage.setItem("eventCatalogAIVisited","true"),o(!0))},[]),k.useEffect(()=>{e.length===0&&r()},[e]),f.jsx("div",{className:"h-[calc(100vh-64px)] bg-gray-50 flex-shrink-0 border-r border-gray-200",children:f.jsxs("div",{className:"w-64 bg-gray-50 border-r border-gray-200 flex flex-col h-full",children:[f.jsx("div",{className:"p-4 border-b border-gray-200",children:f.jsx("div",{className:"flex items-center justify-between gap-2",children:f.jsxs("button",{onClick:r,disabled:a,className:`flex-1 flex items-center justify-between px-3 py-2 text-sm bg-white hover:bg-gray-100 rounded-lg border border-gray-200 text-gray-700 ${a?"opacity-50 cursor-not-allowed":""}`,children:[f.jsx("span",{children:"New chat"}),f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})})]})})}),f.jsx("div",{className:"flex-1 overflow-y-auto",children:f.jsxs("div",{className:"p-2 space-y-2",children:[f.jsx("div",{className:"text-xs text-gray-500 px-2 py-1",children:"Your chats"}),f.jsx("div",{className:"space-y-1",children:e.map(l=>f.jsxs("div",{className:`group relative flex flex-col ${t?.id===l.id?"bg-gray-100":"hover:bg-gray-50"} rounded-lg`,children:[f.jsx("button",{onClick:u=>n(l.id),disabled:a,className:`absolute right-1 top-1 p-1.5 opacity-0 group-hover:opacity-100 transition-opacity duration-200 text-gray-400 hover:text-gray-600 ${t?.id===l.id?"opacity-100":""} ${a?"opacity-50 cursor-not-allowed":""}`,title:"Delete chat",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})}),f.jsxs("button",{onClick:()=>s(l),disabled:a,className:`flex-1 text-left px-3 py-2 text-sm ${a?"opacity-50 cursor-not-allowed":""}`,children:[f.jsx("div",{className:"font-medium text-gray-700 pr-7",children:l.title}),f.jsxs("div",{className:"flex justify-between items-center mt-1 text-xs text-gray-400",children:[f.jsxs("span",{children:[l.messages.length," messages"]}),f.jsx("span",{children:ko(l.lastUpdated,"dd/MM/yyyy, HH:mm:ss")})]})]})]},l.id))})]})}),f.jsx("div",{className:"p-4 text-xs text-gray-500 border-t border-gray-200",children:f.jsxs("div",{children:["Have issues or ideas? Let us know on"," ",f.jsx("a",{href:"https://discord.com/channels/918092420338569216/1342473496957288581",className:"text-blue-600 hover:text-blue-800 underline",target:"_blank",rel:"noopener noreferrer",children:"Discord"}),f.jsx("div",{className:"inline-block",children:f.jsxs(Qt,{open:i,onOpenChange:o,children:[f.jsx(Ks,{asChild:!0,children:f.jsx("button",{title:"Help",className:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})})})}),f.jsxs(Gt,{children:[f.jsx(Kt,{className:"fixed inset-0 bg-black/50 z-40"}),f.jsxs(Xt,{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white rounded-lg z-50 p-6 w-[600px] max-h-[85vh] overflow-y-auto",children:[f.jsx(er,{className:"text-lg font-semibold text-gray-900 mb-4",children:"Welcome to the EventCatalog AI Assistant"}),f.jsxs("div",{className:"text-sm text-gray-600 space-y-4",children:[f.jsx("p",{children:"This is your private AI assistant for EventCatalog. All conversations are stored locally and your data remains completely private."}),f.jsx("p",{children:"Key features:"}),f.jsxs("ul",{className:"list-disc pl-4 space-y-2",children:[f.jsx("li",{children:"Local-first: All conversations are stored on your device only"}),f.jsx("li",{children:"Privacy-focused: Your data is never shared with external servers"}),f.jsx("li",{children:"Persistent chat history: Access your previous conversations anytime"}),f.jsx("li",{children:"Multiple sessions: Organize different topics in separate chats"})]}),f.jsxs("div",{className:"mt-6",children:[f.jsx("p",{className:"font-medium mb-2",children:"Example prompts you can try:"}),f.jsxs("ul",{className:"list-disc pl-4 space-y-2 bg-gray-50 p-4 rounded-lg",children:[f.jsx("li",{children:'"I want to create a new feature, what events do we have related to Payments?"'}),f.jsx("li",{children:'"What domains do we have and who owns them?"'}),f.jsx("li",{children:'"What are the events for the X domain?"'}),f.jsx("li",{children:'"Create me a code snippet for this event"'})]})]}),f.jsx("p",{className:"mt-4",children:"For additional support or feature requests, please join our Discord community."})]}),f.jsx(tr,{asChild:!0,children:f.jsx("button",{className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600","aria-label":"Close",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})})]})]})]})})]})})]})})},Co=({suggestions:e,trigger:t="@",onChange:r,value:n,...s})=>{const[a,i]=k.useState(!1),[o,l]=k.useState([]),[u,c]=k.useState(0),[d,v]=k.useState(""),h=k.useRef(null),p=k.useRef(null),m=k.useCallback((w,g)=>{if(g===null){i(!1);return}let I=-1;for(let T=g-1;T>=0;T--){const C=w[T];if(C===t){I=T;break}if(/\s/.test(C))break}if(I!==-1){const T=w.substring(I+1,g).toLowerCase();v(T);const C=e.filter(O=>O.name.toLowerCase().includes(T));l(C),c(0),i(!0)}else i(!1)},[e,t]),y=w=>{const g=w.target.value;r(g),m(g,w.target.selectionStart)},x=w=>{if(h.current){const g=h.current.selectionStart;if(g!==null){let I=-1;for(let T=g-1;T>=0;T--){if(n[T]===t){I=T;break}if(/\s/.test(n[T]))break}if(I!==-1){const T=n.substring(0,I)+w.name+" "+n.substring(g);r(T),i(!1),setTimeout(()=>{if(h.current){h.current.focus();const C=I+w.name.length+1;h.current.setSelectionRange(C,C)}},0)}else r(n+w.name+" "),i(!1),h.current.focus()}}},_=w=>{a&&o.length>0&&(w.key==="ArrowDown"?(w.preventDefault(),c(g=>(g+1)%o.length)):w.key==="ArrowUp"?(w.preventDefault(),c(g=>(g-1+o.length)%o.length)):w.key==="Enter"||w.key==="Tab"?(w.preventDefault(),x(o[u])):w.key==="Escape"&&i(!1)),s.onKeyDown&&!(a&&w.key==="Enter")&&s.onKeyDown(w)};return k.useEffect(()=>{if(a&&p.current){const w=p.current.children[u];w&&w.scrollIntoView({block:"nearest",inline:"nearest"})}},[u,a]),k.useEffect(()=>{const w=g=>{h.current&&!h.current.contains(g.target)&&p.current&&!p.current.contains(g.target)&&i(!1)};return document.addEventListener("mousedown",w),()=>{document.removeEventListener("mousedown",w)}},[]),f.jsxs("div",{className:"relative w-full",children:[f.jsx("input",{ref:h,...s,value:n,onChange:y,onKeyDown:_,onClick:w=>m(n,w.currentTarget.selectionStart)}),a&&f.jsx("ul",{ref:p,className:"absolute bottom-full mb-2 left-0 right-0 bg-white border border-gray-300 rounded-md shadow-lg max-h-40 overflow-y-auto z-10",style:{minWidth:h.current?.offsetWidth},children:o.length>0?o.map((w,g)=>f.jsxs("li",{className:`px-4 py-2 text-sm cursor-pointer flex justify-between items-center ${g===u?"bg-purple-100 text-purple-800":"text-gray-700 hover:bg-gray-100"}`,onClick:()=>x(w),onMouseEnter:()=>c(g),children:[f.jsx("span",{children:w.name}),f.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",w.type,")"]})]},w.id+"-"+g)):f.jsx("li",{className:"px-4 py-2 text-sm text-gray-500 italic",children:"No matching items found"})})]})},Tr=e=>e.replace("resource-list-",""),Oo=({isOpen:e,onClose:t,prompt:r,onSubmit:n,resources:s})=>{const[a,i]=k.useState({}),o=k.useMemo(()=>{const c={};return r?.data?.inputs?.forEach(d=>{if(d.type.startsWith("resource-list-")){const v=Tr(d.type),h=s.filter(p=>p.type===v);c[d.id]=h}}),c},[r,s]);if(k.useEffect(()=>{if(r?.data?.inputs){const c={};r.data.inputs.forEach(d=>{const v=o[d.id];d.type.startsWith("resource-list-")&&v?.length>0?c[d.id]=v[0].id:c[d.id]=""}),i(c)}else i({})},[r,o]),!r||!r.data?.inputs)return null;const l=(c,d)=>{i(v=>({...v,[c]:d}))},u=c=>{if(c.preventDefault(),r?.data?.inputs?.every(v=>v.type.startsWith("resource-list-")?a[v.id]&&a[v.id]!=="":a[v.id]?.trim())){const v={...a};r.data.inputs?.forEach(h=>{if(h.type.startsWith("resource-list-")){const m=(o[h.id]||[]).find(y=>y.id===v[h.id]);v[h.id]=m?.name||v[h.id]}}),n(r,v)}else alert("Please fill in all required fields.")};return f.jsx(Qt,{open:e,onOpenChange:t,children:f.jsxs(Gt,{children:[f.jsx(Kt,{className:"fixed inset-0 bg-black/50 data-[state=open]:animate-overlayShow z-50"}),f.jsxs(Xt,{className:"fixed top-1/2 left-1/2 w-[90vw] max-w-lg -translate-x-1/2 -translate-y-1/2 rounded-lg bg-gray-50 p-8 shadow-xl focus:outline-none data-[state=open]:animate-contentShow z-[100]",children:[f.jsx(er,{className:"text-lg font-semibold text-gray-800 mb-3",children:r.data.title}),f.jsx(Xs,{className:"mt-1 mb-6 text-sm text-gray-600",children:"Please provide the following details:"}),f.jsxs("form",{onSubmit:u,className:"space-y-4",children:[r.data.inputs.map(c=>{const d=c.type.startsWith("resource-list-"),v=c.type==="select",h=c.type==="code",p=c.type==="text-area",m=d?Tr(c.type):"",y=o[c.id]||[];return f.jsxs("div",{children:[f.jsx("label",{htmlFor:c.id,className:"block text-sm font-medium text-gray-700 mb-1.5",children:c.label}),d?f.jsxs("select",{id:c.id,name:c.id,value:a[c.id]||"",onChange:x=>l(c.id,x.target.value),required:!0,className:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-300 focus:ring-offset-1 sm:text-sm transition duration-150 ease-in-out",children:[f.jsxs("option",{value:"",disabled:!0,children:["Select a ",m,"..."]}),y.map(x=>f.jsxs("option",{value:x.id,children:[x.name||x.id," "]},x.id)),y.length===0&&f.jsxs("option",{value:"",disabled:!0,children:["No ",m,"s found"]})]}):v?f.jsxs("select",{id:c.id,name:c.id,value:a[c.id]||"",onChange:x=>l(c.id,x.target.value),required:!0,className:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-300 focus:ring-offset-1 sm:text-sm transition duration-150 ease-in-out",children:[f.jsx("option",{value:"",disabled:!0,children:"Select an option..."}),c.options?.map(x=>f.jsx("option",{value:x,children:x},x)),(!c.options||c.options.length===0)&&f.jsx("option",{value:"",disabled:!0,children:"No options available"})]}):f.jsx(f.Fragment,{children:h||p?f.jsx("textarea",{id:c.id,name:c.id,value:a[c.id]||"",onChange:x=>l(c.id,x.target.value),onKeyDown:x=>{x.key==="Enter"&&!x.shiftKey&&(x.preventDefault(),u(x))},required:!0,rows:h?6:3,className:`w-full rounded-md border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-300 focus:ring-offset-1 sm:text-sm transition duration-150 ease-in-out ${h?"font-mono text-sm":""}`,placeholder:h?"Paste your code here...":""}):f.jsx("input",{type:"text",id:c.id,name:c.id,value:a[c.id]||"",onChange:x=>l(c.id,x.target.value),required:!0,className:"w-full rounded-md border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-300 focus:ring-offset-1 sm:text-sm transition duration-150 ease-in-out"})})]},c.id)}),f.jsxs("div",{className:"mt-6 flex justify-end space-x-2",children:[f.jsx(tr,{asChild:!0,children:f.jsx("button",{type:"button",className:"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2",onClick:t,children:"Cancel"})}),f.jsxs("button",{type:"submit",className:"inline-flex items-center justify-center gap-1.5 rounded-md border border-transparent bg-purple-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2",children:[f.jsx(En,{size:16}),"Submit"]})]})]})]})]})})},Po=[{id:"default-events",collection:"chatPrompts",body:"List all events.",data:{title:"What events do we have in our architecture?",type:"text",category:{id:"general",label:"General",icon:"HelpCircle"}}},{id:"default-events-by-domain-feature",collection:"chatPrompts",body:"What events are relevant to this feature {{feature-description}}?",data:{title:"Im building a new feature, what events are relevant to this feature?",type:"text",inputs:[{id:"feature-description",label:"Feature Description",type:"text-area"}],category:{id:"general",label:"General",icon:"HelpCircle"}}},{id:"default-events-by-domain-service",collection:"chatPrompts",body:"Review the given service {{service-name}}, and let me know how it works? You are an expert in the domain and architecture of the service.",data:{title:"Review the given service, and let me know how it works?",type:"text",inputs:[{id:"service-name",label:"Service Name",type:"resource-list-services"}],category:{id:"general",label:"General",icon:"HelpCircle"}}},{id:"default-services",collection:"chatPrompts",body:"List all services.",data:{title:"What services do we have in our architecture?",type:"text",category:{id:"general",label:"General",icon:"HelpCircle"}}},{id:"default-schema-json",collection:"chatPrompts",body:"Generate a JSON schema for {{event-name}}.",data:{title:"Generate a JSON schema for the given event",type:"text",inputs:[{id:"event-name",label:"Event Name",type:"resource-list-events"}],category:{id:"code",label:"Code Generation",icon:"Code"}}},{id:"default-schema-avro",collection:"chatPrompts",body:"Generate a Avro schema for {{event-name}}.",data:{title:"Generate a Avro schema for the given event",type:"text",inputs:[{id:"event-name",label:"Event Name",type:"resource-list-events"}],category:{id:"code",label:"Code Generation",icon:"Code"}}}],Cr=e=>{const t=ta,r=e?ea[e]:t;return r?f.jsx(r,{size:16,className:"mr-1 md:mr-2"}):f.jsx(t,{size:16,className:"mr-1 md:mr-2"})},jo=e=>{const t={};return e.forEach(r=>{const n=r.data.category.label,s=r.data.category.icon;t[n]||(t[n]={label:n,icon:s,items:[]}),t[n].items.push(r)}),Object.values(t)},No=({chatPrompts:e,activeCategory:t,setActiveCategory:r,onPromptClick:n,isProcessing:s})=>{const a=k.useMemo(()=>jo(Po),[]),[i,o]=k.useState(()=>a[0]?.label||""),l=k.useMemo(()=>!e||e.length===0?[]:e.find(d=>d.label===t)?.items||(e[0]?.items??[]),[t,e]),u=k.useMemo(()=>!a||a.length===0?[]:a.find(d=>d.label===i)?.items||[],[i,a]);return f.jsx("div",{className:"h-full flex flex-col justify-center items-center px-4 pb-4 pt-0",children:f.jsxs("div",{className:"max-w-2xl w-full text-left",children:[f.jsx("h2",{className:"text-2xl font-semibold mb-6 text-gray-800",children:"How can I help you?"}),e&&e.length>0?f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"flex flex-wrap justify-left gap-2 mb-6 border-b border-gray-200 pb-4",children:e.map(c=>f.jsxs("button",{onClick:()=>r(c.label),disabled:s,className:`flex items-center px-3 py-2 rounded-md text-sm font-medium transition-colors duration-150 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:ring-offset-2 focus:ring-offset-white disabled:opacity-50 ${t===c.label?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[Cr(c.icon),c.label]},c.label))}),f.jsx("div",{className:"space-y-2 text-left",children:l.map(c=>f.jsx("button",{onClick:()=>n(c),className:"block w-full text-left px-3 py-2 text-gray-700 hover:bg-gray-100 rounded-md text-sm transition-colors duration-150 focus:outline-none focus:ring-1 focus:ring-purple-400 disabled:opacity-50",disabled:s,children:c.data.title},c.id))})]}):f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"flex flex-wrap justify-left gap-2 mb-6 border-b border-gray-200 pb-4",children:a.map(c=>f.jsxs("button",{onClick:()=>o(c.label),disabled:s,className:`flex items-center px-3 py-2 rounded-md text-sm font-medium transition-colors duration-150 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:ring-offset-2 focus:ring-offset-white disabled:opacity-50 ${i===c.label?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[Cr(c.icon),c.label]},c.label))}),f.jsx("div",{className:"space-y-2 text-left",children:u.map(c=>f.jsx("button",{onClick:()=>n(c),className:"block w-full text-left px-3 py-2 text-gray-700 hover:bg-gray-100 rounded-md text-sm transition-colors duration-150 focus:outline-none focus:ring-1 focus:ring-purple-400 disabled:opacity-50",disabled:s,children:c.data.title},c.id))}),f.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 mt-6 text-gray-700 text-sm",children:f.jsxs("p",{className:"flex items-center",children:[f.jsx(En,{size:18,className:"text-purple-600 mr-2 flex-shrink-0"})," ",f.jsxs("span",{children:["Want to tailor these suggestions?"," ",f.jsxs("a",{href:"https://www.eventcatalog.dev/docs/development/guides/eventcatlaog-chat/what-is-eventcatalog-chat",target:"_blank",rel:"noopener noreferrer",className:"text-purple-700 hover:underline font-semibold",children:[" ","Bring your own prompts!"]})," ","Easily configure this list with relevant questions for your teams and organization."]})]})})]})]})})},Mo=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,zo=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Ao={};function Or(e,t){return(Ao.jsx?zo:Mo).test(e)}var ke={},Ot,Pr;function $o(){if(Pr)return Ot;Pr=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,r=/^\s*/,n=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,s=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,i=/^[;\s]*/,o=/^\s+|\s+$/g,l=`
`,u="/",c="*",d="",v="comment",h="declaration";function p(y,x){if(typeof y!="string")throw new TypeError("First argument must be a string");if(!y)return[];x=x||{};var _=1,w=1;function g(A){var N=A.match(t);N&&(_+=N.length);var H=A.lastIndexOf(l);w=~H?A.length-H:w+A.length}function I(){var A={line:_,column:w};return function(N){return N.position=new T(A),B(),N}}function T(A){this.start=A,this.end={line:_,column:w},this.source=x.source}T.prototype.content=y;function C(A){var N=new Error(x.source+":"+_+":"+w+": "+A);if(N.reason=A,N.filename=x.source,N.line=_,N.column=w,N.source=y,!x.silent)throw N}function O(A){var N=A.exec(y);if(N){var H=N[0];return g(H),y=y.slice(H.length),N}}function B(){O(r)}function de(A){var N;for(A=A||[];N=Xe();)N!==!1&&A.push(N);return A}function Xe(){var A=I();if(!(u!=y.charAt(0)||c!=y.charAt(1))){for(var N=2;d!=y.charAt(N)&&(c!=y.charAt(N)||u!=y.charAt(N+1));)++N;if(N+=2,d===y.charAt(N-1))return C("End of comment missing");var H=y.slice(2,N-2);return w+=2,g(H),y=y.slice(N),w+=2,A({type:v,comment:H})}}function ve(){var A=I(),N=O(n);if(N){if(Xe(),!O(s))return C("property missing ':'");var H=O(a),Tt=A({type:h,property:m(N[0].replace(e,d)),value:H?m(H[0].replace(e,d)):d});return O(i),Tt}}function It(){var A=[];de(A);for(var N;N=ve();)N!==!1&&(A.push(N),de(A));return A}return B(),It()}function m(y){return y?y.replace(o,d):d}return Ot=p,Ot}var jr;function Ro(){if(jr)return ke;jr=1;var e=ke&&ke.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ke,"__esModule",{value:!0}),ke.default=r;const t=e($o());function r(n,s){let a=null;if(!n||typeof n!="string")return a;const i=(0,t.default)(n),o=typeof s=="function";return i.forEach(l=>{if(l.type!=="declaration")return;const{property:u,value:c}=l;o?s(u,c,l):c&&(a=a||{},a[u]=c)}),a}return ke}var Me={},Nr;function Do(){if(Nr)return Me;Nr=1,Object.defineProperty(Me,"__esModule",{value:!0}),Me.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,r=/^[^-]+$/,n=/^-(webkit|moz|ms|o|khtml)-/,s=/^-(ms)-/,a=function(u){return!u||r.test(u)||e.test(u)},i=function(u,c){return c.toUpperCase()},o=function(u,c){return"".concat(c,"-")},l=function(u,c){return c===void 0&&(c={}),a(u)?u:(u=u.toLowerCase(),c.reactCompat?u=u.replace(s,o):u=u.replace(n,o),u.replace(t,i))};return Me.camelCase=l,Me}var ze,Mr;function Zo(){if(Mr)return ze;Mr=1;var e=ze&&ze.__importDefault||function(s){return s&&s.__esModule?s:{default:s}},t=e(Ro()),r=Do();function n(s,a){var i={};return!s||typeof s!="string"||(0,t.default)(s,function(o,l){o&&l&&(i[(0,r.camelCase)(o,a)]=l)}),i}return n.default=n,ze=n,ze}var Fo=Zo();const Lo=Tn(Fo),nr={}.hasOwnProperty,Uo=new Map,Wo=/[A-Z]/g,qo=new Set(["table","tbody","thead","tfoot","tr"]),Vo=new Set(["td","th"]),zn="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Bo(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const r=t.filePath||void 0;let n;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");n=ei(r,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");n=Xo(r,t.jsx,t.jsxs)}const s={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:n,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:r,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?rr:aa,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},a=An(s,e,void 0);return a&&typeof a!="string"?a:s.create(e,s.Fragment,{children:a||void 0},void 0)}function An(e,t,r){if(t.type==="element")return Jo(e,t,r);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return Ho(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return Qo(e,t,r);if(t.type==="mdxjsEsm")return Yo(e,t);if(t.type==="root")return Go(e,t,r);if(t.type==="text")return Ko(e,t)}function Jo(e,t,r){const n=e.schema;let s=n;t.tagName.toLowerCase()==="svg"&&n.space==="html"&&(s=rr,e.schema=s),e.ancestors.push(t);const a=Rn(e,t.tagName,!1),i=ti(e,t);let o=ar(e,t);return qo.has(t.tagName)&&(o=o.filter(function(l){return typeof l=="string"?!oa(l):!0})),$n(e,i,a,t),sr(i,o),e.ancestors.pop(),e.schema=n,e.create(t,a,i,r)}function Ho(e,t){if(t.data&&t.data.estree&&e.evaluater){const n=t.data.estree.body[0];return $e(n.type==="ExpressionStatement"),e.evaluater.evaluateExpression(n.expression)}qe(e,t.position)}function Yo(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);qe(e,t.position)}function Qo(e,t,r){const n=e.schema;let s=n;t.name==="svg"&&n.space==="html"&&(s=rr,e.schema=s),e.ancestors.push(t);const a=t.name===null?e.Fragment:Rn(e,t.name,!0),i=ri(e,t),o=ar(e,t);return $n(e,i,a,t),sr(i,o),e.ancestors.pop(),e.schema=n,e.create(t,a,i,r)}function Go(e,t,r){const n={};return sr(n,ar(e,t)),e.create(t,e.Fragment,n,r)}function Ko(e,t){return t.value}function $n(e,t,r,n){typeof r!="string"&&r!==e.Fragment&&e.passNode&&(t.node=n)}function sr(e,t){if(t.length>0){const r=t.length>1?t:t[0];r&&(e.children=r)}}function Xo(e,t,r){return n;function n(s,a,i,o){const u=Array.isArray(i.children)?r:t;return o?u(a,i,o):u(a,i)}}function ei(e,t){return r;function r(n,s,a,i){const o=Array.isArray(a.children),l=la(n);return t(s,a,i,o,{columnNumber:l?l.column-1:void 0,fileName:e,lineNumber:l?l.line:void 0},void 0)}}function ti(e,t){const r={};let n,s;for(s in t.properties)if(s!=="children"&&nr.call(t.properties,s)){const a=ni(e,s,t.properties[s]);if(a){const[i,o]=a;e.tableCellAlignToStyle&&i==="align"&&typeof o=="string"&&Vo.has(t.tagName)?n=o:r[i]=o}}if(n){const a=r.style||(r.style={});a[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=n}return r}function ri(e,t){const r={};for(const n of t.attributes)if(n.type==="mdxJsxExpressionAttribute")if(n.data&&n.data.estree&&e.evaluater){const a=n.data.estree.body[0];$e(a.type==="ExpressionStatement");const i=a.expression;$e(i.type==="ObjectExpression");const o=i.properties[0];$e(o.type==="SpreadElement"),Object.assign(r,e.evaluater.evaluateExpression(o.argument))}else qe(e,t.position);else{const s=n.name;let a;if(n.value&&typeof n.value=="object")if(n.value.data&&n.value.data.estree&&e.evaluater){const o=n.value.data.estree.body[0];$e(o.type==="ExpressionStatement"),a=e.evaluater.evaluateExpression(o.expression)}else qe(e,t.position);else a=n.value===null?!0:n.value;r[s]=a}return r}function ar(e,t){const r=[];let n=-1;const s=e.passKeys?new Map:Uo;for(;++n<t.children.length;){const a=t.children[n];let i;if(e.passKeys){const l=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(l){const u=s.get(l)||0;i=l+"-"+u,s.set(l,u+1)}}const o=An(e,a,i);o!==void 0&&r.push(o)}return r}function ni(e,t,r){const n=ia(e.schema,t);if(!(r==null||typeof r=="number"&&Number.isNaN(r))){if(Array.isArray(r)&&(r=n.commaSeparated?ca(r):ua(r)),n.property==="style"){let s=typeof r=="object"?r:si(e,String(r));return e.stylePropertyNameCase==="css"&&(s=ai(s)),["style",s]}return[e.elementAttributeNameCase==="react"&&n.space?ya[n.property]||n.property:n.attribute,r]}}function si(e,t){try{return Lo(t,{reactCompat:!0})}catch(r){if(e.ignoreInvalidStyle)return{};const n=r,s=new In("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:n,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=e.filePath||void 0,s.url=zn+"#cannot-parse-style-attribute",s}}function Rn(e,t,r){let n;if(!r)n={type:"Literal",value:t};else if(t.includes(".")){const s=t.split(".");let a=-1,i;for(;++a<s.length;){const o=Or(s[a])?{type:"Identifier",name:s[a]}:{type:"Literal",value:s[a]};i=i?{type:"MemberExpression",object:i,property:o,computed:!!(a&&o.type==="Literal"),optional:!1}:o}n=i}else n=Or(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(n.type==="Literal"){const s=n.value;return nr.call(e.components,s)?e.components[s]:s}if(e.evaluater)return e.evaluater.evaluateExpression(n);qe(e)}function qe(e,t){const r=new In("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw r.file=e.filePath||void 0,r.url=zn+"#cannot-handle-mdx-estrees-without-createevaluater",r}function ai(e){const t={};let r;for(r in e)nr.call(e,r)&&(t[oi(r)]=e[r]);return t}function oi(e){let t=e.replace(Wo,ii);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function ii(e){return"-"+e.toLowerCase()}const Pt={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},ci="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",zr=[],Ar={allowDangerousHtml:!0},ui=/^(https?|ircs?|mailto|xmpp)$/i,li=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Rt(e){const t=di(e),r=fi(e);return hi(t.runSync(t.parse(r),r),e)}function di(e){const t=e.rehypePlugins||zr,r=e.remarkPlugins||zr,n=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Ar}:Ar;return da().use(fa).use(r).use(ha,n).use(t)}function fi(e){const t=e.children||"",r=new pa;return typeof t=="string"&&(r.value=t),r}function hi(e,t){const r=t.allowedElements,n=t.allowElement,s=t.components,a=t.disallowedElements,i=t.skipHtml,o=t.unwrapDisallowed,l=t.urlTransform||pi;for(const c of li)Object.hasOwn(t,c.from)&&ma("Unexpected `"+c.from+"` prop, "+(c.to?"use `"+c.to+"` instead":"remove it")+" (see <"+ci+"#"+c.id+"> for more info)");return ga(e,u),Bo(e,{Fragment:f.Fragment,components:s,ignoreInvalidStyle:!0,jsx:f.jsx,jsxs:f.jsxs,passKeys:!0,passNode:!0});function u(c,d,v){if(c.type==="raw"&&v&&typeof d=="number")return i?v.children.splice(d,1):v.children[d]={type:"text",value:c.value},d;if(c.type==="element"){let h;for(h in Pt)if(Object.hasOwn(Pt,h)&&Object.hasOwn(c.properties,h)){const p=c.properties[h],m=Pt[h];(m===null||m.includes(c.tagName))&&(c.properties[h]=l(String(p||""),h,c))}}if(c.type==="element"){let h=r?!r.includes(c.tagName):a?a.includes(c.tagName):!1;if(!h&&n&&typeof d=="number"&&(h=!n(c,d,v)),h&&v&&typeof d=="number")return o&&c.children?v.children.splice(d,1,...c.children):v.children.splice(d,1),d}}}function pi(e){const t=e.indexOf(":"),r=e.indexOf("?"),n=e.indexOf("#"),s=e.indexOf("/");return t===-1||s!==-1&&t>s||r!==-1&&t>r||n!==-1&&t>n||ui.test(e.slice(0,t))?e:""}const dt={'pre[class*="language-"]':{color:"#d4d4d4",fontSize:"13px",textShadow:"none",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace',direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",lineHeight:"1.5",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none",padding:"1em",margin:".5em 0",overflow:"auto",background:"#1e1e1e"},'code[class*="language-"]':{color:"#d4d4d4",fontSize:"13px",textShadow:"none",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace',direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",lineHeight:"1.5",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none"},'pre[class*="language-"]::selection':{textShadow:"none",background:"#264F78"},'code[class*="language-"]::selection':{textShadow:"none",background:"#264F78"},'pre[class*="language-"] *::selection':{textShadow:"none",background:"#264F78"},'code[class*="language-"] *::selection':{textShadow:"none",background:"#264F78"},':not(pre) > code[class*="language-"]':{padding:".1em .3em",borderRadius:".3em",color:"#db4c69",background:"#1e1e1e"},".namespace":{Opacity:".7"},"doctype.doctype-tag":{color:"#569CD6"},"doctype.name":{color:"#9cdcfe"},comment:{color:"#6a9955"},prolog:{color:"#6a9955"},punctuation:{color:"#d4d4d4"},".language-html .language-css .token.punctuation":{color:"#d4d4d4"},".language-html .language-javascript .token.punctuation":{color:"#d4d4d4"},property:{color:"#9cdcfe"},tag:{color:"#569cd6"},boolean:{color:"#569cd6"},number:{color:"#b5cea8"},constant:{color:"#9cdcfe"},symbol:{color:"#b5cea8"},inserted:{color:"#b5cea8"},unit:{color:"#b5cea8"},selector:{color:"#d7ba7d"},"attr-name":{color:"#9cdcfe"},string:{color:"#ce9178"},char:{color:"#ce9178"},builtin:{color:"#ce9178"},deleted:{color:"#ce9178"},".language-css .token.string.url":{textDecoration:"underline"},operator:{color:"#d4d4d4"},entity:{color:"#569cd6"},"operator.arrow":{color:"#569CD6"},atrule:{color:"#ce9178"},"atrule.rule":{color:"#c586c0"},"atrule.url":{color:"#9cdcfe"},"atrule.url.function":{color:"#dcdcaa"},"atrule.url.punctuation":{color:"#d4d4d4"},keyword:{color:"#569CD6"},"keyword.module":{color:"#c586c0"},"keyword.control-flow":{color:"#c586c0"},function:{color:"#dcdcaa"},"function.maybe-class-name":{color:"#dcdcaa"},regex:{color:"#d16969"},important:{color:"#569cd6"},italic:{fontStyle:"italic"},"class-name":{color:"#4ec9b0"},"maybe-class-name":{color:"#4ec9b0"},console:{color:"#9cdcfe"},parameter:{color:"#9cdcfe"},interpolation:{color:"#9cdcfe"},"punctuation.interpolation-punctuation":{color:"#569cd6"},variable:{color:"#9cdcfe"},"imports.maybe-class-name":{color:"#9cdcfe"},"exports.maybe-class-name":{color:"#9cdcfe"},escape:{color:"#d7ba7d"},"tag.punctuation":{color:"#808080"},cdata:{color:"#808080"},"attr-value":{color:"#ce9178"},"attr-value.punctuation":{color:"#ce9178"},"attr-value.punctuation.attr-equals":{color:"#d4d4d4"},namespace:{color:"#4ec9b0"},'pre[class*="language-javascript"]':{color:"#9cdcfe"},'code[class*="language-javascript"]':{color:"#9cdcfe"},'pre[class*="language-jsx"]':{color:"#9cdcfe"},'code[class*="language-jsx"]':{color:"#9cdcfe"},'pre[class*="language-typescript"]':{color:"#9cdcfe"},'code[class*="language-typescript"]':{color:"#9cdcfe"},'pre[class*="language-tsx"]':{color:"#9cdcfe"},'code[class*="language-tsx"]':{color:"#9cdcfe"},'pre[class*="language-css"]':{color:"#ce9178"},'code[class*="language-css"]':{color:"#ce9178"},'pre[class*="language-html"]':{color:"#d4d4d4"},'code[class*="language-html"]':{color:"#d4d4d4"},".language-regex .token.anchor":{color:"#dcdcaa"},".language-html .token.punctuation":{color:"#808080"},'pre[class*="language-"] > code[class*="language-"]':{position:"relative",zIndex:"1"},".line-highlight.line-highlight":{background:"#f7ebc6",boxShadow:"inset 5px 0 0 #f7d87c",zIndex:"0"}};function mi(e){const t=/<iframe[^>]*>.*?<\/iframe>/gi,r=[];let n=0,s;for(;(s=t.exec(e))!==null;){if(s.index>n){const c=e.slice(n,s.index);c.trim()&&r.push(f.jsx(Rt,{components:{code({node:d,className:v,children:h,...p}){const m=p.inline,y=/language-(\w+)/.exec(v||""),x=String(h),_=y?y[1]:"text";return`${Ue.useId()}`,m||!x.includes(`
`)?f.jsx("code",{className:`px-1 py-0.5 rounded text-xs font-mono bg-gray-300/70 text-gray-900 ${v||""}`,...p,children:x.trim()}):f.jsxs("div",{className:"code-block bg-[#1e1e1e] rounded-md overflow-hidden my-4 relative group",children:[f.jsx("div",{className:"flex justify-between items-center px-4 py-1.5 bg-gray-700 text-gray-300 text-xs",children:f.jsx("span",{children:_})}),f.jsx(ut,{style:dt,language:_,PreTag:"div",showLineNumbers:!0,wrapLines:!0,customStyle:{margin:0,borderRadius:"0 0 0.375rem 0.375rem",padding:"1rem"},children:x.replace(/\n$/,"")})]})},a:({node:d,...v})=>f.jsx("a",{...v,target:"_blank",rel:"noopener noreferrer",className:"text-purple-600 hover:text-purple-800"}),p:({node:d,...v})=>f.jsx("p",{...v,className:"mb-2 last:mb-0"})},children:c},`text-${n}`))}const a=s[0],i=a.match(/src=["']([^"']+)["']/i),o=a.match(/width=["']([^"']+)["']/i),l=a.match(/height=["']([^"']+)["']/i),u=a.match(/title=["']([^"']+)["']/i);i&&r.push(f.jsx("iframe",{src:i[1],width:o?o[1]:"100%",height:l?l[1]:"400",title:u?u[1]:"Embedded content",className:"w-full h-96 border rounded-lg my-4",sandbox:"allow-scripts allow-same-origin allow-popups allow-forms",loading:"lazy"},`iframe-${s.index}`)),n=s.index+s[0].length}if(n<e.length){const a=e.slice(n);a.trim()&&r.push(f.jsx(Rt,{components:{code({node:i,className:o,children:l,...u}){const c=u.inline,d=/language-(\w+)/.exec(o||""),v=String(l),h=d?d[1]:"text";return`${Ue.useId()}`,c||!v.includes(`
`)?f.jsx("code",{className:`px-1 py-0.5 rounded text-xs font-mono bg-gray-300/70 text-gray-900 ${o||""}`,...u,children:v.trim()}):f.jsxs("div",{className:"code-block bg-[#1e1e1e] rounded-md overflow-hidden my-4 relative group",children:[f.jsx("div",{className:"flex justify-between items-center px-4 py-1.5 bg-gray-700 text-gray-300 text-xs",children:f.jsx("span",{children:h})}),f.jsx(ut,{style:dt,language:h,PreTag:"div",showLineNumbers:!0,wrapLines:!0,customStyle:{margin:0,borderRadius:"0 0 0.375rem 0.375rem",padding:"1rem"},children:v.replace(/\n$/,"")})]})},a:({node:i,...o})=>f.jsx("a",{...o,target:"_blank",rel:"noopener noreferrer",className:"text-purple-600 hover:text-purple-800"}),p:({node:i,...o})=>f.jsx("p",{...o,className:"mb-2 last:mb-0"})},children:a},`text-${n}`))}return r}const Dn=Ue.memo(({message:e})=>{const[t,r]=k.useState(!1),[n,s]=k.useState(null),[a,i]=k.useState({}),[o,l]=k.useState(!0),[u,c]=k.useState(!0),d=h=>h.title||h.name||h.id||"Resource",v=(h,p)=>{navigator.clipboard.writeText(h).then(()=>{i(m=>({...m,[p]:!0})),setTimeout(()=>{i(m=>({...m,[p]:!1}))},1500)}).catch(m=>{console.error("Failed to copy code: ",m)})};return f.jsxs("div",{className:`flex ${e.isUser?"justify-end":"justify-start"} mb-4`,children:[f.jsxs("div",{className:`max-w-[80%] rounded-lg p-3 ${e.isUser?"bg-purple-600 text-white rounded-br-none":"bg-gray-100 text-gray-800 rounded-bl-none"}`,children:[f.jsx("div",{className:`prose prose-sm max-w-none ${e.isUser?"prose-invert":""}`,children:(()=>{const h=e.content||"";return/<iframe[^>]*>.*?<\/iframe>/gi.test(h)?mi(h):f.jsx(Rt,{components:{code({node:m,className:y,children:x,..._}){const w=_.inline,g=/language-(\w+)/.exec(y||""),I=String(x),T=g?g[1]:"text",C=`code-${Ue.useId()}`,O=a[C],B=()=>{s({language:T,code:I.replace(/\n$/,"")}),r(!0)};return w||!I.includes(`
`)?f.jsx("code",{className:`px-1 py-0.5 rounded text-xs font-mono ${e.isUser?"bg-purple-800/70 text-purple-100":"bg-gray-300/70 text-gray-900"} ${y||""}`,..._,children:I.trim()}):f.jsxs("div",{className:"code-block bg-[#1e1e1e] rounded-md overflow-hidden my-4 relative group",children:[f.jsxs("div",{className:"flex justify-between items-center px-4 py-1.5 bg-gray-700 text-gray-300 text-xs",children:[f.jsx("span",{children:T}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:()=>v(I.replace(/\n$/,""),C),className:"text-gray-300 hover:text-white flex items-center","aria-label":O?"Copied":"Copy code",children:O?f.jsx(gr,{size:14,className:"text-green-400"}):f.jsx(yr,{size:14})}),f.jsx("button",{onClick:B,className:"text-gray-300 hover:text-white","aria-label":"View code fullscreen",children:f.jsx(ra,{size:14})})]})]}),f.jsx(ut,{style:dt,language:T,PreTag:"div",showLineNumbers:!0,wrapLines:!0,customStyle:{margin:0,borderRadius:"0 0 0.375rem 0.375rem",padding:"1rem"},children:I.replace(/\n$/,"")})]})},a:({node:m,...y})=>f.jsx("a",{...y,target:"_blank",rel:"noopener noreferrer",className:"text-purple-600 hover:text-purple-800"}),p:({node:m,...y})=>f.jsx("p",{...y,className:"mb-2 last:mb-0"})},children:h})})()}),e.isUser&&e.additionalContext&&f.jsxs("div",{className:"mt-3 pt-3 border-t border-purple-700/50",children:[" ",f.jsxs("button",{className:"flex items-center text-xs text-purple-300 mb-1 w-full text-left focus:outline-none",onClick:()=>c(!u),"aria-expanded":!u,"aria-controls":"additional-context-content",children:[u?f.jsx(vr,{size:14,className:"mr-1"}):f.jsx(br,{size:14,className:"mr-1"}),"Prompt used:"]}),!u&&f.jsxs("div",{className:"text-[10px] mt-1 pl-5 prose prose-sm prose-invert",id:"additional-context-content",children:[" ",f.jsx("pre",{className:"whitespace-pre-wrap break-words",children:e.additionalContext})," "]})]}),!e.isUser&&e.resources&&e.resources.length>0&&f.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[f.jsxs("button",{className:"flex items-center text-xs text-gray-500 mb-1 w-full text-left focus:outline-none",onClick:()=>l(!o),"aria-expanded":!o,"aria-controls":"resource-list",children:[o?f.jsx(vr,{size:14,className:"mr-1"}):f.jsx(br,{size:14,className:"mr-1"}),"Referenced Resources:"]}),!o&&f.jsxs("div",{className:"text-[10px] mt-1 pl-5",id:"resource-list",children:[" ",e.resources.map((h,p)=>f.jsxs("span",{children:[f.jsxs("a",{href:h.url,className:"text-purple-600 hover:text-purple-800",target:"_blank",rel:"noopener noreferrer",children:[d(h)," (",h.type,")"]}),p<(e.resources?.length||0)-1?", ":""]},h.id||`res-${p}`))]})]})]}),f.jsx(Qt,{open:t,onOpenChange:r,children:f.jsxs(Gt,{children:[f.jsx(Kt,{className:"fixed inset-0 bg-black/60 z-50 data-[state=open]:animate-overlayShow data-[state=closed]:animate-overlayHide"}),f.jsxs(Xt,{className:"fixed left-1/2 top-1/2 z-[100] w-[90vw] max-w-4xl max-h-[85vh] -translate-x-1/2 -translate-y-1/2 rounded-lg bg-[#1e1e1e] p-0 shadow-lg focus:outline-none data-[state=open]:animate-contentShow data-[state=closed]:animate-contentHide overflow-hidden flex flex-col",children:[f.jsxs("div",{className:"flex justify-between items-center px-4 py-2.5 bg-gray-700 text-gray-300 text-sm flex-shrink-0 border-b border-gray-600",children:[f.jsx(er,{className:"font-medium",children:n?.language}),f.jsxs("div",{className:"flex items-center gap-3",children:[n&&f.jsxs("button",{onClick:()=>v(n.code,"modal-copy"),className:"text-gray-300 hover:text-white flex items-center gap-1 text-xs","aria-label":a["modal-copy"]?"Copied":"Copy code",children:[a["modal-copy"]?f.jsx(gr,{size:14,className:"text-green-400"}):f.jsx(yr,{size:14}),a["modal-copy"]?"Copied!":"Copy"]}),f.jsx(tr,{asChild:!0,children:f.jsx("button",{className:"text-gray-300 hover:text-white","aria-label":"Close",children:f.jsx(na,{size:18})})})]})]}),f.jsx("div",{className:"flex-grow overflow-auto",children:n&&f.jsx(ut,{style:dt,language:n.language,PreTag:"div",showLineNumbers:!0,wrapLines:!0,customStyle:{margin:0,height:"100%",padding:"1rem"},children:n.code})})]})]})})]})});Dn.displayName="ChatMessage";var Zn="vercel.ai.error",gi=Symbol.for(Zn),Fn,yi=class Ln extends Error{constructor({name:t,message:r,cause:n}){super(r),this[Fn]=!0,this.name=t,this.cause=n}static isInstance(t){return Ln.hasMarker(t,Zn)}static hasMarker(t,r){const n=Symbol.for(r);return t!=null&&typeof t=="object"&&n in t&&typeof t[n]=="boolean"&&t[n]===!0}};Fn=gi;var me=yi;function Un(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var Wn="AI_InvalidArgumentError",qn=`vercel.ai.error.${Wn}`,vi=Symbol.for(qn),Vn,bi=class extends me{constructor({message:e,cause:t,argument:r}){super({name:Wn,message:e,cause:t}),this[Vn]=!0,this.argument=r}static isInstance(e){return me.hasMarker(e,qn)}};Vn=vi;var Bn="AI_JSONParseError",Jn=`vercel.ai.error.${Bn}`,wi=Symbol.for(Jn),Hn,$r=class extends me{constructor({text:e,cause:t}){super({name:Bn,message:`JSON parsing failed: Text: ${e}.
Error message: ${Un(t)}`,cause:t}),this[Hn]=!0,this.text=e}static isInstance(e){return me.hasMarker(e,Jn)}};Hn=wi;var Yn="AI_TypeValidationError",Qn=`vercel.ai.error.${Yn}`,xi=Symbol.for(Qn),Gn,_i=class Dt extends me{constructor({value:t,cause:r}){super({name:Yn,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${Un(r)}`,cause:r}),this[Gn]=!0,this.value=t}static isInstance(t){return me.hasMarker(t,Qn)}static wrap({value:t,cause:r}){return Dt.isInstance(r)&&r.value===t?r:new Dt({value:t,cause:r})}};Gn=xi;var ft=_i;class Rr extends Error{constructor(t,r){super(t),this.name="ParseError",this.type=r.type,this.field=r.field,this.value=r.value,this.line=r.line}}function jt(e){}function Si(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=jt,onError:r=jt,onRetry:n=jt,onComment:s}=e;let a="",i=!0,o,l="",u="";function c(m){const y=i?m.replace(/^\xEF\xBB\xBF/,""):m,[x,_]=ki(`${a}${y}`);for(const w of x)d(w);a=_,i=!1}function d(m){if(m===""){h();return}if(m.startsWith(":")){s&&s(m.slice(m.startsWith(": ")?2:1));return}const y=m.indexOf(":");if(y!==-1){const x=m.slice(0,y),_=m[y+1]===" "?2:1,w=m.slice(y+_);v(x,w,m);return}v(m,"",m)}function v(m,y,x){switch(m){case"event":u=y;break;case"data":l=`${l}${y}
`;break;case"id":o=y.includes("\0")?void 0:y;break;case"retry":/^\d+$/.test(y)?n(parseInt(y,10)):r(new Rr(`Invalid \`retry\` value: "${y}"`,{type:"invalid-retry",value:y,line:x}));break;default:r(new Rr(`Unknown field "${m.length>20?`${m.slice(0,20)}`:m}"`,{type:"unknown-field",field:m,value:y,line:x}));break}}function h(){l.length>0&&t({id:o,event:u||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),o=void 0,l="",u=""}function p(m={}){a&&m.consume&&d(a),i=!0,o=void 0,l="",u="",a=""}return{feed:c,reset:p}}function ki(e){const t=[];let r="",n=0;for(;n<e.length;){const s=e.indexOf("\r",n),a=e.indexOf(`
`,n);let i=-1;if(s!==-1&&a!==-1?i=Math.min(s,a):s!==-1?s===e.length-1?i=-1:i=s:a!==-1&&(i=a),i===-1){r=e.slice(n);break}else{const o=e.slice(n,i);t.push(o),n=i+1,e[n-1]==="\r"&&e[n]===`
`&&n++}}return[t,r]}class Ei extends TransformStream{constructor({onError:t,onRetry:r,onComment:n}={}){let s;super({start(a){s=Si({onEvent:i=>{a.enqueue(i)},onError(i){t==="terminate"?a.error(i):typeof t=="function"&&t(i)},onRetry:r,onComment:n})},transform(a){s.feed(a)}})}}function b(e,t,r){function n(o,l){var u;Object.defineProperty(o,"_zod",{value:o._zod??{},enumerable:!1}),(u=o._zod).traits??(u.traits=new Set),o._zod.traits.add(e),t(o,l);for(const c in i.prototype)c in o||Object.defineProperty(o,c,{value:i.prototype[c].bind(o)});o._zod.constr=i,o._zod.def=l}const s=r?.Parent??Object;class a extends s{}Object.defineProperty(a,"name",{value:e});function i(o){var l;const u=r?.Parent?new a:this;n(u,o),(l=u._zod).deferred??(l.deferred=[]);for(const c of u._zod.deferred)c();return u}return Object.defineProperty(i,"init",{value:n}),Object.defineProperty(i,Symbol.hasInstance,{value:o=>r?.Parent&&o instanceof r.Parent?!0:o?._zod?.traits?.has(e)}),Object.defineProperty(i,"name",{value:e}),i}class Ve extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const Kn={};function ge(e){return Kn}function Xn(e){const t=Object.values(e).filter(n=>typeof n=="number");return Object.entries(e).filter(([n,s])=>t.indexOf(+n)===-1).map(([n,s])=>s)}function Ii(e,t){return typeof t=="bigint"?t.toString():t}function or(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function ir(e){return e==null}function cr(e){const t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function Ti(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,s=r>n?r:n,a=Number.parseInt(e.toFixed(s).replace(".","")),i=Number.parseInt(t.toFixed(s).replace(".",""));return a%i/10**s}function z(e,t,r){Object.defineProperty(e,t,{get(){{const n=r();return e[t]=n,n}},set(n){Object.defineProperty(e,t,{value:n})},configurable:!0})}function xt(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function Ae(e){return JSON.stringify(e)}const es=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{};function ht(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const Ci=or(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function pt(e){if(ht(e)===!1)return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(ht(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}const Oi=new Set(["string","number","symbol"]);function Qe(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function _e(e,t,r){const n=new e._zod.constr(t??e._zod.def);return(!t||r?.parent)&&(n._zod.parent=e),n}function S(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if(t?.message!==void 0){if(t?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function Pi(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const ji={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function Ni(e,t){const r={},n=e._zod.def;for(const s in t){if(!(s in n.shape))throw new Error(`Unrecognized key: "${s}"`);t[s]&&(r[s]=n.shape[s])}return _e(e,{...e._zod.def,shape:r,checks:[]})}function Mi(e,t){const r={...e._zod.def.shape},n=e._zod.def;for(const s in t){if(!(s in n.shape))throw new Error(`Unrecognized key: "${s}"`);t[s]&&delete r[s]}return _e(e,{...e._zod.def,shape:r,checks:[]})}function zi(e,t){if(!pt(t))throw new Error("Invalid input to extend: expected a plain object");const r={...e._zod.def,get shape(){const n={...e._zod.def.shape,...t};return xt(this,"shape",n),n},checks:[]};return _e(e,r)}function Ai(e,t){return _e(e,{...e._zod.def,get shape(){const r={...e._zod.def.shape,...t._zod.def.shape};return xt(this,"shape",r),r},catchall:t._zod.def.catchall,checks:[]})}function $i(e,t,r){const n=t._zod.def.shape,s={...n};if(r)for(const a in r){if(!(a in n))throw new Error(`Unrecognized key: "${a}"`);r[a]&&(s[a]=e?new e({type:"optional",innerType:n[a]}):n[a])}else for(const a in n)s[a]=e?new e({type:"optional",innerType:n[a]}):n[a];return _e(t,{...t._zod.def,shape:s,checks:[]})}function Ri(e,t,r){const n=t._zod.def.shape,s={...n};if(r)for(const a in r){if(!(a in s))throw new Error(`Unrecognized key: "${a}"`);r[a]&&(s[a]=new e({type:"nonoptional",innerType:n[a]}))}else for(const a in n)s[a]=new e({type:"nonoptional",innerType:n[a]});return _e(t,{...t._zod.def,shape:s,checks:[]})}function Le(e,t=0){for(let r=t;r<e.issues.length;r++)if(e.issues[r]?.continue!==!0)return!0;return!1}function xe(e,t){return t.map(r=>{var n;return(n=r).path??(n.path=[]),r.path.unshift(e),r})}function tt(e){return typeof e=="string"?e:e?.message}function ye(e,t,r){const n={...e,path:e.path??[]};if(!e.message){const s=tt(e.inst?._zod.def?.error?.(e))??tt(t?.error?.(e))??tt(r.customError?.(e))??tt(r.localeError?.(e))??"Invalid input";n.message=s}return delete n.inst,delete n.continue,t?.reportInput||delete n.input,n}function ur(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Be(...e){const[t,r,n]=e;return typeof t=="string"?{message:t,code:"custom",input:r,inst:n}:{...t}}const ts=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get(){return JSON.stringify(t,Ii,2)},enumerable:!0}),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},rs=b("$ZodError",ts),ns=b("$ZodError",ts,{Parent:Error});function Di(e,t=r=>r.message){const r={},n=[];for(const s of e.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(t(s))):n.push(t(s));return{formErrors:n,fieldErrors:r}}function Zi(e,t){const r=t||function(a){return a.message},n={_errors:[]},s=a=>{for(const i of a.issues)if(i.code==="invalid_union"&&i.errors.length)i.errors.map(o=>s({issues:o}));else if(i.code==="invalid_key")s({issues:i.issues});else if(i.code==="invalid_element")s({issues:i.issues});else if(i.path.length===0)n._errors.push(r(i));else{let o=n,l=0;for(;l<i.path.length;){const u=i.path[l];l===i.path.length-1?(o[u]=o[u]||{_errors:[]},o[u]._errors.push(r(i))):o[u]=o[u]||{_errors:[]},o=o[u],l++}}};return s(e),n}const Fi=e=>(t,r,n,s)=>{const a=n?Object.assign(n,{async:!1}):{async:!1},i=t._zod.run({value:r,issues:[]},a);if(i instanceof Promise)throw new Ve;if(i.issues.length){const o=new(s?.Err??e)(i.issues.map(l=>ye(l,a,ge())));throw es(o,s?.callee),o}return i.value},Li=e=>async(t,r,n,s)=>{const a=n?Object.assign(n,{async:!0}):{async:!0};let i=t._zod.run({value:r,issues:[]},a);if(i instanceof Promise&&(i=await i),i.issues.length){const o=new(s?.Err??e)(i.issues.map(l=>ye(l,a,ge())));throw es(o,s?.callee),o}return i.value},ss=e=>(t,r,n)=>{const s=n?{...n,async:!1}:{async:!1},a=t._zod.run({value:r,issues:[]},s);if(a instanceof Promise)throw new Ve;return a.issues.length?{success:!1,error:new(e??rs)(a.issues.map(i=>ye(i,s,ge())))}:{success:!0,data:a.value}},Ui=ss(ns),as=e=>async(t,r,n)=>{const s=n?Object.assign(n,{async:!0}):{async:!0};let a=t._zod.run({value:r,issues:[]},s);return a instanceof Promise&&(a=await a),a.issues.length?{success:!1,error:new e(a.issues.map(i=>ye(i,s,ge())))}:{success:!0,data:a.value}},Wi=as(ns),qi=/^[cC][^\s-]{8,}$/,Vi=/^[0-9a-z]+$/,Bi=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,Ji=/^[0-9a-vA-V]{20}$/,Hi=/^[A-Za-z0-9]{27}$/,Yi=/^[a-zA-Z0-9_-]{21}$/,Qi=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,Gi=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Dr=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000)$/,Ki=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,Xi="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function ec(){return new RegExp(Xi,"u")}const tc=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,rc=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})$/,nc=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,sc=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ac=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,os=/^[A-Za-z0-9_-]*$/,oc=/^([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+$/,ic=/^\+(?:[0-9]){6,14}[0-9]$/,is="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",cc=new RegExp(`^${is}$`);function cs(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function uc(e){return new RegExp(`^${cs(e)}$`)}function lc(e){const t=cs({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-]\\d{2}:\\d{2})");const n=`${t}(?:${r.join("|")})`;return new RegExp(`^${is}T(?:${n})$`)}const dc=e=>{const t=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},fc=/^\d+$/,hc=/^-?\d+(?:\.\d+)?/i,pc=/true|false/i,mc=/null/i,gc=/^[^A-Z]*$/,yc=/^[^a-z]*$/,K=b("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),us={number:"number",bigint:"bigint",object:"date"},ls=b("$ZodCheckLessThan",(e,t)=>{K.init(e,t);const r=us[typeof t.value];e._zod.onattach.push(n=>{const s=n._zod.bag,a=(t.inclusive?s.maximum:s.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<a&&(t.inclusive?s.maximum=t.value:s.exclusiveMaximum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value<=t.value:n.value<t.value)||n.issues.push({origin:r,code:"too_big",maximum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),ds=b("$ZodCheckGreaterThan",(e,t)=>{K.init(e,t);const r=us[typeof t.value];e._zod.onattach.push(n=>{const s=n._zod.bag,a=(t.inclusive?s.minimum:s.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>a&&(t.inclusive?s.minimum=t.value:s.exclusiveMinimum=t.value)}),e._zod.check=n=>{(t.inclusive?n.value>=t.value:n.value>t.value)||n.issues.push({origin:r,code:"too_small",minimum:t.value,input:n.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),vc=b("$ZodCheckMultipleOf",(e,t)=>{K.init(e,t),e._zod.onattach.push(r=>{var n;(n=r._zod.bag).multipleOf??(n.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%t.value===BigInt(0):Ti(r.value,t.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),bc=b("$ZodCheckNumberFormat",(e,t)=>{K.init(e,t),t.format=t.format||"float64";const r=t.format?.includes("int"),n=r?"int":"number",[s,a]=ji[t.format];e._zod.onattach.push(i=>{const o=i._zod.bag;o.format=t.format,o.minimum=s,o.maximum=a,r&&(o.pattern=fc)}),e._zod.check=i=>{const o=i.value;if(r){if(!Number.isInteger(o)){i.issues.push({expected:n,format:t.format,code:"invalid_type",input:o,inst:e});return}if(!Number.isSafeInteger(o)){o>0?i.issues.push({input:o,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort}):i.issues.push({input:o,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:n,continue:!t.abort});return}}o<s&&i.issues.push({origin:"number",input:o,code:"too_small",minimum:s,inclusive:!0,inst:e,continue:!t.abort}),o>a&&i.issues.push({origin:"number",input:o,code:"too_big",maximum:a,inst:e})}}),wc=b("$ZodCheckMaxLength",(e,t)=>{var r;K.init(e,t),(r=e._zod.def).when??(r.when=n=>{const s=n.value;return!ir(s)&&s.length!==void 0}),e._zod.onattach.push(n=>{const s=n._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<s&&(n._zod.bag.maximum=t.maximum)}),e._zod.check=n=>{const s=n.value;if(s.length<=t.maximum)return;const i=ur(s);n.issues.push({origin:i,code:"too_big",maximum:t.maximum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),xc=b("$ZodCheckMinLength",(e,t)=>{var r;K.init(e,t),(r=e._zod.def).when??(r.when=n=>{const s=n.value;return!ir(s)&&s.length!==void 0}),e._zod.onattach.push(n=>{const s=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>s&&(n._zod.bag.minimum=t.minimum)}),e._zod.check=n=>{const s=n.value;if(s.length>=t.minimum)return;const i=ur(s);n.issues.push({origin:i,code:"too_small",minimum:t.minimum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),_c=b("$ZodCheckLengthEquals",(e,t)=>{var r;K.init(e,t),(r=e._zod.def).when??(r.when=n=>{const s=n.value;return!ir(s)&&s.length!==void 0}),e._zod.onattach.push(n=>{const s=n._zod.bag;s.minimum=t.length,s.maximum=t.length,s.length=t.length}),e._zod.check=n=>{const s=n.value,a=s.length;if(a===t.length)return;const i=ur(s),o=a>t.length;n.issues.push({origin:i,...o?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:n.value,inst:e,continue:!t.abort})}}),_t=b("$ZodCheckStringFormat",(e,t)=>{var r,n;K.init(e,t),e._zod.onattach.push(s=>{const a=s._zod.bag;a.format=t.format,t.pattern&&(a.patterns??(a.patterns=new Set),a.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=s=>{t.pattern.lastIndex=0,!t.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:t.format,input:s.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(n=e._zod).check??(n.check=()=>{})}),Sc=b("$ZodCheckRegex",(e,t)=>{_t.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),kc=b("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=gc),_t.init(e,t)}),Ec=b("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=yc),_t.init(e,t)}),Ic=b("$ZodCheckIncludes",(e,t)=>{K.init(e,t);const r=Qe(t.includes),n=new RegExp(typeof t.position=="number"?`^.{${t.position}}${r}`:r);t.pattern=n,e._zod.onattach.push(s=>{const a=s._zod.bag;a.patterns??(a.patterns=new Set),a.patterns.add(n)}),e._zod.check=s=>{s.value.includes(t.includes,t.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:s.value,inst:e,continue:!t.abort})}}),Tc=b("$ZodCheckStartsWith",(e,t)=>{K.init(e,t);const r=new RegExp(`^${Qe(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const s=n._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),e._zod.check=n=>{n.value.startsWith(t.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:n.value,inst:e,continue:!t.abort})}}),Cc=b("$ZodCheckEndsWith",(e,t)=>{K.init(e,t);const r=new RegExp(`.*${Qe(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(n=>{const s=n._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),e._zod.check=n=>{n.value.endsWith(t.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:n.value,inst:e,continue:!t.abort})}}),Oc=b("$ZodCheckOverwrite",(e,t)=>{K.init(e,t),e._zod.check=r=>{r.value=t.tx(r.value)}});class Pc{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const n=t.split(`
`).filter(i=>i),s=Math.min(...n.map(i=>i.length-i.trimStart().length)),a=n.map(i=>i.slice(s)).map(i=>" ".repeat(this.indent*2)+i);for(const i of a)this.content.push(i)}compile(){const t=Function,r=this?.args,s=[...(this?.content??[""]).map(a=>`  ${a}`)];return new t(...r,s.join(`
`))}}const jc={major:4,minor:0,patch:0},D=b("$ZodType",(e,t)=>{var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=jc;const n=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&n.unshift(e);for(const s of n)for(const a of s._zod.onattach)a(e);if(n.length===0)(r=e._zod).deferred??(r.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const s=(a,i,o)=>{let l=Le(a),u;for(const c of i){if(c._zod.def.when){if(!c._zod.def.when(a))continue}else if(l)continue;const d=a.issues.length,v=c._zod.check(a);if(v instanceof Promise&&o?.async===!1)throw new Ve;if(u||v instanceof Promise)u=(u??Promise.resolve()).then(async()=>{await v,a.issues.length!==d&&(l||(l=Le(a,d)))});else{if(a.issues.length===d)continue;l||(l=Le(a,d))}}return u?u.then(()=>a):a};e._zod.run=(a,i)=>{const o=e._zod.parse(a,i);if(o instanceof Promise){if(i.async===!1)throw new Ve;return o.then(l=>s(l,n,i))}return s(o,n,i)}}e["~standard"]={validate:s=>{try{const a=Ui(e,s);return a.success?{value:a.data}:{issues:a.error?.issues}}catch{return Wi(e,s).then(i=>i.success?{value:i.data}:{issues:i.error?.issues})}},vendor:"zod",version:1}}),lr=b("$ZodString",(e,t)=>{D.init(e,t),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??dc(e._zod.bag),e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:e}),r}}),F=b("$ZodStringFormat",(e,t)=>{_t.init(e,t),lr.init(e,t)}),Nc=b("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=Gi),F.init(e,t)}),Mc=b("$ZodUUID",(e,t)=>{if(t.version){const n={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(n===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=Dr(n))}else t.pattern??(t.pattern=Dr());F.init(e,t)}),zc=b("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=Ki),F.init(e,t)}),Ac=b("$ZodURL",(e,t)=>{F.init(e,t),e._zod.check=r=>{try{const n=r.value,s=new URL(n),a=s.href;t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(s.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:oc.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),!n.endsWith("/")&&a.endsWith("/")?r.value=a.slice(0,-1):r.value=a;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),$c=b("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=ec()),F.init(e,t)}),Rc=b("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=Yi),F.init(e,t)}),Dc=b("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=qi),F.init(e,t)}),Zc=b("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=Vi),F.init(e,t)}),Fc=b("$ZodULID",(e,t)=>{t.pattern??(t.pattern=Bi),F.init(e,t)}),Lc=b("$ZodXID",(e,t)=>{t.pattern??(t.pattern=Ji),F.init(e,t)}),Uc=b("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=Hi),F.init(e,t)}),Wc=b("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=lc(t)),F.init(e,t)}),qc=b("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=cc),F.init(e,t)}),Vc=b("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=uc(t)),F.init(e,t)}),Bc=b("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=Qi),F.init(e,t)}),Jc=b("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=tc),F.init(e,t),e._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv4"})}),Hc=b("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=rc),F.init(e,t),e._zod.onattach.push(r=>{const n=r._zod.bag;n.format="ipv6"}),e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),Yc=b("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=nc),F.init(e,t)}),Qc=b("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=sc),F.init(e,t),e._zod.check=r=>{const[n,s]=r.value.split("/");try{if(!s)throw new Error;const a=Number(s);if(`${a}`!==s)throw new Error;if(a<0||a>128)throw new Error;new URL(`http://[${n}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function fs(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const Gc=b("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=ac),F.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64"}),e._zod.check=r=>{fs(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function Kc(e){if(!os.test(e))return!1;const t=e.replace(/[-_]/g,n=>n==="-"?"+":"/"),r=t.padEnd(Math.ceil(t.length/4)*4,"=");return fs(r)}const Xc=b("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=os),F.init(e,t),e._zod.onattach.push(r=>{r._zod.bag.contentEncoding="base64url"}),e._zod.check=r=>{Kc(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),eu=b("$ZodE164",(e,t)=>{t.pattern??(t.pattern=ic),F.init(e,t)});function tu(e,t=null){try{const r=e.split(".");if(r.length!==3)return!1;const[n]=r;if(!n)return!1;const s=JSON.parse(atob(n));return!("typ"in s&&s?.typ!=="JWT"||!s.alg||t&&(!("alg"in s)||s.alg!==t))}catch{return!1}}const ru=b("$ZodJWT",(e,t)=>{F.init(e,t),e._zod.check=r=>{tu(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),hs=b("$ZodNumber",(e,t)=>{D.init(e,t),e._zod.pattern=e._zod.bag.pattern??hc,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=Number(r.value)}catch{}const s=r.value;if(typeof s=="number"&&!Number.isNaN(s)&&Number.isFinite(s))return r;const a=typeof s=="number"?Number.isNaN(s)?"NaN":Number.isFinite(s)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:s,inst:e,...a?{received:a}:{}}),r}}),nu=b("$ZodNumber",(e,t)=>{bc.init(e,t),hs.init(e,t)}),su=b("$ZodBoolean",(e,t)=>{D.init(e,t),e._zod.pattern=pc,e._zod.parse=(r,n)=>{if(t.coerce)try{r.value=!!r.value}catch{}const s=r.value;return typeof s=="boolean"||r.issues.push({expected:"boolean",code:"invalid_type",input:s,inst:e}),r}}),au=b("$ZodNull",(e,t)=>{D.init(e,t),e._zod.pattern=mc,e._zod.values=new Set([null]),e._zod.parse=(r,n)=>{const s=r.value;return s===null||r.issues.push({expected:"null",code:"invalid_type",input:s,inst:e}),r}}),ou=b("$ZodUnknown",(e,t)=>{D.init(e,t),e._zod.parse=r=>r}),iu=b("$ZodNever",(e,t)=>{D.init(e,t),e._zod.parse=(r,n)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)});function Zr(e,t,r){e.issues.length&&t.issues.push(...xe(r,e.issues)),t.value[r]=e.value}const cu=b("$ZodArray",(e,t)=>{D.init(e,t),e._zod.parse=(r,n)=>{const s=r.value;if(!Array.isArray(s))return r.issues.push({expected:"array",code:"invalid_type",input:s,inst:e}),r;r.value=Array(s.length);const a=[];for(let i=0;i<s.length;i++){const o=s[i],l=t.element._zod.run({value:o,issues:[]},n);l instanceof Promise?a.push(l.then(u=>Zr(u,r,i))):Zr(l,r,i)}return a.length?Promise.all(a).then(()=>r):r}});function rt(e,t,r){e.issues.length&&t.issues.push(...xe(r,e.issues)),t.value[r]=e.value}function Fr(e,t,r,n){e.issues.length?n[r]===void 0?r in n?t.value[r]=void 0:t.value[r]=e.value:t.issues.push(...xe(r,e.issues)):e.value===void 0?r in n&&(t.value[r]=void 0):t.value[r]=e.value}const uu=b("$ZodObject",(e,t)=>{D.init(e,t);const r=or(()=>{const d=Object.keys(t.shape);for(const h of d)if(!(t.shape[h]instanceof D))throw new Error(`Invalid element at key "${h}": expected a Zod schema`);const v=Pi(t.shape);return{shape:t.shape,keys:d,keySet:new Set(d),numKeys:d.length,optionalKeys:new Set(v)}});z(e._zod,"propValues",()=>{const d=t.shape,v={};for(const h in d){const p=d[h]._zod;if(p.values){v[h]??(v[h]=new Set);for(const m of p.values)v[h].add(m)}}return v});const n=d=>{const v=new Pc(["shape","payload","ctx"]),h=r.value,p=_=>{const w=Ae(_);return`shape[${w}]._zod.run({ value: input[${w}], issues: [] }, ctx)`};v.write("const input = payload.value;");const m=Object.create(null);let y=0;for(const _ of h.keys)m[_]=`key_${y++}`;v.write("const newResult = {}");for(const _ of h.keys)if(h.optionalKeys.has(_)){const w=m[_];v.write(`const ${w} = ${p(_)};`);const g=Ae(_);v.write(`
        if (${w}.issues.length) {
          if (input[${g}] === undefined) {
            if (${g} in input) {
              newResult[${g}] = undefined;
            }
          } else {
            payload.issues = payload.issues.concat(
              ${w}.issues.map((iss) => ({
                ...iss,
                path: iss.path ? [${g}, ...iss.path] : [${g}],
              }))
            );
          }
        } else if (${w}.value === undefined) {
          if (${g} in input) newResult[${g}] = undefined;
        } else {
          newResult[${g}] = ${w}.value;
        }
        `)}else{const w=m[_];v.write(`const ${w} = ${p(_)};`),v.write(`
          if (${w}.issues.length) payload.issues = payload.issues.concat(${w}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${Ae(_)}, ...iss.path] : [${Ae(_)}]
          })));`),v.write(`newResult[${Ae(_)}] = ${w}.value`)}v.write("payload.value = newResult;"),v.write("return payload;");const x=v.compile();return(_,w)=>x(d,_,w)};let s;const a=ht,i=!Kn.jitless,l=i&&Ci.value,u=t.catchall;let c;e._zod.parse=(d,v)=>{c??(c=r.value);const h=d.value;if(!a(h))return d.issues.push({expected:"object",code:"invalid_type",input:h,inst:e}),d;const p=[];if(i&&l&&v?.async===!1&&v.jitless!==!0)s||(s=n(t.shape)),d=s(d,v);else{d.value={};const w=c.shape;for(const g of c.keys){const I=w[g],T=I._zod.run({value:h[g],issues:[]},v),C=I._zod.optin==="optional"&&I._zod.optout==="optional";T instanceof Promise?p.push(T.then(O=>C?Fr(O,d,g,h):rt(O,d,g))):C?Fr(T,d,g,h):rt(T,d,g)}}if(!u)return p.length?Promise.all(p).then(()=>d):d;const m=[],y=c.keySet,x=u._zod,_=x.def.type;for(const w of Object.keys(h)){if(y.has(w))continue;if(_==="never"){m.push(w);continue}const g=x.run({value:h[w],issues:[]},v);g instanceof Promise?p.push(g.then(I=>rt(I,d,w))):rt(g,d,w)}return m.length&&d.issues.push({code:"unrecognized_keys",keys:m,input:h,inst:e}),p.length?Promise.all(p).then(()=>d):d}});function Lr(e,t,r,n){for(const s of e)if(s.issues.length===0)return t.value=s.value,t;return t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(s=>s.issues.map(a=>ye(a,n,ge())))}),t}const ps=b("$ZodUnion",(e,t)=>{D.init(e,t),z(e._zod,"optin",()=>t.options.some(r=>r._zod.optin==="optional")?"optional":void 0),z(e._zod,"optout",()=>t.options.some(r=>r._zod.optout==="optional")?"optional":void 0),z(e._zod,"values",()=>{if(t.options.every(r=>r._zod.values))return new Set(t.options.flatMap(r=>Array.from(r._zod.values)))}),z(e._zod,"pattern",()=>{if(t.options.every(r=>r._zod.pattern)){const r=t.options.map(n=>n._zod.pattern);return new RegExp(`^(${r.map(n=>cr(n.source)).join("|")})$`)}}),e._zod.parse=(r,n)=>{let s=!1;const a=[];for(const i of t.options){const o=i._zod.run({value:r.value,issues:[]},n);if(o instanceof Promise)a.push(o),s=!0;else{if(o.issues.length===0)return o;a.push(o)}}return s?Promise.all(a).then(i=>Lr(i,r,e,n)):Lr(a,r,e,n)}}),lu=b("$ZodDiscriminatedUnion",(e,t)=>{ps.init(e,t);const r=e._zod.parse;z(e._zod,"propValues",()=>{const s={};for(const a of t.options){const i=a._zod.propValues;if(!i||Object.keys(i).length===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(a)}"`);for(const[o,l]of Object.entries(i)){s[o]||(s[o]=new Set);for(const u of l)s[o].add(u)}}return s});const n=or(()=>{const s=t.options,a=new Map;for(const i of s){const o=i._zod.propValues[t.discriminator];if(!o||o.size===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(i)}"`);for(const l of o){if(a.has(l))throw new Error(`Duplicate discriminator value "${String(l)}"`);a.set(l,i)}}return a});e._zod.parse=(s,a)=>{const i=s.value;if(!ht(i))return s.issues.push({code:"invalid_type",expected:"object",input:i,inst:e}),s;const o=n.value.get(i?.[t.discriminator]);return o?o._zod.run(s,a):t.unionFallback?r(s,a):(s.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",input:i,path:[t.discriminator],inst:e}),s)}}),du=b("$ZodIntersection",(e,t)=>{D.init(e,t),e._zod.parse=(r,n)=>{const s=r.value,a=t.left._zod.run({value:s,issues:[]},n),i=t.right._zod.run({value:s,issues:[]},n);return a instanceof Promise||i instanceof Promise?Promise.all([a,i]).then(([l,u])=>Ur(r,l,u)):Ur(r,a,i)}});function Zt(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(pt(e)&&pt(t)){const r=Object.keys(t),n=Object.keys(e).filter(a=>r.indexOf(a)!==-1),s={...e,...t};for(const a of n){const i=Zt(e[a],t[a]);if(!i.valid)return{valid:!1,mergeErrorPath:[a,...i.mergeErrorPath]};s[a]=i.data}return{valid:!0,data:s}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let n=0;n<e.length;n++){const s=e[n],a=t[n],i=Zt(s,a);if(!i.valid)return{valid:!1,mergeErrorPath:[n,...i.mergeErrorPath]};r.push(i.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function Ur(e,t,r){if(t.issues.length&&e.issues.push(...t.issues),r.issues.length&&e.issues.push(...r.issues),Le(e))return e;const n=Zt(t.value,r.value);if(!n.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return e.value=n.data,e}const fu=b("$ZodRecord",(e,t)=>{D.init(e,t),e._zod.parse=(r,n)=>{const s=r.value;if(!pt(s))return r.issues.push({expected:"record",code:"invalid_type",input:s,inst:e}),r;const a=[];if(t.keyType._zod.values){const i=t.keyType._zod.values;r.value={};for(const l of i)if(typeof l=="string"||typeof l=="number"||typeof l=="symbol"){const u=t.valueType._zod.run({value:s[l],issues:[]},n);u instanceof Promise?a.push(u.then(c=>{c.issues.length&&r.issues.push(...xe(l,c.issues)),r.value[l]=c.value})):(u.issues.length&&r.issues.push(...xe(l,u.issues)),r.value[l]=u.value)}let o;for(const l in s)i.has(l)||(o=o??[],o.push(l));o&&o.length>0&&r.issues.push({code:"unrecognized_keys",input:s,inst:e,keys:o})}else{r.value={};for(const i of Reflect.ownKeys(s)){if(i==="__proto__")continue;const o=t.keyType._zod.run({value:i,issues:[]},n);if(o instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(o.issues.length){r.issues.push({origin:"record",code:"invalid_key",issues:o.issues.map(u=>ye(u,n,ge())),input:i,path:[i],inst:e}),r.value[o.value]=o.value;continue}const l=t.valueType._zod.run({value:s[i],issues:[]},n);l instanceof Promise?a.push(l.then(u=>{u.issues.length&&r.issues.push(...xe(i,u.issues)),r.value[o.value]=u.value})):(l.issues.length&&r.issues.push(...xe(i,l.issues)),r.value[o.value]=l.value)}}return a.length?Promise.all(a).then(()=>r):r}}),hu=b("$ZodEnum",(e,t)=>{D.init(e,t);const r=Xn(t.entries);e._zod.values=new Set(r),e._zod.pattern=new RegExp(`^(${r.filter(n=>Oi.has(typeof n)).map(n=>typeof n=="string"?Qe(n):n.toString()).join("|")})$`),e._zod.parse=(n,s)=>{const a=n.value;return e._zod.values.has(a)||n.issues.push({code:"invalid_value",values:r,input:a,inst:e}),n}}),pu=b("$ZodLiteral",(e,t)=>{D.init(e,t),e._zod.values=new Set(t.values),e._zod.pattern=new RegExp(`^(${t.values.map(r=>typeof r=="string"?Qe(r):r?r.toString():String(r)).join("|")})$`),e._zod.parse=(r,n)=>{const s=r.value;return e._zod.values.has(s)||r.issues.push({code:"invalid_value",values:t.values,input:s,inst:e}),r}}),mu=b("$ZodTransform",(e,t)=>{D.init(e,t),e._zod.parse=(r,n)=>{const s=t.transform(r.value,r);if(n.async)return(s instanceof Promise?s:Promise.resolve(s)).then(i=>(r.value=i,r));if(s instanceof Promise)throw new Ve;return r.value=s,r}}),gu=b("$ZodOptional",(e,t)=>{D.init(e,t),e._zod.optin="optional",e._zod.optout="optional",z(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),z(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${cr(r.source)})?$`):void 0}),e._zod.parse=(r,n)=>t.innerType._zod.optin==="optional"?t.innerType._zod.run(r,n):r.value===void 0?r:t.innerType._zod.run(r,n)}),yu=b("$ZodNullable",(e,t)=>{D.init(e,t),z(e._zod,"optin",()=>t.innerType._zod.optin),z(e._zod,"optout",()=>t.innerType._zod.optout),z(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${cr(r.source)}|null)$`):void 0}),z(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(r,n)=>r.value===null?r:t.innerType._zod.run(r,n)}),vu=b("$ZodDefault",(e,t)=>{D.init(e,t),e._zod.optin="optional",z(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{if(r.value===void 0)return r.value=t.defaultValue,r;const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(a=>Wr(a,t)):Wr(s,t)}});function Wr(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const bu=b("$ZodPrefault",(e,t)=>{D.init(e,t),e._zod.optin="optional",z(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>(r.value===void 0&&(r.value=t.defaultValue),t.innerType._zod.run(r,n))}),wu=b("$ZodNonOptional",(e,t)=>{D.init(e,t),z(e._zod,"values",()=>{const r=t.innerType._zod.values;return r?new Set([...r].filter(n=>n!==void 0)):void 0}),e._zod.parse=(r,n)=>{const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(a=>qr(a,e)):qr(s,e)}});function qr(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const xu=b("$ZodCatch",(e,t)=>{D.init(e,t),e._zod.optin="optional",z(e._zod,"optout",()=>t.innerType._zod.optout),z(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,n)=>{const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(a=>(r.value=a.value,a.issues.length&&(r.value=t.catchValue({...r,error:{issues:a.issues.map(i=>ye(i,n,ge()))},input:r.value}),r.issues=[]),r)):(r.value=s.value,s.issues.length&&(r.value=t.catchValue({...r,error:{issues:s.issues.map(a=>ye(a,n,ge()))},input:r.value}),r.issues=[]),r)}}),_u=b("$ZodPipe",(e,t)=>{D.init(e,t),z(e._zod,"values",()=>t.in._zod.values),z(e._zod,"optin",()=>t.in._zod.optin),z(e._zod,"optout",()=>t.out._zod.optout),e._zod.parse=(r,n)=>{const s=t.in._zod.run(r,n);return s instanceof Promise?s.then(a=>Vr(a,t,n)):Vr(s,t,n)}});function Vr(e,t,r){return Le(e)?e:t.out._zod.run({value:e.value,issues:e.issues},r)}const Su=b("$ZodReadonly",(e,t)=>{D.init(e,t),z(e._zod,"propValues",()=>t.innerType._zod.propValues),z(e._zod,"values",()=>t.innerType._zod.values),z(e._zod,"optin",()=>t.innerType._zod.optin),z(e._zod,"optout",()=>t.innerType._zod.optout),e._zod.parse=(r,n)=>{const s=t.innerType._zod.run(r,n);return s instanceof Promise?s.then(Br):Br(s)}});function Br(e){return e.value=Object.freeze(e.value),e}const ku=b("$ZodLazy",(e,t)=>{D.init(e,t),z(e._zod,"innerType",()=>t.getter()),z(e._zod,"pattern",()=>e._zod.innerType._zod.pattern),z(e._zod,"propValues",()=>e._zod.innerType._zod.propValues),z(e._zod,"optin",()=>e._zod.innerType._zod.optin),z(e._zod,"optout",()=>e._zod.innerType._zod.optout),e._zod.parse=(r,n)=>e._zod.innerType._zod.run(r,n)}),Eu=b("$ZodCustom",(e,t)=>{K.init(e,t),D.init(e,t),e._zod.parse=(r,n)=>r,e._zod.check=r=>{const n=r.value,s=t.fn(n);if(s instanceof Promise)return s.then(a=>Jr(a,r,n,e));Jr(s,r,n,e)}});function Jr(e,t,r,n){if(!e){const s={code:"custom",input:r,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(s.params=n._zod.def.params),t.issues.push(Be(s))}}class ms{constructor(){this._map=new Map,this._idmap=new Map}add(t,...r){const n=r[0];if(this._map.set(t,n),n&&typeof n=="object"&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,t)}return this}clear(){return this._map=new Map,this._idmap=new Map,this}remove(t){const r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){const r=t._zod.parent;if(r){const n={...this.get(r)??{}};return delete n.id,{...n,...this._map.get(t)}}return this._map.get(t)}has(t){return this._map.has(t)}}function Iu(){return new ms}const Re=Iu();function Tu(e,t){return new e({type:"string",...S(t)})}function Cu(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...S(t)})}function Hr(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...S(t)})}function Ou(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...S(t)})}function Pu(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...S(t)})}function ju(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...S(t)})}function Nu(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...S(t)})}function Mu(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...S(t)})}function zu(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...S(t)})}function Au(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...S(t)})}function $u(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...S(t)})}function Ru(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...S(t)})}function Du(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...S(t)})}function Zu(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...S(t)})}function Fu(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...S(t)})}function Lu(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...S(t)})}function Uu(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...S(t)})}function Wu(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...S(t)})}function qu(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...S(t)})}function Vu(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...S(t)})}function Bu(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...S(t)})}function Ju(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...S(t)})}function Hu(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...S(t)})}function Yu(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...S(t)})}function Qu(e,t){return new e({type:"string",format:"date",check:"string_format",...S(t)})}function Gu(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...S(t)})}function Ku(e,t){return new e({type:"string",format:"duration",check:"string_format",...S(t)})}function Xu(e,t){return new e({type:"number",checks:[],...S(t)})}function el(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...S(t)})}function tl(e,t){return new e({type:"boolean",...S(t)})}function rl(e,t){return new e({type:"null",...S(t)})}function nl(e){return new e({type:"unknown"})}function sl(e,t){return new e({type:"never",...S(t)})}function Yr(e,t){return new ls({check:"less_than",...S(t),value:e,inclusive:!1})}function Nt(e,t){return new ls({check:"less_than",...S(t),value:e,inclusive:!0})}function Qr(e,t){return new ds({check:"greater_than",...S(t),value:e,inclusive:!1})}function Mt(e,t){return new ds({check:"greater_than",...S(t),value:e,inclusive:!0})}function Gr(e,t){return new vc({check:"multiple_of",...S(t),value:e})}function gs(e,t){return new wc({check:"max_length",...S(t),maximum:e})}function mt(e,t){return new xc({check:"min_length",...S(t),minimum:e})}function ys(e,t){return new _c({check:"length_equals",...S(t),length:e})}function al(e,t){return new Sc({check:"string_format",format:"regex",...S(t),pattern:e})}function ol(e){return new kc({check:"string_format",format:"lowercase",...S(e)})}function il(e){return new Ec({check:"string_format",format:"uppercase",...S(e)})}function cl(e,t){return new Ic({check:"string_format",format:"includes",...S(t),includes:e})}function ul(e,t){return new Tc({check:"string_format",format:"starts_with",...S(t),prefix:e})}function ll(e,t){return new Cc({check:"string_format",format:"ends_with",...S(t),suffix:e})}function Ge(e){return new Oc({check:"overwrite",tx:e})}function dl(e){return Ge(t=>t.normalize(e))}function fl(){return Ge(e=>e.trim())}function hl(){return Ge(e=>e.toLowerCase())}function pl(){return Ge(e=>e.toUpperCase())}function ml(e,t,r){return new e({type:"array",element:t,...S(r)})}function gl(e,t,r){const n=S(r);return n.abort??(n.abort=!0),new e({type:"custom",check:"custom",fn:t,...n})}function yl(e,t,r){return new e({type:"custom",check:"custom",fn:t,...S(r)})}class Kr{constructor(t){this.counter=0,this.metadataRegistry=t?.metadata??Re,this.target=t?.target??"draft-2020-12",this.unrepresentable=t?.unrepresentable??"throw",this.override=t?.override??(()=>{}),this.io=t?.io??"output",this.seen=new Map}process(t,r={path:[],schemaPath:[]}){var n;const s=t._zod.def,a={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},i=this.seen.get(t);if(i)return i.count++,r.schemaPath.includes(t)&&(i.cycle=r.path),i.schema;const o={schema:{},count:1,cycle:void 0,path:r.path};this.seen.set(t,o);const l=t._zod.toJSONSchema?.();if(l)o.schema=l;else{const d={...r,schemaPath:[...r.schemaPath,t],path:r.path},v=t._zod.parent;if(v)o.ref=v,this.process(v,d),this.seen.get(v).isParent=!0;else{const h=o.schema;switch(s.type){case"string":{const p=h;p.type="string";const{minimum:m,maximum:y,format:x,patterns:_,contentEncoding:w}=t._zod.bag;if(typeof m=="number"&&(p.minLength=m),typeof y=="number"&&(p.maxLength=y),x&&(p.format=a[x]??x,p.format===""&&delete p.format),w&&(p.contentEncoding=w),_&&_.size>0){const g=[..._];g.length===1?p.pattern=g[0].source:g.length>1&&(o.schema.allOf=[...g.map(I=>({...this.target==="draft-7"?{type:"string"}:{},pattern:I.source}))])}break}case"number":{const p=h,{minimum:m,maximum:y,format:x,multipleOf:_,exclusiveMaximum:w,exclusiveMinimum:g}=t._zod.bag;typeof x=="string"&&x.includes("int")?p.type="integer":p.type="number",typeof g=="number"&&(p.exclusiveMinimum=g),typeof m=="number"&&(p.minimum=m,typeof g=="number"&&(g>=m?delete p.minimum:delete p.exclusiveMinimum)),typeof w=="number"&&(p.exclusiveMaximum=w),typeof y=="number"&&(p.maximum=y,typeof w=="number"&&(w<=y?delete p.maximum:delete p.exclusiveMaximum)),typeof _=="number"&&(p.multipleOf=_);break}case"boolean":{const p=h;p.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema");break}case"null":{h.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema");break}case"never":{h.not={};break}case"date":{if(this.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema");break}case"array":{const p=h,{minimum:m,maximum:y}=t._zod.bag;typeof m=="number"&&(p.minItems=m),typeof y=="number"&&(p.maxItems=y),p.type="array",p.items=this.process(s.element,{...d,path:[...d.path,"items"]});break}case"object":{const p=h;p.type="object",p.properties={};const m=s.shape;for(const _ in m)p.properties[_]=this.process(m[_],{...d,path:[...d.path,"properties",_]});const y=new Set(Object.keys(m)),x=new Set([...y].filter(_=>{const w=s.shape[_]._zod;return this.io==="input"?w.optin===void 0:w.optout===void 0}));x.size>0&&(p.required=Array.from(x)),s.catchall?._zod.def.type==="never"?p.additionalProperties=!1:s.catchall?s.catchall&&(p.additionalProperties=this.process(s.catchall,{...d,path:[...d.path,"additionalProperties"]})):this.io==="output"&&(p.additionalProperties=!1);break}case"union":{const p=h;p.anyOf=s.options.map((m,y)=>this.process(m,{...d,path:[...d.path,"anyOf",y]}));break}case"intersection":{const p=h,m=this.process(s.left,{...d,path:[...d.path,"allOf",0]}),y=this.process(s.right,{...d,path:[...d.path,"allOf",1]}),x=w=>"allOf"in w&&Object.keys(w).length===1,_=[...x(m)?m.allOf:[m],...x(y)?y.allOf:[y]];p.allOf=_;break}case"tuple":{const p=h;p.type="array";const m=s.items.map((_,w)=>this.process(_,{...d,path:[...d.path,"prefixItems",w]}));if(this.target==="draft-2020-12"?p.prefixItems=m:p.items=m,s.rest){const _=this.process(s.rest,{...d,path:[...d.path,"items"]});this.target==="draft-2020-12"?p.items=_:p.additionalItems=_}s.rest&&(p.items=this.process(s.rest,{...d,path:[...d.path,"items"]}));const{minimum:y,maximum:x}=t._zod.bag;typeof y=="number"&&(p.minItems=y),typeof x=="number"&&(p.maxItems=x);break}case"record":{const p=h;p.type="object",p.propertyNames=this.process(s.keyType,{...d,path:[...d.path,"propertyNames"]}),p.additionalProperties=this.process(s.valueType,{...d,path:[...d.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema");break}case"enum":{const p=h,m=Xn(s.entries);m.every(y=>typeof y=="number")&&(p.type="number"),m.every(y=>typeof y=="string")&&(p.type="string"),p.enum=m;break}case"literal":{const p=h,m=[];for(const y of s.values)if(y===void 0){if(this.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof y=="bigint"){if(this.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");m.push(Number(y))}else m.push(y);if(m.length!==0)if(m.length===1){const y=m[0];p.type=y===null?"null":typeof y,p.const=y}else m.every(y=>typeof y=="number")&&(p.type="number"),m.every(y=>typeof y=="string")&&(p.type="string"),m.every(y=>typeof y=="boolean")&&(p.type="string"),m.every(y=>y===null)&&(p.type="null"),p.enum=m;break}case"file":{const p=h,m={type:"string",format:"binary",contentEncoding:"binary"},{minimum:y,maximum:x,mime:_}=t._zod.bag;y!==void 0&&(m.minLength=y),x!==void 0&&(m.maxLength=x),_?_.length===1?(m.contentMediaType=_[0],Object.assign(p,m)):p.anyOf=_.map(w=>({...m,contentMediaType:w})):Object.assign(p,m);break}case"transform":{if(this.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{const p=this.process(s.innerType,d);h.anyOf=[p,{type:"null"}];break}case"nonoptional":{this.process(s.innerType,d),o.ref=s.innerType;break}case"success":{const p=h;p.type="boolean";break}case"default":{this.process(s.innerType,d),o.ref=s.innerType,h.default=JSON.parse(JSON.stringify(s.defaultValue));break}case"prefault":{this.process(s.innerType,d),o.ref=s.innerType,this.io==="input"&&(h._prefault=JSON.parse(JSON.stringify(s.defaultValue)));break}case"catch":{this.process(s.innerType,d),o.ref=s.innerType;let p;try{p=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}h.default=p;break}case"nan":{if(this.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{const p=h,m=t._zod.pattern;if(!m)throw new Error("Pattern not found in template literal");p.type="string",p.pattern=m.source;break}case"pipe":{const p=this.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;this.process(p,d),o.ref=p;break}case"readonly":{this.process(s.innerType,d),o.ref=s.innerType,h.readOnly=!0;break}case"promise":{this.process(s.innerType,d),o.ref=s.innerType;break}case"optional":{this.process(s.innerType,d),o.ref=s.innerType;break}case"lazy":{const p=t._zod.innerType;this.process(p,d),o.ref=p;break}case"custom":{if(this.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema");break}}}}const u=this.metadataRegistry.get(t);return u&&Object.assign(o.schema,u),this.io==="input"&&V(t)&&(delete o.schema.examples,delete o.schema.default),this.io==="input"&&o.schema._prefault&&((n=o.schema).default??(n.default=o.schema._prefault)),delete o.schema._prefault,this.seen.get(t).schema}emit(t,r){const n={cycles:r?.cycles??"ref",reused:r?.reused??"inline",external:r?.external??void 0},s=this.seen.get(t);if(!s)throw new Error("Unprocessed schema. This is a bug in Zod.");const a=c=>{const d=this.target==="draft-2020-12"?"$defs":"definitions";if(n.external){const m=n.external.registry.get(c[0])?.id,y=n.external.uri??(_=>_);if(m)return{ref:y(m)};const x=c[1].defId??c[1].schema.id??`schema${this.counter++}`;return c[1].defId=x,{defId:x,ref:`${y("__shared")}#/${d}/${x}`}}if(c[1]===s)return{ref:"#"};const h=`#/${d}/`,p=c[1].schema.id??`__schema${this.counter++}`;return{defId:p,ref:h+p}},i=c=>{if(c[1].schema.$ref)return;const d=c[1],{ref:v,defId:h}=a(c);d.def={...d.schema},h&&(d.defId=h);const p=d.schema;for(const m in p)delete p[m];p.$ref=v};if(n.cycles==="throw")for(const c of this.seen.entries()){const d=c[1];if(d.cycle)throw new Error(`Cycle detected: #/${d.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const c of this.seen.entries()){const d=c[1];if(t===c[0]){i(c);continue}if(n.external){const h=n.external.registry.get(c[0])?.id;if(t!==c[0]&&h){i(c);continue}}if(this.metadataRegistry.get(c[0])?.id){i(c);continue}if(d.cycle){i(c);continue}if(d.count>1&&n.reused==="ref"){i(c);continue}}const o=(c,d)=>{const v=this.seen.get(c),h=v.def??v.schema,p={...h};if(v.ref===null)return;const m=v.ref;if(v.ref=null,m){o(m,d);const y=this.seen.get(m).schema;y.$ref&&d.target==="draft-7"?(h.allOf=h.allOf??[],h.allOf.push(y)):(Object.assign(h,y),Object.assign(h,p))}v.isParent||this.override({zodSchema:c,jsonSchema:h,path:v.path??[]})};for(const c of[...this.seen.entries()].reverse())o(c[0],{target:this.target});const l={};if(this.target==="draft-2020-12"?l.$schema="https://json-schema.org/draft/2020-12/schema":this.target==="draft-7"?l.$schema="http://json-schema.org/draft-07/schema#":console.warn(`Invalid target: ${this.target}`),n.external?.uri){const c=n.external.registry.get(t)?.id;if(!c)throw new Error("Schema is missing an `id` property");l.$id=n.external.uri(c)}Object.assign(l,s.def);const u=n.external?.defs??{};for(const c of this.seen.entries()){const d=c[1];d.def&&d.defId&&(u[d.defId]=d.def)}n.external||Object.keys(u).length>0&&(this.target==="draft-2020-12"?l.$defs=u:l.definitions=u);try{return JSON.parse(JSON.stringify(l))}catch{throw new Error("Error converting schema to JSON.")}}}function vl(e,t){if(e instanceof ms){const n=new Kr(t),s={};for(const o of e._idmap.entries()){const[l,u]=o;n.process(u)}const a={},i={registry:e,uri:t?.uri,defs:s};for(const o of e._idmap.entries()){const[l,u]=o;a[l]=n.emit(u,{...t,external:i})}if(Object.keys(s).length>0){const o=n.target==="draft-2020-12"?"$defs":"definitions";a.__shared={[o]:s}}return{schemas:a}}const r=new Kr(t);return r.process(e),r.emit(e,t)}function V(e,t){const r=t??{seen:new Set};if(r.seen.has(e))return!1;r.seen.add(e);const s=e._zod.def;switch(s.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":return!1;case"array":return V(s.element,r);case"object":{for(const a in s.shape)if(V(s.shape[a],r))return!0;return!1}case"union":{for(const a of s.options)if(V(a,r))return!0;return!1}case"intersection":return V(s.left,r)||V(s.right,r);case"tuple":{for(const a of s.items)if(V(a,r))return!0;return!!(s.rest&&V(s.rest,r))}case"record":return V(s.keyType,r)||V(s.valueType,r);case"map":return V(s.keyType,r)||V(s.valueType,r);case"set":return V(s.valueType,r);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":return V(s.innerType,r);case"lazy":return V(s.getter(),r);case"default":return V(s.innerType,r);case"prefault":return V(s.innerType,r);case"custom":return!1;case"transform":return!0;case"pipe":return V(s.in,r)||V(s.out,r);case"success":return!1;case"catch":return!1}throw new Error(`Unknown schema type: ${s.type}`)}const bl=b("ZodISODateTime",(e,t)=>{Wc.init(e,t),W.init(e,t)});function wl(e){return Yu(bl,e)}const xl=b("ZodISODate",(e,t)=>{qc.init(e,t),W.init(e,t)});function _l(e){return Qu(xl,e)}const Sl=b("ZodISOTime",(e,t)=>{Vc.init(e,t),W.init(e,t)});function kl(e){return Gu(Sl,e)}const El=b("ZodISODuration",(e,t)=>{Bc.init(e,t),W.init(e,t)});function Il(e){return Ku(El,e)}const Tl=(e,t)=>{rs.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>Zi(e,r)},flatten:{value:r=>Di(e,r)},addIssue:{value:r=>e.issues.push(r)},addIssues:{value:r=>e.issues.push(...r)},isEmpty:{get(){return e.issues.length===0}}})},St=b("ZodError",Tl,{Parent:Error}),Cl=Fi(St),Ol=Li(St),Pl=ss(St),vs=as(St),L=b("ZodType",(e,t)=>(D.init(e,t),e.def=t,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone({...t,checks:[...t.checks??[],...r.map(n=>typeof n=="function"?{_zod:{check:n,def:{check:"custom"},onattach:[]}}:n)]}),e.clone=(r,n)=>_e(e,r,n),e.brand=()=>e,e.register=((r,n)=>(r.add(e,n),e)),e.parse=(r,n)=>Cl(e,r,n,{callee:e.parse}),e.safeParse=(r,n)=>Pl(e,r,n),e.parseAsync=async(r,n)=>Ol(e,r,n,{callee:e.parseAsync}),e.safeParseAsync=async(r,n)=>vs(e,r,n),e.spa=e.safeParseAsync,e.refine=(r,n)=>e.check(Ed(r,n)),e.superRefine=r=>e.check(Id(r)),e.overwrite=r=>e.check(Ge(r)),e.optional=()=>tn(e),e.nullable=()=>rn(e),e.nullish=()=>tn(rn(e)),e.nonoptional=r=>gd(e,r),e.array=()=>Ce(e),e.or=r=>re([e,r]),e.and=r=>od(e,r),e.transform=r=>nn(e,ld(r)),e.default=r=>hd(e,r),e.prefault=r=>md(e,r),e.catch=r=>vd(e,r),e.pipe=r=>nn(e,r),e.readonly=()=>xd(e),e.describe=r=>{const n=e.clone();return Re.add(n,{description:r}),n},Object.defineProperty(e,"description",{get(){return Re.get(e)?.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return Re.get(e);const n=e.clone();return Re.add(n,r[0]),n},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),bs=b("_ZodString",(e,t)=>{lr.init(e,t),L.init(e,t);const r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...n)=>e.check(al(...n)),e.includes=(...n)=>e.check(cl(...n)),e.startsWith=(...n)=>e.check(ul(...n)),e.endsWith=(...n)=>e.check(ll(...n)),e.min=(...n)=>e.check(mt(...n)),e.max=(...n)=>e.check(gs(...n)),e.length=(...n)=>e.check(ys(...n)),e.nonempty=(...n)=>e.check(mt(1,...n)),e.lowercase=n=>e.check(ol(n)),e.uppercase=n=>e.check(il(n)),e.trim=()=>e.check(fl()),e.normalize=(...n)=>e.check(dl(...n)),e.toLowerCase=()=>e.check(hl()),e.toUpperCase=()=>e.check(pl())}),jl=b("ZodString",(e,t)=>{lr.init(e,t),bs.init(e,t),e.email=r=>e.check(Cu(Nl,r)),e.url=r=>e.check(Mu(Ml,r)),e.jwt=r=>e.check(Hu(Hl,r)),e.emoji=r=>e.check(zu(zl,r)),e.guid=r=>e.check(Hr(Xr,r)),e.uuid=r=>e.check(Ou(nt,r)),e.uuidv4=r=>e.check(Pu(nt,r)),e.uuidv6=r=>e.check(ju(nt,r)),e.uuidv7=r=>e.check(Nu(nt,r)),e.nanoid=r=>e.check(Au(Al,r)),e.guid=r=>e.check(Hr(Xr,r)),e.cuid=r=>e.check($u($l,r)),e.cuid2=r=>e.check(Ru(Rl,r)),e.ulid=r=>e.check(Du(Dl,r)),e.base64=r=>e.check(Vu(Vl,r)),e.base64url=r=>e.check(Bu(Bl,r)),e.xid=r=>e.check(Zu(Zl,r)),e.ksuid=r=>e.check(Fu(Fl,r)),e.ipv4=r=>e.check(Lu(Ll,r)),e.ipv6=r=>e.check(Uu(Ul,r)),e.cidrv4=r=>e.check(Wu(Wl,r)),e.cidrv6=r=>e.check(qu(ql,r)),e.e164=r=>e.check(Ju(Jl,r)),e.datetime=r=>e.check(wl(r)),e.date=r=>e.check(_l(r)),e.time=r=>e.check(kl(r)),e.duration=r=>e.check(Il(r))});function E(e){return Tu(jl,e)}const W=b("ZodStringFormat",(e,t)=>{F.init(e,t),bs.init(e,t)}),Nl=b("ZodEmail",(e,t)=>{zc.init(e,t),W.init(e,t)}),Xr=b("ZodGUID",(e,t)=>{Nc.init(e,t),W.init(e,t)}),nt=b("ZodUUID",(e,t)=>{Mc.init(e,t),W.init(e,t)}),Ml=b("ZodURL",(e,t)=>{Ac.init(e,t),W.init(e,t)}),zl=b("ZodEmoji",(e,t)=>{$c.init(e,t),W.init(e,t)}),Al=b("ZodNanoID",(e,t)=>{Rc.init(e,t),W.init(e,t)}),$l=b("ZodCUID",(e,t)=>{Dc.init(e,t),W.init(e,t)}),Rl=b("ZodCUID2",(e,t)=>{Zc.init(e,t),W.init(e,t)}),Dl=b("ZodULID",(e,t)=>{Fc.init(e,t),W.init(e,t)}),Zl=b("ZodXID",(e,t)=>{Lc.init(e,t),W.init(e,t)}),Fl=b("ZodKSUID",(e,t)=>{Uc.init(e,t),W.init(e,t)}),Ll=b("ZodIPv4",(e,t)=>{Jc.init(e,t),W.init(e,t)}),Ul=b("ZodIPv6",(e,t)=>{Hc.init(e,t),W.init(e,t)}),Wl=b("ZodCIDRv4",(e,t)=>{Yc.init(e,t),W.init(e,t)}),ql=b("ZodCIDRv6",(e,t)=>{Qc.init(e,t),W.init(e,t)}),Vl=b("ZodBase64",(e,t)=>{Gc.init(e,t),W.init(e,t)}),Bl=b("ZodBase64URL",(e,t)=>{Xc.init(e,t),W.init(e,t)}),Jl=b("ZodE164",(e,t)=>{eu.init(e,t),W.init(e,t)}),Hl=b("ZodJWT",(e,t)=>{ru.init(e,t),W.init(e,t)}),ws=b("ZodNumber",(e,t)=>{hs.init(e,t),L.init(e,t),e.gt=(n,s)=>e.check(Qr(n,s)),e.gte=(n,s)=>e.check(Mt(n,s)),e.min=(n,s)=>e.check(Mt(n,s)),e.lt=(n,s)=>e.check(Yr(n,s)),e.lte=(n,s)=>e.check(Nt(n,s)),e.max=(n,s)=>e.check(Nt(n,s)),e.int=n=>e.check(en(n)),e.safe=n=>e.check(en(n)),e.positive=n=>e.check(Qr(0,n)),e.nonnegative=n=>e.check(Mt(0,n)),e.negative=n=>e.check(Yr(0,n)),e.nonpositive=n=>e.check(Nt(0,n)),e.multipleOf=(n,s)=>e.check(Gr(n,s)),e.step=(n,s)=>e.check(Gr(n,s)),e.finite=()=>e;const r=e._zod.bag;e.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null});function Yl(e){return Xu(ws,e)}const Ql=b("ZodNumberFormat",(e,t)=>{nu.init(e,t),ws.init(e,t)});function en(e){return el(Ql,e)}const Gl=b("ZodBoolean",(e,t)=>{su.init(e,t),L.init(e,t)});function G(e){return tl(Gl,e)}const Kl=b("ZodNull",(e,t)=>{au.init(e,t),L.init(e,t)});function Xl(e){return rl(Kl,e)}const ed=b("ZodUnknown",(e,t)=>{ou.init(e,t),L.init(e,t)});function le(){return nl(ed)}const td=b("ZodNever",(e,t)=>{iu.init(e,t),L.init(e,t)});function xs(e){return sl(td,e)}const rd=b("ZodArray",(e,t)=>{cu.init(e,t),L.init(e,t),e.element=t.element,e.min=(r,n)=>e.check(mt(r,n)),e.nonempty=r=>e.check(mt(1,r)),e.max=(r,n)=>e.check(gs(r,n)),e.length=(r,n)=>e.check(ys(r,n)),e.unwrap=()=>e.element});function Ce(e,t){return ml(rd,e,t)}const _s=b("ZodObject",(e,t)=>{uu.init(e,t),L.init(e,t),z(e,"shape",()=>t.shape),e.keyof=()=>ks(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:le()}),e.loose=()=>e.clone({...e._zod.def,catchall:le()}),e.strict=()=>e.clone({...e._zod.def,catchall:xs()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>zi(e,r),e.merge=r=>Ai(e,r),e.pick=r=>Ni(e,r),e.omit=r=>Mi(e,r),e.partial=(...r)=>$i(Es,e,r[0]),e.required=(...r)=>Ri(Is,e,r[0])});function J(e,t){const r={type:"object",get shape(){return xt(this,"shape",{...e}),this.shape},...S(t)};return new _s(r)}function U(e,t){return new _s({type:"object",get shape(){return xt(this,"shape",{...e}),this.shape},catchall:xs(),...S(t)})}const Ss=b("ZodUnion",(e,t)=>{ps.init(e,t),L.init(e,t),e.options=t.options});function re(e,t){return new Ss({type:"union",options:e,...S(t)})}const nd=b("ZodDiscriminatedUnion",(e,t)=>{Ss.init(e,t),lu.init(e,t)});function sd(e,t,r){return new nd({type:"union",options:t,discriminator:e,...S(r)})}const ad=b("ZodIntersection",(e,t)=>{du.init(e,t),L.init(e,t)});function od(e,t){return new ad({type:"intersection",left:e,right:t})}const id=b("ZodRecord",(e,t)=>{fu.init(e,t),L.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function Ft(e,t,r){return new id({type:"record",keyType:e,valueType:t,...S(r)})}const Lt=b("ZodEnum",(e,t)=>{hu.init(e,t),L.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);const r=new Set(Object.keys(t.entries));e.extract=(n,s)=>{const a={};for(const i of n)if(r.has(i))a[i]=t.entries[i];else throw new Error(`Key ${i} not found in enum`);return new Lt({...t,checks:[],...S(s),entries:a})},e.exclude=(n,s)=>{const a={...t.entries};for(const i of n)if(r.has(i))delete a[i];else throw new Error(`Key ${i} not found in enum`);return new Lt({...t,checks:[],...S(s),entries:a})}});function ks(e,t){const r=Array.isArray(e)?Object.fromEntries(e.map(n=>[n,n])):e;return new Lt({type:"enum",entries:r,...S(t)})}const cd=b("ZodLiteral",(e,t)=>{pu.init(e,t),L.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function M(e,t){return new cd({type:"literal",values:Array.isArray(e)?e:[e],...S(t)})}const ud=b("ZodTransform",(e,t)=>{mu.init(e,t),L.init(e,t),e._zod.parse=(r,n)=>{r.addIssue=a=>{if(typeof a=="string")r.issues.push(Be(a,r.value,t));else{const i=a;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=r.value),i.inst??(i.inst=e),i.continue??(i.continue=!0),r.issues.push(Be(i))}};const s=t.transform(r.value,r);return s instanceof Promise?s.then(a=>(r.value=a,r)):(r.value=s,r)}});function ld(e){return new ud({type:"transform",transform:e})}const Es=b("ZodOptional",(e,t)=>{gu.init(e,t),L.init(e,t),e.unwrap=()=>e._zod.def.innerType});function tn(e){return new Es({type:"optional",innerType:e})}const dd=b("ZodNullable",(e,t)=>{yu.init(e,t),L.init(e,t),e.unwrap=()=>e._zod.def.innerType});function rn(e){return new dd({type:"nullable",innerType:e})}const fd=b("ZodDefault",(e,t)=>{vu.init(e,t),L.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function hd(e,t){return new fd({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const pd=b("ZodPrefault",(e,t)=>{bu.init(e,t),L.init(e,t),e.unwrap=()=>e._zod.def.innerType});function md(e,t){return new pd({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():t}})}const Is=b("ZodNonOptional",(e,t)=>{wu.init(e,t),L.init(e,t),e.unwrap=()=>e._zod.def.innerType});function gd(e,t){return new Is({type:"nonoptional",innerType:e,...S(t)})}const yd=b("ZodCatch",(e,t)=>{xu.init(e,t),L.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function vd(e,t){return new yd({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const bd=b("ZodPipe",(e,t)=>{_u.init(e,t),L.init(e,t),e.in=t.in,e.out=t.out});function nn(e,t){return new bd({type:"pipe",in:e,out:t})}const wd=b("ZodReadonly",(e,t)=>{Su.init(e,t),L.init(e,t)});function xd(e){return new wd({type:"readonly",innerType:e})}const _d=b("ZodLazy",(e,t)=>{ku.init(e,t),L.init(e,t),e.unwrap=()=>e._zod.def.getter()});function Sd(e){return new _d({type:"lazy",getter:e})}const dr=b("ZodCustom",(e,t)=>{Eu.init(e,t),L.init(e,t)});function kd(e){const t=new K({check:"custom"});return t._zod.check=e,t}function Ts(e,t){return gl(dr,e??(()=>!0),t)}function Ed(e,t={}){return yl(dr,e,t)}function Id(e){const t=kd(r=>(r.addIssue=n=>{if(typeof n=="string")r.issues.push(Be(n,r.value,t._zod.def));else{const s=n;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=r.value),s.inst??(s.inst=t),s.continue??(s.continue=!t._zod.def.abort),r.issues.push(Be(s))}},e(r.value,r)));return t}function gt(e,t={error:`Input not instance of ${e.name}`}){const r=new dr({type:"custom",check:"custom",fn:n=>n instanceof e,abort:!0,...S(t)});return r._zod.bag.Class=e,r}var Ke=({prefix:e,size:t=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:n="-"}={})=>{const s=()=>{const a=r.length,i=new Array(t);for(let o=0;o<t;o++)i[o]=r[Math.random()*a|0];return i.join("")};if(e==null)return s;if(r.includes(n))throw new bi({argument:"separator",message:`The separator "${n}" must not be part of the alphabet "${r}".`});return()=>`${e}${n}${s()}`},Td=Ke();function sn(e=globalThis){var t,r,n;return e.window?"runtime/browser":(t=e.navigator)!=null&&t.userAgent?`runtime/${e.navigator.userAgent.toLowerCase()}`:(n=(r=e.process)==null?void 0:r.versions)!=null&&n.node?`runtime/node.js/${e.process.version.substring(0)}`:e.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}function we(e){if(e==null)return{};const t={};if(e instanceof Headers)e.forEach((r,n)=>{t[n.toLowerCase()]=r});else{Array.isArray(e)||(e=Object.entries(e));for(const[r,n]of e)n!=null&&(t[r.toLowerCase()]=n)}return t}function an(e,...t){const r=new Headers(we(e)),n=r.get("user-agent")||"";return r.set("user-agent",[n,...t].filter(Boolean).join(" ")),Object.fromEntries(r.entries())}var Cd=/"__proto__"\s*:/,Od=/"constructor"\s*:/;function on(e){const t=JSON.parse(e);return t===null||typeof t!="object"||Cd.test(e)===!1&&Od.test(e)===!1?t:Pd(t)}function Pd(e){let t=[e];for(;t.length;){const r=t;t=[];for(const n of r){if(Object.prototype.hasOwnProperty.call(n,"__proto__"))throw new SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(n,"constructor")&&Object.prototype.hasOwnProperty.call(n.constructor,"prototype"))throw new SyntaxError("Object contains forbidden prototype property");for(const s in n){const a=n[s];a&&typeof a=="object"&&t.push(a)}}}return e}function jd(e){const{stackTraceLimit:t}=Error;try{Error.stackTraceLimit=0}catch{return on(e)}try{return on(e)}finally{Error.stackTraceLimit=t}}var yt=Symbol.for("vercel.ai.validator");function Nd(e){return{[yt]:!0,validate:e}}function Md(e){return typeof e=="object"&&e!==null&&yt in e&&e[yt]===!0&&"validate"in e}function zd(e){let t;return()=>(t==null&&(t=e()),t)}function Ad(e){return Md(e)?e:typeof e=="function"?e():$d(e)}function $d(e){return Nd(async t=>{const r=await e["~standard"].validate(t);return r.issues==null?{success:!0,value:r.value}:{success:!1,error:new ft({value:t,cause:r.issues})}})}async function cn({value:e,schema:t}){const r=await fr({value:e,schema:t});if(!r.success)throw ft.wrap({value:e,cause:r.error});return r.value}async function fr({value:e,schema:t}){const r=Ad(t);try{if(r.validate==null)return{success:!0,value:e,rawValue:e};const n=await r.validate(e);return n.success?{success:!0,value:n.value,rawValue:e}:{success:!1,error:ft.wrap({value:e,cause:n.error}),rawValue:e}}catch(n){return{success:!1,error:ft.wrap({value:e,cause:n}),rawValue:e}}}async function vt({text:e,schema:t}){try{const r=jd(e);return t==null?{success:!0,value:r,rawValue:r}:await fr({value:r,schema:t})}catch(r){return{success:!1,error:$r.isInstance(r)?r:new $r({text:e,cause:r}),rawValue:void 0}}}function Rd({stream:e,schema:t}){return e.pipeThrough(new TextDecoderStream).pipeThrough(new Ei).pipeThrough(new TransformStream({async transform({data:r},n){r!=="[DONE]"&&n.enqueue(await vt({text:r,schema:t}))}}))}async function Ee(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}function at(e){if(e.type==="object"){e.additionalProperties=!1;const t=e.properties;if(t!=null)for(const r in t)t[r]=at(t[r])}return e.type==="array"&&e.items!=null&&(Array.isArray(e.items)?e.items=e.items.map(t=>at(t)):e.items=at(e.items)),e}var Dd=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")},Zd=Symbol("Let zodToJsonSchema decide on which parser to use"),un={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},Fd=e=>typeof e=="string"?{...un,name:e}:{...un,...e};function X(){return{}}function Ld(e,t){var r,n,s;const a={type:"array"};return(r=e.type)!=null&&r._def&&((s=(n=e.type)==null?void 0:n._def)==null?void 0:s.typeName)!==j.ZodAny&&(a.items=R(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&(a.minItems=e.minLength.value),e.maxLength&&(a.maxItems=e.maxLength.value),e.exactLength&&(a.minItems=e.exactLength.value,a.maxItems=e.exactLength.value),a}function Ud(e){const t={type:"integer",format:"int64"};if(!e.checks)return t;for(const r of e.checks)switch(r.kind){case"min":r.inclusive?t.minimum=r.value:t.exclusiveMinimum=r.value;break;case"max":r.inclusive?t.maximum=r.value:t.exclusiveMaximum=r.value;break;case"multipleOf":t.multipleOf=r.value;break}return t}function Wd(){return{type:"boolean"}}function Cs(e,t){return R(e.type._def,t)}var qd=(e,t)=>R(e.innerType._def,t);function Os(e,t,r){const n=r??t.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((s,a)=>Os(e,t,s))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return Vd(e)}}var Vd=e=>{const t={type:"integer",format:"unix-time"};for(const r of e.checks)switch(r.kind){case"min":t.minimum=r.value;break;case"max":t.maximum=r.value;break}return t};function Bd(e,t){return{...R(e.innerType._def,t),default:e.defaultValue()}}function Jd(e,t){return t.effectStrategy==="input"?R(e.schema._def,t):X()}function Hd(e){return{type:"string",enum:Array.from(e.values)}}var Yd=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function Qd(e,t){const r=[R(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),R(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(s=>!!s),n=[];return r.forEach(s=>{if(Yd(s))n.push(...s.allOf);else{let a=s;if("additionalProperties"in s&&s.additionalProperties===!1){const{additionalProperties:i,...o}=s;a=o}n.push(a)}}),n.length?{allOf:n}:void 0}function Gd(e){const t=typeof e.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(e.value)?"array":"object"}:{type:t==="bigint"?"integer":t,const:e.value}}var zt=void 0,ne={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(zt===void 0&&(zt=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),zt),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function Ps(e,t){const r={type:"string"};if(e.checks)for(const n of e.checks)switch(n.kind){case"min":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value;break;case"max":r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value;break;case"email":switch(t.emailStrategy){case"format:email":se(r,"email",n.message,t);break;case"format:idn-email":se(r,"idn-email",n.message,t);break;case"pattern:zod":Y(r,ne.email,n.message,t);break}break;case"url":se(r,"uri",n.message,t);break;case"uuid":se(r,"uuid",n.message,t);break;case"regex":Y(r,n.regex,n.message,t);break;case"cuid":Y(r,ne.cuid,n.message,t);break;case"cuid2":Y(r,ne.cuid2,n.message,t);break;case"startsWith":Y(r,RegExp(`^${At(n.value,t)}`),n.message,t);break;case"endsWith":Y(r,RegExp(`${At(n.value,t)}$`),n.message,t);break;case"datetime":se(r,"date-time",n.message,t);break;case"date":se(r,"date",n.message,t);break;case"time":se(r,"time",n.message,t);break;case"duration":se(r,"duration",n.message,t);break;case"length":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,n.value):n.value,r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,n.value):n.value;break;case"includes":{Y(r,RegExp(At(n.value,t)),n.message,t);break}case"ip":{n.version!=="v6"&&se(r,"ipv4",n.message,t),n.version!=="v4"&&se(r,"ipv6",n.message,t);break}case"base64url":Y(r,ne.base64url,n.message,t);break;case"jwt":Y(r,ne.jwt,n.message,t);break;case"cidr":{n.version!=="v6"&&Y(r,ne.ipv4Cidr,n.message,t),n.version!=="v4"&&Y(r,ne.ipv6Cidr,n.message,t);break}case"emoji":Y(r,ne.emoji(),n.message,t);break;case"ulid":{Y(r,ne.ulid,n.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{se(r,"binary",n.message,t);break}case"contentEncoding:base64":{r.contentEncoding="base64";break}case"pattern:zod":{Y(r,ne.base64,n.message,t);break}}break}case"nanoid":Y(r,ne.nanoid,n.message,t)}return r}function At(e,t){return t.patternStrategy==="escape"?Xd(e):e}var Kd=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function Xd(e){let t="";for(let r=0;r<e.length;r++)Kd.has(e[r])||(t+="\\"),t+=e[r];return t}function se(e,t,r,n){var s;e.format||(s=e.anyOf)!=null&&s.some(a=>a.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format}),delete e.format),e.anyOf.push({format:t,...r&&n.errorMessages&&{errorMessage:{format:r}}})):e.format=t}function Y(e,t,r,n){var s;e.pattern||(s=e.allOf)!=null&&s.some(a=>a.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern}),delete e.pattern),e.allOf.push({pattern:ln(t,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):e.pattern=ln(t,n)}function ln(e,t){var r;if(!t.applyRegexFlags||!e.flags)return e.source;const n={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},s=n.i?e.source.toLowerCase():e.source;let a="",i=!1,o=!1,l=!1;for(let u=0;u<s.length;u++){if(i){a+=s[u],i=!1;continue}if(n.i){if(o){if(s[u].match(/[a-z]/)){l?(a+=s[u],a+=`${s[u-2]}-${s[u]}`.toUpperCase(),l=!1):s[u+1]==="-"&&((r=s[u+2])!=null&&r.match(/[a-z]/))?(a+=s[u],l=!0):a+=`${s[u]}${s[u].toUpperCase()}`;continue}}else if(s[u].match(/[a-z]/)){a+=`[${s[u]}${s[u].toUpperCase()}]`;continue}}if(n.m){if(s[u]==="^"){a+=`(^|(?<=[\r
]))`;continue}else if(s[u]==="$"){a+=`($|(?=[\r
]))`;continue}}if(n.s&&s[u]==="."){a+=o?`${s[u]}\r
`:`[${s[u]}\r
]`;continue}a+=s[u],s[u]==="\\"?i=!0:o&&s[u]==="]"?o=!1:!o&&s[u]==="["&&(o=!0)}try{new RegExp(a)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return a}function js(e,t){var r,n,s,a,i,o;const l={type:"object",additionalProperties:(r=R(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]}))!=null?r:t.allowedAdditionalProperties};if(((n=e.keyType)==null?void 0:n._def.typeName)===j.ZodString&&((s=e.keyType._def.checks)!=null&&s.length)){const{type:u,...c}=Ps(e.keyType._def,t);return{...l,propertyNames:c}}else{if(((a=e.keyType)==null?void 0:a._def.typeName)===j.ZodEnum)return{...l,propertyNames:{enum:e.keyType._def.values}};if(((i=e.keyType)==null?void 0:i._def.typeName)===j.ZodBranded&&e.keyType._def.type._def.typeName===j.ZodString&&((o=e.keyType._def.type._def.checks)!=null&&o.length)){const{type:u,...c}=Cs(e.keyType._def,t);return{...l,propertyNames:c}}}return l}function ef(e,t){if(t.mapStrategy==="record")return js(e,t);const r=R(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||X(),n=R(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||X();return{type:"array",maxItems:125,items:{type:"array",items:[r,n],minItems:2,maxItems:2}}}function tf(e){const t=e.values,n=Object.keys(e.values).filter(a=>typeof t[t[a]]!="number").map(a=>t[a]),s=Array.from(new Set(n.map(a=>typeof a)));return{type:s.length===1?s[0]==="string"?"string":"number":["string","number"],enum:n}}function rf(){return{not:X()}}function nf(){return{type:"null"}}var Ut={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function sf(e,t){const r=e.options instanceof Map?Array.from(e.options.values()):e.options;if(r.every(n=>n._def.typeName in Ut&&(!n._def.checks||!n._def.checks.length))){const n=r.reduce((s,a)=>{const i=Ut[a._def.typeName];return i&&!s.includes(i)?[...s,i]:s},[]);return{type:n.length>1?n:n[0]}}else if(r.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){const n=r.reduce((s,a)=>{const i=typeof a._def.value;switch(i){case"string":case"number":case"boolean":return[...s,i];case"bigint":return[...s,"integer"];case"object":if(a._def.value===null)return[...s,"null"];case"symbol":case"undefined":case"function":default:return s}},[]);if(n.length===r.length){const s=n.filter((a,i,o)=>o.indexOf(a)===i);return{type:s.length>1?s:s[0],enum:r.reduce((a,i)=>a.includes(i._def.value)?a:[...a,i._def.value],[])}}}else if(r.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((n,s)=>[...n,...s._def.values.filter(a=>!n.includes(a))],[])};return af(e,t)}var af=(e,t)=>{const r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((n,s)=>R(n._def,{...t,currentPath:[...t.currentPath,"anyOf",`${s}`]})).filter(n=>!!n&&(!t.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return r.length?{anyOf:r}:void 0};function of(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return{type:[Ut[e.innerType._def.typeName],"null"]};const r=R(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function cf(e){const t={type:"number"};if(!e.checks)return t;for(const r of e.checks)switch(r.kind){case"int":t.type="integer";break;case"min":r.inclusive?t.minimum=r.value:t.exclusiveMinimum=r.value;break;case"max":r.inclusive?t.maximum=r.value:t.exclusiveMaximum=r.value;break;case"multipleOf":t.multipleOf=r.value;break}return t}function uf(e,t){const r={type:"object",properties:{}},n=[],s=e.shape();for(const i in s){let o=s[i];if(o===void 0||o._def===void 0)continue;const l=df(o),u=R(o._def,{...t,currentPath:[...t.currentPath,"properties",i],propertyPath:[...t.currentPath,"properties",i]});u!==void 0&&(r.properties[i]=u,l||n.push(i))}n.length&&(r.required=n);const a=lf(e,t);return a!==void 0&&(r.additionalProperties=a),r}function lf(e,t){if(e.catchall._def.typeName!=="ZodNever")return R(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function df(e){try{return e.isOptional()}catch{return!0}}var ff=(e,t)=>{var r;if(t.currentPath.toString()===((r=t.propertyPath)==null?void 0:r.toString()))return R(e.innerType._def,t);const n=R(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return n?{anyOf:[{not:X()},n]}:X()},hf=(e,t)=>{if(t.pipeStrategy==="input")return R(e.in._def,t);if(t.pipeStrategy==="output")return R(e.out._def,t);const r=R(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),n=R(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(s=>s!==void 0)}};function pf(e,t){return R(e.type._def,t)}function mf(e,t){const n={type:"array",uniqueItems:!0,items:R(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&(n.minItems=e.minSize.value),e.maxSize&&(n.maxItems=e.maxSize.value),n}function gf(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((r,n)=>R(r._def,{...t,currentPath:[...t.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[]),additionalItems:R(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((r,n)=>R(r._def,{...t,currentPath:[...t.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[])}}function yf(){return{not:X()}}function vf(){return X()}var bf=(e,t)=>R(e.innerType._def,t),wf=(e,t,r)=>{switch(t){case j.ZodString:return Ps(e,r);case j.ZodNumber:return cf(e);case j.ZodObject:return uf(e,r);case j.ZodBigInt:return Ud(e);case j.ZodBoolean:return Wd();case j.ZodDate:return Os(e,r);case j.ZodUndefined:return yf();case j.ZodNull:return nf();case j.ZodArray:return Ld(e,r);case j.ZodUnion:case j.ZodDiscriminatedUnion:return sf(e,r);case j.ZodIntersection:return Qd(e,r);case j.ZodTuple:return gf(e,r);case j.ZodRecord:return js(e,r);case j.ZodLiteral:return Gd(e);case j.ZodEnum:return Hd(e);case j.ZodNativeEnum:return tf(e);case j.ZodNullable:return of(e,r);case j.ZodOptional:return ff(e,r);case j.ZodMap:return ef(e,r);case j.ZodSet:return mf(e,r);case j.ZodLazy:return()=>e.getter()._def;case j.ZodPromise:return pf(e,r);case j.ZodNaN:case j.ZodNever:return rf();case j.ZodEffects:return Jd(e,r);case j.ZodAny:return X();case j.ZodUnknown:return vf();case j.ZodDefault:return Bd(e,r);case j.ZodBranded:return Cs(e,r);case j.ZodReadonly:return bf(e,r);case j.ZodCatch:return qd(e,r);case j.ZodPipeline:return hf(e,r);case j.ZodFunction:case j.ZodVoid:case j.ZodSymbol:return;default:return(n=>{})()}};function R(e,t,r=!1){var n;const s=t.seen.get(e);if(t.override){const l=(n=t.override)==null?void 0:n.call(t,e,t,s,r);if(l!==Zd)return l}if(s&&!r){const l=xf(s,t);if(l!==void 0)return l}const a={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,a);const i=wf(e,e.typeName,t),o=typeof i=="function"?R(i(),t):i;if(o&&_f(e,t,o),t.postProcess){const l=t.postProcess(o,e,t);return a.jsonSchema=o,l}return a.jsonSchema=o,o}var xf=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:Dd(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((r,n)=>t.currentPath[n]===r)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),X()):t.$refStrategy==="seen"?X():void 0}},_f=(e,t,r)=>(e.description&&(r.description=e.description),r),Sf=e=>{const t=Fd(e),r=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([n,s])=>[s._def,{def:s._def,path:[...t.basePath,t.definitionPath,n],jsonSchema:void 0}]))}},kf=(e,t)=>{var r;const n=Sf(t);let s=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((u,[c,d])=>{var v;return{...u,[c]:(v=R(d._def,{...n,currentPath:[...n.basePath,n.definitionPath,c]},!0))!=null?v:X()}},{}):void 0;const a=typeof t=="string"?t:t?.nameStrategy==="title"?void 0:t?.name,i=(r=R(e._def,a===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,a]},!1))!=null?r:X(),o=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;o!==void 0&&(i.title=o);const l=a===void 0?s?{...i,[n.definitionPath]:s}:i:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,a].join("/"),[n.definitionPath]:{...s,[a]:i}};return l.$schema="http://json-schema.org/draft-07/schema#",l},Ef=kf;function If(e,t){var r;const n=(r=void 0)!=null?r:!1;return hr(()=>Ef(e,{$refStrategy:n?"root":"none"}),{validate:async s=>{const a=await e.safeParseAsync(s);return a.success?{success:!0,value:a.data}:{success:!1,error:a.error}}})}function Tf(e,t){var r;const n=(r=void 0)!=null?r:!1;return hr(()=>at(vl(e,{target:"draft-7",io:"input",reused:n?"ref":"inline"})),{validate:async s=>{const a=await vs(e,s);return a.success?{success:!0,value:a.data}:{success:!1,error:a.error}}})}function Cf(e){return"_zod"in e}function Ns(e,t){return Cf(e)?Tf(e):If(e)}var Wt=Symbol.for("vercel.ai.schema");function hr(e,{validate:t}={}){return{[Wt]:!0,_type:void 0,[yt]:!0,get jsonSchema(){return typeof e=="function"&&(e=e()),e},validate:t}}function Of(e){return typeof e=="object"&&e!==null&&Wt in e&&e[Wt]===!0&&"jsonSchema"in e&&"validate"in e}function Pf(e){return e==null?hr({properties:{},additionalProperties:!1}):Of(e)?e:typeof e=="function"?e():Ns(e)}var jf=Object.defineProperty,Nf=(e,t)=>{for(var r in t)jf(e,r,{get:t[r],enumerable:!0})},Ms="AI_NoObjectGeneratedError",zs=`vercel.ai.error.${Ms}`,Mf=Symbol.for(zs),As,dn=class extends me{constructor({message:e="No object generated.",cause:t,text:r,response:n,usage:s,finishReason:a}){super({name:Ms,message:e,cause:t}),this[As]=!0,this.text=r,this.response=n,this.usage=s,this.finishReason=a}static isInstance(e){return me.hasMarker(e,zs)}};As=Mf;var fn="5.0.116",$s=re([E(),gt(Uint8Array),gt(ArrayBuffer),Ts(e=>{var t,r;return(r=(t=globalThis.Buffer)==null?void 0:t.isBuffer(e))!=null?r:!1},{message:"Must be a Buffer"})]),Je=Sd(()=>re([Xl(),E(),Yl(),G(),Ft(E(),Je),Ce(Je)])),q=Ft(E(),Ft(E(),Je)),Rs=J({type:M("text"),text:E(),providerOptions:q.optional()}),zf=J({type:M("image"),image:re([$s,gt(URL)]),mediaType:E().optional(),providerOptions:q.optional()}),Ds=J({type:M("file"),data:re([$s,gt(URL)]),filename:E().optional(),mediaType:E(),providerOptions:q.optional()}),Af=J({type:M("reasoning"),text:E(),providerOptions:q.optional()}),$f=J({type:M("tool-call"),toolCallId:E(),toolName:E(),input:le(),providerOptions:q.optional(),providerExecuted:G().optional()}),Rf=sd("type",[J({type:M("text"),value:E()}),J({type:M("json"),value:Je}),J({type:M("error-text"),value:E()}),J({type:M("error-json"),value:Je}),J({type:M("content"),value:Ce(re([J({type:M("text"),text:E()}),J({type:M("media"),data:E(),mediaType:E()})]))})]),Zs=J({type:M("tool-result"),toolCallId:E(),toolName:E(),output:Rf,providerOptions:q.optional()}),Df=J({role:M("system"),content:E(),providerOptions:q.optional()}),Zf=J({role:M("user"),content:re([E(),Ce(re([Rs,zf,Ds]))]),providerOptions:q.optional()}),Ff=J({role:M("assistant"),content:re([E(),Ce(re([Rs,Ds,Af,$f,Zs]))]),providerOptions:q.optional()}),Lf=J({role:M("tool"),content:Ce(Zs),providerOptions:q.optional()});re([Df,Zf,Ff,Lf]);Ke({prefix:"aitxt",size:24});(class extends TransformStream{constructor(){super({transform(e,t){t.enqueue(`data: ${JSON.stringify(e)}

`)},flush(e){e.enqueue(`data: [DONE]

`)}})}});var Uf=zd(()=>Ns(re([U({type:M("text-start"),id:E(),providerMetadata:q.optional()}),U({type:M("text-delta"),id:E(),delta:E(),providerMetadata:q.optional()}),U({type:M("text-end"),id:E(),providerMetadata:q.optional()}),U({type:M("error"),errorText:E()}),U({type:M("tool-input-start"),toolCallId:E(),toolName:E(),providerExecuted:G().optional(),dynamic:G().optional()}),U({type:M("tool-input-delta"),toolCallId:E(),inputTextDelta:E()}),U({type:M("tool-input-available"),toolCallId:E(),toolName:E(),input:le(),providerExecuted:G().optional(),providerMetadata:q.optional(),dynamic:G().optional()}),U({type:M("tool-input-error"),toolCallId:E(),toolName:E(),input:le(),providerExecuted:G().optional(),providerMetadata:q.optional(),dynamic:G().optional(),errorText:E()}),U({type:M("tool-output-available"),toolCallId:E(),output:le(),providerExecuted:G().optional(),dynamic:G().optional(),preliminary:G().optional()}),U({type:M("tool-output-error"),toolCallId:E(),errorText:E(),providerExecuted:G().optional(),dynamic:G().optional()}),U({type:M("reasoning-start"),id:E(),providerMetadata:q.optional()}),U({type:M("reasoning-delta"),id:E(),delta:E(),providerMetadata:q.optional()}),U({type:M("reasoning-end"),id:E(),providerMetadata:q.optional()}),U({type:M("source-url"),sourceId:E(),url:E(),title:E().optional(),providerMetadata:q.optional()}),U({type:M("source-document"),sourceId:E(),mediaType:E(),title:E(),filename:E().optional(),providerMetadata:q.optional()}),U({type:M("file"),url:E(),mediaType:E(),providerMetadata:q.optional()}),U({type:Ts(e=>typeof e=="string"&&e.startsWith("data-"),{message:'Type must start with "data-"'}),id:E().optional(),data:le(),transient:G().optional()}),U({type:M("start-step")}),U({type:M("finish-step")}),U({type:M("start"),messageId:E().optional(),messageMetadata:le().optional()}),U({type:M("finish"),finishReason:ks(["stop","length","content-filter","tool-calls","error","other","unknown"]).optional(),messageMetadata:le().optional()}),U({type:M("abort")}),U({type:M("message-metadata"),messageMetadata:le()})])));function Wf(e){return e.type.startsWith("data-")}function Fs(e,t){if(e===void 0&&t===void 0)return;if(e===void 0)return t;if(t===void 0)return e;const r={...e};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const s=t[n];if(s===void 0)continue;const a=n in e?e[n]:void 0,i=s!==null&&typeof s=="object"&&!Array.isArray(s)&&!(s instanceof Date)&&!(s instanceof RegExp),o=a!=null&&typeof a=="object"&&!Array.isArray(a)&&!(a instanceof Date)&&!(a instanceof RegExp);i&&o?r[n]=Fs(a,s):r[n]=s}return r}function qf(e){const t=["ROOT"];let r=-1,n=null;function s(l,u,c){switch(l){case'"':{r=u,t.pop(),t.push(c),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{r=u,n=u,t.pop(),t.push(c),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(c),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{r=u,t.pop(),t.push(c),t.push("INSIDE_NUMBER");break}case"{":{r=u,t.pop(),t.push(c),t.push("INSIDE_OBJECT_START");break}case"[":{r=u,t.pop(),t.push(c),t.push("INSIDE_ARRAY_START");break}}}function a(l,u){switch(l){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{r=u,t.pop();break}}}function i(l,u){switch(l){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{r=u,t.pop();break}}}for(let l=0;l<e.length;l++){const u=e[l];switch(t[t.length-1]){case"ROOT":s(u,l,"FINISH");break;case"INSIDE_OBJECT_START":{switch(u){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{r=l,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(u){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(u){case'"':{t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(u){case":":{t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{s(u,l,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{a(u,l);break}case"INSIDE_STRING":{switch(u){case'"':{t.pop(),r=l;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:r=l}break}case"INSIDE_ARRAY_START":{switch(u){case"]":{r=l,t.pop();break}default:{r=l,s(u,l,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(u){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{r=l,t.pop();break}default:{r=l;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{s(u,l,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),r=l;break}case"INSIDE_NUMBER":{switch(u){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{r=l;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&i(u,l),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&a(u,l);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&a(u,l);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&i(u,l);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{const d=e.substring(n,l+1);!"false".startsWith(d)&&!"true".startsWith(d)&&!"null".startsWith(d)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?a(u,l):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&i(u,l)):r=l;break}}}let o=e.slice(0,r+1);for(let l=t.length-1;l>=0;l--)switch(t[l]){case"INSIDE_STRING":{o+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{o+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{o+="]";break}case"INSIDE_LITERAL":{const c=e.substring(n,e.length);"true".startsWith(c)?o+="true".slice(c.length):"false".startsWith(c)?o+="false".slice(c.length):"null".startsWith(c)&&(o+="null".slice(c.length))}}return o}async function Ls(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=await vt({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=await vt({text:qf(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}function ot(e){return e.type.startsWith("tool-")}function Vf(e){return e.type==="dynamic-tool"}function hn(e){return ot(e)||Vf(e)}function pn(e){return e.type.split("-").slice(1).join("-")}function Bf({lastMessage:e,messageId:t}){return{message:e?.role==="assistant"?e:{id:t,metadata:void 0,role:"assistant",parts:[]},activeTextParts:{},activeReasoningParts:{},partialToolCalls:{}}}function Jf({stream:e,messageMetadataSchema:t,dataPartSchemas:r,runUpdateMessageJob:n,onError:s,onToolCall:a,onData:i}){return e.pipeThrough(new TransformStream({async transform(o,l){await n(async({state:u,write:c})=>{var d,v,h,p;function m(g){const T=u.message.parts.filter(ot).find(C=>C.toolCallId===g);if(T==null)throw new Error("tool-output-error must be preceded by a tool-input-available");return T}function y(g){const T=u.message.parts.filter(C=>C.type==="dynamic-tool").find(C=>C.toolCallId===g);if(T==null)throw new Error("tool-output-error must be preceded by a tool-input-available");return T}function x(g){var I;const T=u.message.parts.find(B=>ot(B)&&B.toolCallId===g.toolCallId),C=g,O=T;T!=null?(T.state=g.state,O.input=C.input,O.output=C.output,O.errorText=C.errorText,O.rawInput=C.rawInput,O.preliminary=C.preliminary,O.providerExecuted=(I=C.providerExecuted)!=null?I:T.providerExecuted,C.providerMetadata!=null&&T.state==="input-available"&&(T.callProviderMetadata=C.providerMetadata)):u.message.parts.push({type:`tool-${g.toolName}`,toolCallId:g.toolCallId,state:g.state,input:C.input,output:C.output,rawInput:C.rawInput,errorText:C.errorText,providerExecuted:C.providerExecuted,preliminary:C.preliminary,...C.providerMetadata!=null?{callProviderMetadata:C.providerMetadata}:{}})}function _(g){var I,T;const C=u.message.parts.find(de=>de.type==="dynamic-tool"&&de.toolCallId===g.toolCallId),O=g,B=C;C!=null?(C.state=g.state,B.toolName=g.toolName,B.input=O.input,B.output=O.output,B.errorText=O.errorText,B.rawInput=(I=O.rawInput)!=null?I:B.rawInput,B.preliminary=O.preliminary,B.providerExecuted=(T=O.providerExecuted)!=null?T:C.providerExecuted,O.providerMetadata!=null&&C.state==="input-available"&&(C.callProviderMetadata=O.providerMetadata)):u.message.parts.push({type:"dynamic-tool",toolName:g.toolName,toolCallId:g.toolCallId,state:g.state,input:O.input,output:O.output,errorText:O.errorText,preliminary:O.preliminary,providerExecuted:O.providerExecuted,...O.providerMetadata!=null?{callProviderMetadata:O.providerMetadata}:{}})}async function w(g){if(g!=null){const I=u.message.metadata!=null?Fs(u.message.metadata,g):g;t!=null&&await cn({value:I,schema:t}),u.message.metadata=I}}switch(o.type){case"text-start":{const g={type:"text",text:"",providerMetadata:o.providerMetadata,state:"streaming"};u.activeTextParts[o.id]=g,u.message.parts.push(g),c();break}case"text-delta":{const g=u.activeTextParts[o.id];g.text+=o.delta,g.providerMetadata=(d=o.providerMetadata)!=null?d:g.providerMetadata,c();break}case"text-end":{const g=u.activeTextParts[o.id];g.state="done",g.providerMetadata=(v=o.providerMetadata)!=null?v:g.providerMetadata,delete u.activeTextParts[o.id],c();break}case"reasoning-start":{const g={type:"reasoning",text:"",providerMetadata:o.providerMetadata,state:"streaming"};u.activeReasoningParts[o.id]=g,u.message.parts.push(g),c();break}case"reasoning-delta":{const g=u.activeReasoningParts[o.id];g.text+=o.delta,g.providerMetadata=(h=o.providerMetadata)!=null?h:g.providerMetadata,c();break}case"reasoning-end":{const g=u.activeReasoningParts[o.id];g.providerMetadata=(p=o.providerMetadata)!=null?p:g.providerMetadata,g.state="done",delete u.activeReasoningParts[o.id],c();break}case"file":{u.message.parts.push({type:"file",mediaType:o.mediaType,url:o.url}),c();break}case"source-url":{u.message.parts.push({type:"source-url",sourceId:o.sourceId,url:o.url,title:o.title,providerMetadata:o.providerMetadata}),c();break}case"source-document":{u.message.parts.push({type:"source-document",sourceId:o.sourceId,mediaType:o.mediaType,title:o.title,filename:o.filename,providerMetadata:o.providerMetadata}),c();break}case"tool-input-start":{const g=u.message.parts.filter(ot);u.partialToolCalls[o.toolCallId]={text:"",toolName:o.toolName,index:g.length,dynamic:o.dynamic},o.dynamic?_({toolCallId:o.toolCallId,toolName:o.toolName,state:"input-streaming",input:void 0,providerExecuted:o.providerExecuted}):x({toolCallId:o.toolCallId,toolName:o.toolName,state:"input-streaming",input:void 0,providerExecuted:o.providerExecuted}),c();break}case"tool-input-delta":{const g=u.partialToolCalls[o.toolCallId];g.text+=o.inputTextDelta;const{value:I}=await Ls(g.text);g.dynamic?_({toolCallId:o.toolCallId,toolName:g.toolName,state:"input-streaming",input:I}):x({toolCallId:o.toolCallId,toolName:g.toolName,state:"input-streaming",input:I}),c();break}case"tool-input-available":{o.dynamic?_({toolCallId:o.toolCallId,toolName:o.toolName,state:"input-available",input:o.input,providerExecuted:o.providerExecuted,providerMetadata:o.providerMetadata}):x({toolCallId:o.toolCallId,toolName:o.toolName,state:"input-available",input:o.input,providerExecuted:o.providerExecuted,providerMetadata:o.providerMetadata}),c(),a&&!o.providerExecuted&&await a({toolCall:o});break}case"tool-input-error":{o.dynamic?_({toolCallId:o.toolCallId,toolName:o.toolName,state:"output-error",input:o.input,errorText:o.errorText,providerExecuted:o.providerExecuted,providerMetadata:o.providerMetadata}):x({toolCallId:o.toolCallId,toolName:o.toolName,state:"output-error",input:void 0,rawInput:o.input,errorText:o.errorText,providerExecuted:o.providerExecuted,providerMetadata:o.providerMetadata}),c();break}case"tool-output-available":{if(o.dynamic){const g=y(o.toolCallId);_({toolCallId:o.toolCallId,toolName:g.toolName,state:"output-available",input:g.input,output:o.output,preliminary:o.preliminary})}else{const g=m(o.toolCallId);x({toolCallId:o.toolCallId,toolName:pn(g),state:"output-available",input:g.input,output:o.output,providerExecuted:o.providerExecuted,preliminary:o.preliminary})}c();break}case"tool-output-error":{if(o.dynamic){const g=y(o.toolCallId);_({toolCallId:o.toolCallId,toolName:g.toolName,state:"output-error",input:g.input,errorText:o.errorText,providerExecuted:o.providerExecuted})}else{const g=m(o.toolCallId);x({toolCallId:o.toolCallId,toolName:pn(g),state:"output-error",input:g.input,rawInput:g.rawInput,errorText:o.errorText,providerExecuted:o.providerExecuted})}c();break}case"start-step":{u.message.parts.push({type:"step-start"});break}case"finish-step":{u.activeTextParts={},u.activeReasoningParts={};break}case"start":{o.messageId!=null&&(u.message.id=o.messageId),await w(o.messageMetadata),(o.messageId!=null||o.messageMetadata!=null)&&c();break}case"finish":{o.finishReason!=null&&(u.finishReason=o.finishReason),await w(o.messageMetadata),o.messageMetadata!=null&&c();break}case"message-metadata":{await w(o.messageMetadata),o.messageMetadata!=null&&c();break}case"error":{s?.(new Error(o.errorText));break}default:if(Wf(o)){r?.[o.type]!=null&&await cn({value:o.data,schema:r[o.type]});const g=o;if(g.transient){i?.(g);break}const I=g.id!=null?u.message.parts.find(T=>g.type===T.type&&g.id===T.id):void 0;I!=null?I.data=g.data:u.message.parts.push(g),i?.(g),c()}}l.enqueue(o)})}}))}async function Hf({stream:e,onError:t}){const r=e.getReader();try{for(;;){const{done:n}=await r.read();if(n)break}}catch(n){t?.(n)}finally{r.releaseLock()}}Ke({prefix:"aitxt",size:24});Ke({prefix:"aiobj",size:24});var Yf=class{constructor(){this.queue=[],this.isProcessing=!1}async processQueue(){if(!this.isProcessing){for(this.isProcessing=!0;this.queue.length>0;)await this.queue[0](),this.queue.shift();this.isProcessing=!1}}async run(e){return new Promise((t,r)=>{this.queue.push(async()=>{try{await e(),t()}catch(n){r(n)}}),this.processQueue()})}};Ke({prefix:"aiobj",size:24});var Qf={};Nf(Qf,{object:()=>Kf,text:()=>Gf});var Gf=()=>({type:"text",responseFormat:{type:"text"},async parsePartial({text:e}){return{partial:e}},async parseOutput({text:e}){return e}}),Kf=({schema:e})=>{const t=Pf(e);return{type:"object",responseFormat:{type:"json",schema:t.jsonSchema},async parsePartial({text:r}){const n=await Ls(r);switch(n.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:n.value};default:{const s=n.state;throw new Error(`Unsupported parse state: ${s}`)}}},async parseOutput({text:r},n){const s=await vt({text:r});if(!s.success)throw new dn({message:"No object generated: could not parse the response.",cause:s.error,text:r,response:n.response,usage:n.usage,finishReason:n.finishReason});const a=await fr({value:s.value,schema:t});if(!a.success)throw new dn({message:"No object generated: response did not match schema.",cause:a.error,text:r,response:n.response,usage:n.usage,finishReason:n.finishReason});return a.value}}};async function Xf(e){if(e==null)return[];if(!globalThis.FileList||!(e instanceof globalThis.FileList))throw new Error("FileList is not supported in the current environment");return Promise.all(Array.from(e).map(async t=>{const{name:r,type:n}=t,s=await new Promise((a,i)=>{const o=new FileReader;o.onload=l=>{var u;a((u=l.target)==null?void 0:u.result)},o.onerror=l=>i(l),o.readAsDataURL(t)});return{type:"file",mediaType:n,filename:r,url:s}}))}var eh=class{constructor({api:e="/api/chat",credentials:t,headers:r,body:n,fetch:s,prepareSendMessagesRequest:a,prepareReconnectToStreamRequest:i}){this.api=e,this.credentials=t,this.headers=r,this.body=n,this.fetch=s,this.prepareSendMessagesRequest=a,this.prepareReconnectToStreamRequest=i}async sendMessages({abortSignal:e,...t}){var r,n,s,a,i;const o=await Ee(this.body),l=await Ee(this.headers),u=await Ee(this.credentials),c={...we(l),...we(t.headers)},d=await((r=this.prepareSendMessagesRequest)==null?void 0:r.call(this,{api:this.api,id:t.chatId,messages:t.messages,body:{...o,...t.body},headers:c,credentials:u,requestMetadata:t.metadata,trigger:t.trigger,messageId:t.messageId})),v=(n=d?.api)!=null?n:this.api,h=d?.headers!==void 0?we(d.headers):c,p=d?.body!==void 0?d.body:{...o,...t.body,id:t.chatId,messages:t.messages,trigger:t.trigger,messageId:t.messageId},m=(s=d?.credentials)!=null?s:u,x=await((a=this.fetch)!=null?a:globalThis.fetch)(v,{method:"POST",headers:an({"Content-Type":"application/json",...h},`ai-sdk/${fn}`,sn()),body:JSON.stringify(p),credentials:m,signal:e});if(!x.ok)throw new Error((i=await x.text())!=null?i:"Failed to fetch the chat response.");if(!x.body)throw new Error("The response body is empty.");return this.processResponseStream(x.body)}async reconnectToStream(e){var t,r,n,s,a;const i=await Ee(this.body),o=await Ee(this.headers),l=await Ee(this.credentials),u={...we(o),...we(e.headers)},c=await((t=this.prepareReconnectToStreamRequest)==null?void 0:t.call(this,{api:this.api,id:e.chatId,body:{...i,...e.body},headers:u,credentials:l,requestMetadata:e.metadata})),d=(r=c?.api)!=null?r:`${this.api}/${e.chatId}/stream`,v=c?.headers!==void 0?we(c.headers):u,h=(n=c?.credentials)!=null?n:l,m=await((s=this.fetch)!=null?s:globalThis.fetch)(d,{method:"GET",headers:an(v,`ai-sdk/${fn}`,sn()),credentials:h});if(m.status===204)return null;if(!m.ok)throw new Error((a=await m.text())!=null?a:"Failed to fetch the chat response.");if(!m.body)throw new Error("The response body is empty.");return this.processResponseStream(m.body)}},th=class extends eh{constructor(e={}){super(e)}processResponseStream(e){return Rd({stream:e,schema:Uf}).pipeThrough(new TransformStream({async transform(t,r){if(!t.success)throw t.error;r.enqueue(t.value)}}))}},rh=class{constructor({generateId:e=Td,id:t=e(),transport:r=new th,messageMetadataSchema:n,dataPartSchemas:s,state:a,onError:i,onToolCall:o,onFinish:l,onData:u,sendAutomaticallyWhen:c}){this.activeResponse=void 0,this.jobExecutor=new Yf,this.sendMessage=async(d,v)=>{var h,p,m,y;if(d==null){await this.makeRequest({trigger:"submit-message",messageId:(h=this.lastMessage)==null?void 0:h.id,...v});return}let x;if("text"in d||"files"in d?x={parts:[...Array.isArray(d.files)?d.files:await Xf(d.files),..."text"in d&&d.text!=null?[{type:"text",text:d.text}]:[]]}:x=d,d.messageId!=null){const _=this.state.messages.findIndex(w=>w.id===d.messageId);if(_===-1)throw new Error(`message with id ${d.messageId} not found`);if(this.state.messages[_].role!=="user")throw new Error(`message with id ${d.messageId} is not a user message`);this.state.messages=this.state.messages.slice(0,_+1),this.state.replaceMessage(_,{...x,id:d.messageId,role:(p=x.role)!=null?p:"user",metadata:d.metadata})}else this.state.pushMessage({...x,id:(m=x.id)!=null?m:this.generateId(),role:(y=x.role)!=null?y:"user",metadata:d.metadata});await this.makeRequest({trigger:"submit-message",messageId:d.messageId,...v})},this.regenerate=async({messageId:d,...v}={})=>{const h=d==null?this.state.messages.length-1:this.state.messages.findIndex(p=>p.id===d);if(h===-1)throw new Error(`message ${d} not found`);this.state.messages=this.state.messages.slice(0,this.messages[h].role==="assistant"?h:h+1),await this.makeRequest({trigger:"regenerate-message",messageId:d,...v})},this.resumeStream=async(d={})=>{await this.makeRequest({trigger:"resume-stream",...d})},this.clearError=()=>{this.status==="error"&&(this.state.error=void 0,this.setStatus({status:"ready"}))},this.addToolOutput=async({state:d="output-available",tool:v,toolCallId:h,output:p,errorText:m})=>this.jobExecutor.run(async()=>{var y,x;const _=this.state.messages,w=_[_.length-1];this.state.replaceMessage(_.length-1,{...w,parts:w.parts.map(g=>hn(g)&&g.toolCallId===h?{...g,state:d,output:p,errorText:m}:g)}),this.activeResponse&&(this.activeResponse.state.message.parts=this.activeResponse.state.message.parts.map(g=>hn(g)&&g.toolCallId===h?{...g,state:d,output:p,errorText:m}:g)),this.status!=="streaming"&&this.status!=="submitted"&&((y=this.sendAutomaticallyWhen)!=null&&y.call(this,{messages:this.state.messages}))&&this.makeRequest({trigger:"submit-message",messageId:(x=this.lastMessage)==null?void 0:x.id})}),this.addToolResult=this.addToolOutput,this.stop=async()=>{var d;this.status!=="streaming"&&this.status!=="submitted"||(d=this.activeResponse)!=null&&d.abortController&&this.activeResponse.abortController.abort()},this.id=t,this.transport=r,this.generateId=e,this.messageMetadataSchema=n,this.dataPartSchemas=s,this.state=a,this.onError=i,this.onToolCall=o,this.onFinish=l,this.onData=u,this.sendAutomaticallyWhen=c}get status(){return this.state.status}setStatus({status:e,error:t}){this.status!==e&&(this.state.status=e,this.state.error=t)}get error(){return this.state.error}get messages(){return this.state.messages}get lastMessage(){return this.state.messages[this.state.messages.length-1]}set messages(e){this.state.messages=e}async makeRequest({trigger:e,metadata:t,headers:r,body:n,messageId:s}){var a,i,o,l;this.setStatus({status:"submitted",error:void 0});const u=this.lastMessage;let c=!1,d=!1,v=!1;try{const h={state:Bf({lastMessage:this.state.snapshot(u),messageId:this.generateId()}),abortController:new AbortController};h.abortController.signal.addEventListener("abort",()=>{c=!0}),this.activeResponse=h;let p;if(e==="resume-stream"){const y=await this.transport.reconnectToStream({chatId:this.id,metadata:t,headers:r,body:n});if(y==null){this.setStatus({status:"ready"});return}p=y}else p=await this.transport.sendMessages({chatId:this.id,messages:this.state.messages,abortSignal:h.abortController.signal,metadata:t,headers:r,body:n,trigger:e,messageId:s});const m=y=>this.jobExecutor.run(()=>y({state:h.state,write:()=>{var x;this.setStatus({status:"streaming"}),h.state.message.id===((x=this.lastMessage)==null?void 0:x.id)?this.state.replaceMessage(this.state.messages.length-1,h.state.message):this.state.pushMessage(h.state.message)}}));await Hf({stream:Jf({stream:p,onToolCall:this.onToolCall,onData:this.onData,messageMetadataSchema:this.messageMetadataSchema,dataPartSchemas:this.dataPartSchemas,runUpdateMessageJob:m,onError:y=>{throw y}}),onError:y=>{throw y}}),this.setStatus({status:"ready"})}catch(h){if(c||h.name==="AbortError")return c=!0,this.setStatus({status:"ready"}),null;v=!0,h instanceof TypeError&&(h.message.toLowerCase().includes("fetch")||h.message.toLowerCase().includes("network"))&&(d=!0),this.onError&&h instanceof Error&&this.onError(h),this.setStatus({status:"error",error:h})}finally{try{(i=this.onFinish)==null||i.call(this,{message:this.activeResponse.state.message,messages:this.state.messages,isAbort:c,isDisconnect:d,isError:v,finishReason:(a=this.activeResponse)==null?void 0:a.state.finishReason})}catch(h){console.error(h)}this.activeResponse=void 0}(o=this.sendAutomaticallyWhen)!=null&&o.call(this,{messages:this.state.messages})&&!v&&await this.makeRequest({trigger:"submit-message",messageId:(l=this.lastMessage)==null?void 0:l.id,metadata:t,headers:r,body:n})}},$t,mn;function nh(){if(mn)return $t;mn=1;function e(t,r){if(typeof t!="function")throw new TypeError(`Expected the first argument to be a \`function\`, got \`${typeof t}\`.`);let n,s=0;return function(...i){clearTimeout(n);const o=Date.now(),l=o-s,u=r-l;u<=0?(s=o,t.apply(this,i)):n=setTimeout(()=>{s=Date.now(),t.apply(this,i)},u)}}return $t=e,$t}var sh=nh();const ah=Tn(sh);var Us=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},Z=(e,t,r)=>(Us(e,t,"read from private field"),r?r.call(e):t.get(e)),ue=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},he=(e,t,r,n)=>(Us(e,t,"write to private field"),t.set(e,r),r);function oh(e,t){return t!=null?ah(e,t):e}var te,it,ct,De,Ze,Fe,Ie,qt,Vt,ih=class{constructor(e=[]){ue(this,te,void 0),ue(this,it,"ready"),ue(this,ct,void 0),ue(this,De,new Set),ue(this,Ze,new Set),ue(this,Fe,new Set),this.pushMessage=t=>{he(this,te,Z(this,te).concat(t)),Z(this,Ie).call(this)},this.popMessage=()=>{he(this,te,Z(this,te).slice(0,-1)),Z(this,Ie).call(this)},this.replaceMessage=(t,r)=>{he(this,te,[...Z(this,te).slice(0,t),this.snapshot(r),...Z(this,te).slice(t+1)]),Z(this,Ie).call(this)},this.snapshot=t=>structuredClone(t),this["~registerMessagesCallback"]=(t,r)=>{const n=r?oh(t,r):t;return Z(this,De).add(n),()=>{Z(this,De).delete(n)}},this["~registerStatusCallback"]=t=>(Z(this,Ze).add(t),()=>{Z(this,Ze).delete(t)}),this["~registerErrorCallback"]=t=>(Z(this,Fe).add(t),()=>{Z(this,Fe).delete(t)}),ue(this,Ie,()=>{Z(this,De).forEach(t=>t())}),ue(this,qt,()=>{Z(this,Ze).forEach(t=>t())}),ue(this,Vt,()=>{Z(this,Fe).forEach(t=>t())}),he(this,te,e)}get status(){return Z(this,it)}set status(e){he(this,it,e),Z(this,qt).call(this)}get error(){return Z(this,ct)}set error(e){he(this,ct,e),Z(this,Vt).call(this)}get messages(){return Z(this,te)}set messages(e){he(this,te,[...e]),Z(this,Ie).call(this)}};te=new WeakMap;it=new WeakMap;ct=new WeakMap;De=new WeakMap;Ze=new WeakMap;Fe=new WeakMap;Ie=new WeakMap;qt=new WeakMap;Vt=new WeakMap;var Te,gn=class extends rh{constructor({messages:t,...r}){const n=new ih(t);super({...r,state:n}),ue(this,Te,void 0),this["~registerMessagesCallback"]=(s,a)=>Z(this,Te)["~registerMessagesCallback"](s,a),this["~registerStatusCallback"]=s=>Z(this,Te)["~registerStatusCallback"](s),this["~registerErrorCallback"]=s=>Z(this,Te)["~registerErrorCallback"](s),he(this,Te,n)}};Te=new WeakMap;function ch({experimental_throttle:e,resume:t=!1,...r}={}){const n=k.useRef("chat"in r?r.chat:new gn(r));("chat"in r&&r.chat!==n.current||"id"in r&&n.current.id!==r.id)&&(n.current="chat"in r?r.chat:new gn(r));const a=k.useCallback(c=>n.current["~registerMessagesCallback"](c,e),[e,n.current.id]),i=k.useSyncExternalStore(a,()=>n.current.messages,()=>n.current.messages),o=k.useSyncExternalStore(n.current["~registerStatusCallback"],()=>n.current.status,()=>n.current.status),l=k.useSyncExternalStore(n.current["~registerErrorCallback"],()=>n.current.error,()=>n.current.error),u=k.useCallback(c=>{typeof c=="function"&&(c=c(n.current.messages)),n.current.messages=c},[n]);return k.useEffect(()=>{t&&n.current.resumeStream()},[t,n]),{id:n.current.id,messages:i,setMessages:u,sendMessage:n.current.sendMessage,regenerate:n.current.regenerate,clearError:n.current.clearError,stop:n.current.stop,error:l,resumeStream:n.current.resumeStream,status:o,addToolResult:n.current.addToolOutput,addToolOutput:n.current.addToolOutput}}const uh=({model:e="o4-mini",embeddingModel:t="text-embedding-3-large",provider:r="openai",max_tokens:n=4096,similarityResults:s=50,resources:a=[],chatPrompts:i})=>{const[o,l]=k.useState(""),u=k.useRef(null),c=k.useRef(null),[d,v]=k.useState(i?.[0]?.label||""),{messages:h,sendMessage:p,stop:m,status:y,setMessages:x}=ch(),_=y==="streaming"&&h.length>0,w=y==="submitted"||y==="streaming"&&h.length===0,[g,I]=k.useState(null),[T,C]=k.useState(!1),{currentSession:O,storeMessagesToSession:B,updateSession:de,createSession:Xe}=Mn();k.useEffect(()=>{O&&B(O.id,h)},[h]),k.useEffect(()=>{O&&x(O.messages)},[O]),k.useEffect(()=>{!_&&c.current&&c.current.focus()},[_]);const ve=k.useCallback(async(P,ie)=>{if(!P.trim()||_||w)return;const ce=h.length===0;l(""),requestAnimationFrame(()=>H(!1)),O&&ce&&de({...O,title:P.length>25?`${P.substring(0,22)}...`:P}),p({text:ie||P})},[O,de,l,h.length,_,w,h]),It=k.useCallback((P,ie)=>{let ce=P.body||"";if(!P||!P.data){console.error("handleSubmitWithInputs called without a valid prompt."),C(!1),I(null);return}for(const[ee,et]of Object.entries(ie)){const Oe=`{{${ee}}}`;ce=ce.replaceAll(Oe,`"${et}"`)}ve(P.data.title,ce),C(!1),I(null)},[ve]),A=k.useCallback(P=>{if(!P||!P.data){console.error("handlePredefinedQuestionClick called with invalid prompt:",P);return}P.data?.inputs&&P.data.inputs.length>0?(I(P),C(!0)):ve(P.data.title,P.body)},[ve]),N=k.useCallback(P=>{P?.preventDefault(),ve(o)},[o,p]),H=k.useCallback((P=!0)=>{u.current&&u.current.scrollTo({top:u.current.scrollHeight,behavior:P?"smooth":"auto"})},[]);k.useEffect(()=>{requestAnimationFrame(()=>H(h.length>0&&!w))},[h,w,H]);const Tt=k.useMemo(()=>f.jsxs("div",{className:"space-y-4 max-w-[900px] mx-auto pb-6",children:[h.map((P,ie)=>f.jsx(Dn,{message:{isUser:P.role==="user",content:P.parts.map(ce=>ce.type==="text"?ce.text:"").join(""),timestamp:Date.now()}},P.id)),w&&f.jsx("div",{className:"flex justify-start mb-4",children:f.jsx("div",{className:"flex items-center space-x-2 max-w-[80%] rounded-lg p-3 bg-gray-100 text-gray-800 rounded-bl-none",children:f.jsxs("div",{className:"flex space-x-1",children:[f.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),f.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),f.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})})]}),[h,w]),Ys=k.useCallback(P=>{l(P)},[]),Qs=k.useCallback(P=>{P.key==="Enter"&&!P.shiftKey&&(P.defaultPrevented||N())},[N]);return k.useEffect(()=>{!d&&i&&i.length>0&&v(i[0].label)},[i,d]),k.useEffect(()=>{const P=u.current;if(!P)return;const ie=async ce=>{const ee=ce.target.closest('[data-copy-button="true"]');if(!ee)return;const et=ee.dataset.code;if(et)try{await navigator.clipboard.writeText(et);const Oe=ee.innerHTML;ee.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-check"><polyline points="20 6 9 17 4 12"></polyline></svg>',ee.disabled=!0,setTimeout(()=>{ee.innerHTML=Oe,ee.disabled=!1},1500)}catch(Oe){console.error("Failed to copy code: ",Oe);const Gs=ee.title;ee.title="Failed to copy!",setTimeout(()=>{ee.title=Gs},1500)}};return P.addEventListener("click",ie),()=>{P.removeEventListener("click",ie)}},[]),k.useEffect(()=>{const ie=new URLSearchParams(window.location.search).get("query");ie&&setTimeout(()=>{Xe(),l(ie)},250)},[]),f.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden h-[calc(100vh-60px)] w-full bg-white",children:[h.length===0&&f.jsx(No,{chatPrompts:i,activeCategory:d,setActiveCategory:v,onPromptClick:A,isProcessing:_||w}),h.length>0&&f.jsxs("div",{ref:u,className:"flex-1 overflow-y-auto",children:[h.length>0&&f.jsx("div",{id:"output",className:"p-4 space-y-4 w-full max-w-[900px] mx-auto h-full pb-16",children:Tt}),";"]}),f.jsxs("div",{className:"border-t border-gray-200 p-4 bg-white",children:[f.jsxs("div",{className:"max-w-[900px] mx-auto relative",children:[f.jsx(Co,{suggestions:a.map(P=>({id:P.id,name:P.name||"",type:P.type})),trigger:"@",type:"text",value:o,onChange:Ys,onKeyDown:Qs,placeholder:"Type your message or '@' for events...",className:"w-full px-4 py-3 bg-white text-gray-800 rounded-lg border border-gray-200 focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 disabled:bg-gray-50 disabled:cursor-not-allowed pr-24",disabled:_||w}),f.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:_?f.jsx("button",{onClick:()=>m(),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm font-medium",children:"Stop"}):f.jsxs("button",{onClick:N,disabled:!o.trim()||w,className:"px-4 py-2 flex items-center bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:bg-gray-200 disabled:cursor-not-allowed text-sm font-medium",children:[f.jsx(sa,{size:16,strokeWidth:1.5,className:"mr-2"}),"Send"]})})]}),f.jsxs("div",{className:"max-w-[900px] mx-auto flex justify-between",children:[f.jsxs("p",{className:"text-[10px] text-gray-400 mt-2",children:["Provider: ",r.charAt(0).toUpperCase()+r.slice(1)," | Model: ",e]}),f.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"EventCatalog Chat can make mistakes. Check important info."})]})]}),f.jsx(Oo,{isOpen:T,onClose:()=>C(!1),prompt:g,onSubmit:It,resources:a})]})};var kt=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},lh={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},dh=class{#e=lh;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},Bt=new dh;function fh(e){setTimeout(e,0)}var Et=typeof window>"u"||"Deno"in globalThis;function ae(){}function hh(e,t){return typeof e=="function"?e(t):e}function ph(e){return typeof e=="number"&&e>=0&&e!==1/0}function mh(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Jt(e,t){return typeof e=="function"?e(t):e}function gh(e,t){return typeof e=="function"?e(t):e}function yn(e,t){const{type:r="all",exact:n,fetchStatus:s,predicate:a,queryKey:i,stale:o}=e;if(i){if(n){if(t.queryHash!==pr(i,t.options))return!1}else if(!Ye(t.queryKey,i))return!1}if(r!=="all"){const l=t.isActive();if(r==="active"&&!l||r==="inactive"&&l)return!1}return!(typeof o=="boolean"&&t.isStale()!==o||s&&s!==t.state.fetchStatus||a&&!a(t))}function vn(e,t){const{exact:r,status:n,predicate:s,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(r){if(He(t.options.mutationKey)!==He(a))return!1}else if(!Ye(t.options.mutationKey,a))return!1}return!(n&&t.state.status!==n||s&&!s(t))}function pr(e,t){return(t?.queryKeyHashFn||He)(e)}function He(e){return JSON.stringify(e,(t,r)=>Ht(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function Ye(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Ye(e[r],t[r])):!1}var yh=Object.prototype.hasOwnProperty;function Ws(e,t){if(e===t)return e;const r=bn(e)&&bn(t);if(!r&&!(Ht(e)&&Ht(t)))return t;const s=(r?e:Object.keys(e)).length,a=r?t:Object.keys(t),i=a.length,o=r?new Array(i):{};let l=0;for(let u=0;u<i;u++){const c=r?u:a[u],d=e[c],v=t[c];if(d===v){o[c]=d,(r?u<s:yh.call(e,c))&&l++;continue}if(d===null||v===null||typeof d!="object"||typeof v!="object"){o[c]=v;continue}const h=Ws(d,v);o[c]=h,h===d&&l++}return s===i&&l===s?e:o}function bn(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Ht(e){if(!wn(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!wn(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function wn(e){return Object.prototype.toString.call(e)==="[object Object]"}function vh(e){return new Promise(t=>{Bt.setTimeout(t,e)})}function bh(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?Ws(e,t):t}function wh(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function xh(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var mr=Symbol();function qs(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===mr?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var _h=class extends kt{#e;#t;#r;constructor(){super(),this.#r=e=>{if(!Et&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},Vs=new _h;function Sh(){let e,t;const r=new Promise((s,a)=>{e=s,t=a});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),e(s)},r.reject=s=>{n({status:"rejected",reason:s}),t(s)},r}var kh=fh;function Eh(){let e=[],t=0,r=o=>{o()},n=o=>{o()},s=kh;const a=o=>{t?e.push(o):s(()=>{r(o)})},i=()=>{const o=e;e=[],o.length&&s(()=>{n(()=>{o.forEach(l=>{r(l)})})})};return{batch:o=>{let l;t++;try{l=o()}finally{t--,t||i()}return l},batchCalls:o=>(...l)=>{a(()=>{o(...l)})},schedule:a,setNotifyFunction:o=>{r=o},setBatchNotifyFunction:o=>{n=o},setScheduler:o=>{s=o}}}var Q=Eh(),Ih=class extends kt{#e=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!Et&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(r=>{r(e)}))}isOnline(){return this.#e}},bt=new Ih;function Th(e){return Math.min(1e3*2**e,3e4)}function Bs(e){return(e??"online")==="online"?bt.isOnline():!0}var Yt=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function Js(e){let t=!1,r=0,n;const s=Sh(),a=()=>s.status!=="pending",i=m=>{if(!a()){const y=new Yt(m);v(y),e.onCancel?.(y)}},o=()=>{t=!0},l=()=>{t=!1},u=()=>Vs.isFocused()&&(e.networkMode==="always"||bt.isOnline())&&e.canRun(),c=()=>Bs(e.networkMode)&&e.canRun(),d=m=>{a()||(n?.(),s.resolve(m))},v=m=>{a()||(n?.(),s.reject(m))},h=()=>new Promise(m=>{n=y=>{(a()||u())&&m(y)},e.onPause?.()}).then(()=>{n=void 0,a()||e.onContinue?.()}),p=()=>{if(a())return;let m;const y=r===0?e.initialPromise:void 0;try{m=y??e.fn()}catch(x){m=Promise.reject(x)}Promise.resolve(m).then(d).catch(x=>{if(a())return;const _=e.retry??(Et?0:3),w=e.retryDelay??Th,g=typeof w=="function"?w(r,x):w,I=_===!0||typeof _=="number"&&r<_||typeof _=="function"&&_(r,x);if(t||!I){v(x);return}r++,e.onFail?.(r,x),vh(g).then(()=>u()?void 0:h()).then(()=>{t?v(x):p()})})};return{promise:s,status:()=>s.status,cancel:i,continue:()=>(n?.(),s),cancelRetry:o,continueRetry:l,canStart:c,start:()=>(c()?p():h().then(p),s)}}var Hs=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),ph(this.gcTime)&&(this.#e=Bt.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Et?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Bt.clearTimeout(this.#e),this.#e=void 0)}},Ch=class extends Hs{#e;#t;#r;#s;#n;#o;#i;constructor(e){super(),this.#i=!1,this.#o=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#s=e.client,this.#r=this.#s.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=_n(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(e){if(this.options={...this.#o,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=_n(this.options);t.data!==void 0&&(this.setState(xn(t.data,t.dataUpdatedAt)),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,t){const r=bh(this.state.data,e,this.options);return this.#a({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#a({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#n?.promise;return this.#n?.cancel(e),t?t.then(ae).catch(ae):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>gh(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===mr||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Jt(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!mh(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#n&&(this.#i?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#n?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(e&&this.setOptions(e),!this.options.queryFn){const o=this.observers.find(l=>l.options.queryFn);o&&this.setOptions(o.options)}const r=new AbortController,n=o=>{Object.defineProperty(o,"signal",{enumerable:!0,get:()=>(this.#i=!0,r.signal)})},s=()=>{const o=qs(this.options,t),u=(()=>{const c={client:this.#s,queryKey:this.queryKey,meta:this.meta};return n(c),c})();return this.#i=!1,this.options.persister?this.options.persister(o,u,this):o(u)},i=(()=>{const o={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#s,state:this.state,fetchFn:s};return n(o),o})();this.options.behavior?.onFetch(i,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==i.fetchOptions?.meta)&&this.#a({type:"fetch",meta:i.fetchOptions?.meta}),this.#n=Js({initialPromise:t?.initialPromise,fn:i.fetchFn,onCancel:o=>{o instanceof Yt&&o.revert&&this.setState({...this.#t,fetchStatus:"idle"}),r.abort()},onFail:(o,l)=>{this.#a({type:"failed",failureCount:o,error:l})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:i.options.retry,retryDelay:i.options.retryDelay,networkMode:i.options.networkMode,canRun:()=>!0});try{const o=await this.#n.start();if(o===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(o),this.#r.config.onSuccess?.(o,this),this.#r.config.onSettled?.(o,this.state.error,this),o}catch(o){if(o instanceof Yt){if(o.silent)return this.#n.promise;if(o.revert){if(this.state.data===void 0)throw o;return this.state.data}}throw this.#a({type:"error",error:o}),this.#r.config.onError?.(o,this),this.#r.config.onSettled?.(this.state.data,o,this),o}finally{this.scheduleGc()}}#a(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Oh(r.data,this.options),fetchMeta:e.meta??null};case"success":const n={...r,...xn(e.data,e.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?n:void 0,n;case"error":const s=e.error;return{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),Q.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function Oh(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Bs(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function xn(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function _n(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}function Sn(e){return{onFetch:(t,r)=>{const n=t.options,s=t.fetchOptions?.meta?.fetchMore?.direction,a=t.state.data?.pages||[],i=t.state.data?.pageParams||[];let o={pages:[],pageParams:[]},l=0;const u=async()=>{let c=!1;const d=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(t.signal.aborted?c=!0:t.signal.addEventListener("abort",()=>{c=!0}),t.signal)})},v=qs(t.options,t.fetchOptions),h=async(p,m,y)=>{if(c)return Promise.reject();if(m==null&&p.pages.length)return Promise.resolve(p);const _=(()=>{const T={client:t.client,queryKey:t.queryKey,pageParam:m,direction:y?"backward":"forward",meta:t.options.meta};return d(T),T})(),w=await v(_),{maxPages:g}=t.options,I=y?xh:wh;return{pages:I(p.pages,w,g),pageParams:I(p.pageParams,m,g)}};if(s&&a.length){const p=s==="backward",m=p?Ph:kn,y={pages:a,pageParams:i},x=m(n,y);o=await h(y,x,p)}else{const p=e??a.length;do{const m=l===0?i[0]??n.initialPageParam:kn(n,o);if(l>0&&m==null)break;o=await h(o,m),l++}while(l<p)}return o};t.options.persister?t.fetchFn=()=>t.options.persister?.(u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=u}}}function kn(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function Ph(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}var jh=class extends Hs{#e;#t;#r;#s;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#r=e.mutationCache,this.#t=[],this.state=e.state||Nh(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#r.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#r.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#n({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#s=Js({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(a,i)=>{this.#n({type:"failed",failureCount:a,error:i})},onPause:()=>{this.#n({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#r.canRun(this)});const n=this.state.status==="pending",s=!this.#s.canStart();try{if(n)t();else{this.#n({type:"pending",variables:e,isPaused:s}),await this.#r.config.onMutate?.(e,this,r);const i=await this.options.onMutate?.(e,r);i!==this.state.context&&this.#n({type:"pending",context:i,variables:e,isPaused:s})}const a=await this.#s.start();return await this.#r.config.onSuccess?.(a,e,this.state.context,this,r),await this.options.onSuccess?.(a,e,this.state.context,r),await this.#r.config.onSettled?.(a,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(a,null,e,this.state.context,r),this.#n({type:"success",data:a}),a}catch(a){try{throw await this.#r.config.onError?.(a,e,this.state.context,this,r),await this.options.onError?.(a,e,this.state.context,r),await this.#r.config.onSettled?.(void 0,a,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(void 0,a,e,this.state.context,r),a}finally{this.#n({type:"error",error:a})}}finally{this.#r.runNext(this)}}#n(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Q.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(e)}),this.#r.notify({mutation:this,type:"updated",action:e})})}};function Nh(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Mh=class extends kt{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(e,t,r){const n=new jh({client:e,mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(t),state:r});return this.add(n),n}add(e){this.#e.add(e);const t=st(e);if(typeof t=="string"){const r=this.#t.get(t);r?r.push(e):this.#t.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=st(e);if(typeof t=="string"){const r=this.#t.get(t);if(r)if(r.length>1){const n=r.indexOf(e);n!==-1&&r.splice(n,1)}else r[0]===e&&this.#t.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=st(e);if(typeof t=="string"){const n=this.#t.get(t)?.find(s=>s.state.status==="pending");return!n||n===e}else return!0}runNext(e){const t=st(e);return typeof t=="string"?this.#t.get(t)?.find(n=>n!==e&&n.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Q.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(r=>vn(t,r))}findAll(e={}){return this.getAll().filter(t=>vn(e,t))}notify(e){Q.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Q.batch(()=>Promise.all(e.map(t=>t.continue().catch(ae))))}};function st(e){return e.options.scope?.id}var zh=class extends kt{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,r){const n=t.queryKey,s=t.queryHash??pr(n,t);let a=this.get(s);return a||(a=new Ch({client:e,queryKey:n,queryHash:s,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(n)}),this.add(a)),a}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Q.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>yn(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>yn(e,r)):t}notify(e){Q.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Q.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Q.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Ah=class{#e;#t;#r;#s;#n;#o;#i;#a;constructor(e={}){this.#e=e.queryCache||new zh,this.#t=e.mutationCache||new Mh,this.#r=e.defaultOptions||{},this.#s=new Map,this.#n=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#i=Vs.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=bt.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#i?.(),this.#i=void 0,this.#a?.(),this.#a=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=this.#e.build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Jt(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=this.#e.get(n.queryHash)?.state.data,i=hh(t,a);if(i!==void 0)return this.#e.build(this,n).setData(i,{...r,manual:!0})}setQueriesData(e,t,r){return Q.batch(()=>this.#e.findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;Q.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=this.#e;return Q.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=Q.batch(()=>this.#e.findAll(e).map(s=>s.cancel(r)));return Promise.all(n).then(ae).catch(ae)}invalidateQueries(e,t={}){return Q.batch(()=>(this.#e.findAll(e).forEach(r=>{r.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=Q.batch(()=>this.#e.findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,r);return r.throwOnError||(a=a.catch(ae)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(n).then(ae)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=this.#e.build(this,t);return r.isStaleByTime(Jt(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(ae).catch(ae)}fetchInfiniteQuery(e){return e.behavior=Sn(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(ae).catch(ae)}ensureInfiniteQueryData(e){return e.behavior=Sn(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return bt.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,t){this.#s.set(He(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#s.values()],r={};return t.forEach(n=>{Ye(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){this.#n.set(He(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#n.values()],r={};return t.forEach(n=>{Ye(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=pr(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===mr&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},$h=k.createContext(void 0),Rh=({client:e,children:t})=>(k.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),f.jsx($h.Provider,{value:e,children:t}));const op=({chatConfig:e,resources:t,chatPrompts:r,output:n})=>{const s=new Ah;return n!=="server"?f.jsx("div",{className:"flex justify-center items-center h-full bg-gray-100 p-4 rounded-lg text-center",children:f.jsxs("div",{className:"space-y-4",children:[f.jsx("h1",{className:"text-3xl font-semibold text-gray-800",children:"Chat is only supported on server side"}),f.jsxs("p",{className:"text-sm text-gray-500",children:["Please switch to server side by setting the ",f.jsx("code",{className:"font-mono bg-gray-100 p-0.5 rounded",children:"output"})," ","property to ",f.jsx("code",{className:"font-mono bg-gray-100 p-0.5 rounded",children:"server"})," in your"," ",f.jsx("code",{className:"font-mono bg-gray-100 p-0.5 rounded",children:"eventcatalog.config.js"})," file."]})]})}):f.jsx(Io,{children:f.jsxs("div",{className:"flex overflow-hidden w-full",children:[f.jsx(To,{}),f.jsx(Rh,{client:s,children:f.jsx(uh,{...e,resources:t,chatPrompts:r})})]})})};export{op as default};
