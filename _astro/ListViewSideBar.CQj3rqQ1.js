import{j as e}from"./jsx-runtime.DCqPeNwG.js";import{R as P,r as b}from"./index.66AI1_x2.js";import{a as C,b as Z}from"./url-builder.Ce_ff4_l.js";import{F as G}from"./ChevronDownIcon.DacXGLUg.js";import{F as oe,a as ce}from"./ChevronDoubleUpIcon.DkPV3ioI.js";import{P as de}from"./panel-left.CnGaY6NH.js";import"./_commonjsHelpers.Cpj98o6Y.js";import"./createLucideIcon.BukmfUhN.js";const N=({isCollapsed:t,onToggle:l,title:p,children:r,className:c=""})=>e.jsxs("div",{className:c,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:g=>{g.stopPropagation(),l()},className:"p-1 hover:bg-gray-100 rounded-md",children:e.jsx("div",{className:`transition-transform duration-150 ${t?"":"rotate-180"}`,children:e.jsx(G,{className:"h-3 w-3 text-gray-500"})})}),typeof p=="string"?e.jsx("button",{onClick:g=>{g.stopPropagation(),l()},className:"flex-grow flex items-center justify-between px-2 py-0.5 text-xs font-bold rounded-md",children:p}):p]}),e.jsx("div",{className:`overflow-hidden transition-[height] duration-150 ease-out ${t?"h-0":"h-auto"}`,children:r})]}),pe=P.memo(({text:t,searchTerm:l})=>{if(!l)return e.jsx(e.Fragment,{children:t});const p=new RegExp(`(${l})`,"gi"),r=t.split(p);return e.jsx(e.Fragment,{children:r.map((c,g)=>p.test(c)?e.jsx("span",{className:"bg-yellow-200 text-gray-900 font-semibold",children:c},g):e.jsx("span",{children:c},g))})}),xe=(t,l)=>{if(!l)return H(t);if(l&&["GET","POST","PUT","DELETE","PATCH","HEAD","OPTIONS","TRACE","CONNECT"].includes(l.toUpperCase())){if(l.toUpperCase()==="GET")return"bg-blue-50 text-blue-600";if(l.toUpperCase()==="POST")return"bg-green-50 text-green-600";if(l.toUpperCase()==="PUT")return"bg-yellow-50 text-yellow-600";if(l.toUpperCase()==="DELETE")return"bg-red-50 text-red-600";if(l.toUpperCase()==="PATCH")return"bg-purple-50 text-purple-600";if(l.toUpperCase()==="HEAD")return"bg-gray-50 text-gray-600";if(l.toUpperCase()==="OPTIONS")return"bg-orange-50 text-orange-600"}return H(t)},k=({messages:t,decodedCurrentPath:l,searchTerm:p})=>e.jsx("ul",{className:"space-y-0.5 border-l border-gray-200/80 ml-[9px] pl-4",children:t.map(r=>e.jsx("li",{"data-active":l===r.href,children:e.jsxs("a",{href:r.href,"data-active":l===r.href,className:`flex items-center justify-between px-2 py-1.5 text-xs text-gray-600 hover:bg-purple-100 rounded-md ${l.includes(r.href)?"bg-purple-100 ":"hover:bg-purple-100"}`,title:r.data?.sidebar?.label||r.data.name,children:[e.jsxs("span",{className:"truncate",children:[e.jsx(pe,{text:r.data?.sidebar?.label||r.data.name,searchTerm:p}),e.jsx("span",{className:"text-xs text-gray-400",children:r.data.draft?" (DRAFT)":""})]}),e.jsx("span",{className:`ml-2 text-[10px]  flex items-center gap-1 font-medium px-2 uppercase py-0.5 rounded ${xe(r.collection,r.data?.sidebar?.badge)} ${r.data?.sidebar?.backgroundColor}`,children:r.data?.sidebar?.badge||ee(r.collection,r)})]})},r.id))}),he=({specifications:t,id:l,version:p})=>{const r=t.filter(h=>h.type==="asyncapi"),c=t.filter(h=>h.type==="openapi"),g=t.filter(h=>h.type==="graphql");return e.jsxs("ul",{className:"space-y-0.5 border-l border-gray-200/80 ml-[9px] pl-4",children:[r&&r.length>0&&r.map(h=>e.jsxs("a",{href:C(`/docs/services/${l}/${p}/asyncapi/${h.filenameWithoutExtension}`),"data-active":window.location.href.includes(`docs/services/${l}/${p}/asyncapi`),className:`flex items-center px-2 py-1.5 text-xs text-gray-600 hover:bg-purple-100 rounded-md justify-between ${window.location.href.includes(`docs/services/${l}/${p}/asyncapi`)?"bg-purple-100":"hover:bg-purple-100"}`,children:[e.jsx("span",{className:"truncate flex items-center gap-1",children:h.name}),e.jsx("span",{className:"text-purple-600 ml-2 text-[10px] uppercase font-medium bg-gray-50 px-4 py-0.5 rounded",children:e.jsx("img",{src:C("/icons/asyncapi.svg",!0),className:"w-4 h-4",alt:"AsyncAPI"})})]},`${h.name}-asyncapi`)),c&&c.length>0&&c.map(h=>e.jsxs("a",{href:C(`/docs/services/${l}/${p}/spec/${h.filenameWithoutExtension}`),"data-active":window.location.href.includes(`docs/services/${l}/${p}/spec/${h.filenameWithoutExtension}`),className:`items-center px-2 py-1.5 text-xs text-gray-600 hover:bg-purple-100 rounded-md flex justify-between ${window.location.href.includes(`docs/services/${l}/${p}/spec/${h.filenameWithoutExtension}`)?"bg-purple-100":"hover:bg-purple-100"}`,children:[e.jsx("span",{className:"truncate flex items-center gap-1",children:h.name}),e.jsx("span",{className:"text-green-600 ml-2 text-[10px] uppercase font-medium bg-gray-50 px-4 py-0.5 rounded",children:e.jsx("img",{src:C("/icons/openapi.svg",!0),className:"w-4 h-4",alt:"OpenAPI"})})]},`${h.name}-openapi`)),g&&g.length>0&&g.map(h=>e.jsxs("a",{href:C(`/docs/services/${l}/${p}/graphql/${h.filenameWithoutExtension}`),"data-active":window.location.href.includes(`docs/services/${l}/${p}/graphql/${h.filenameWithoutExtension}`),className:`items-center px-2 py-1.5 text-xs text-gray-600 hover:bg-purple-100 rounded-md flex justify-between ${window.location.href.includes(`docs/services/${l}/${p}/graphql/${h.filenameWithoutExtension}`)?"bg-purple-100":"hover:bg-purple-100"}`,children:[e.jsx("span",{className:"truncate flex items-center gap-1",children:h.name}),e.jsx("span",{className:"text-green-600 ml-2 text-[10px] uppercase font-medium bg-gray-50 px-4 py-0.5 rounded",children:e.jsx("img",{src:C("/icons/graphql.svg",!0),className:"w-4 h-4",alt:"GraphQL"})})]},`${h.name}-openapi`))]})},z="EventCatalog:catalogSidebarCollapsedGroups",ue=300,A=P.memo(({text:t,searchTerm:l})=>{if(!l)return e.jsx(e.Fragment,{children:t});const p=new RegExp(`(${l})`,"gi"),r=t.split(p);return e.jsx(e.Fragment,{children:r.map((c,g)=>p.test(c)?e.jsx("span",{className:"bg-yellow-200 text-gray-900 font-semibold",children:c},g):e.jsx("span",{children:c},g))})}),H=t=>t==="commands"?"bg-blue-50 text-blue-600":t==="queries"?"bg-green-50 text-green-600":t==="events"?"bg-orange-50 text-orange-600":t==="entities"?"bg-purple-50 text-purple-600":"text-gray-600",ee=(t,l)=>t==="commands"?"Command":t==="queries"?"Query":t==="events"?"Event":t==="entities"&&l.data.aggregateRoot?"Entity (Root)":t==="entities"?"Entity":t.slice(0,t.length-1).toUpperCase(),fe=P.memo(({searchTerm:t})=>e.jsxs("div",{className:"px-4 py-6 text-center",children:[e.jsxs("div",{className:"text-gray-400 text-sm mb-2",children:['No results found for "',t,'"']}),e.jsxs("div",{className:"text-gray-400 text-xs",children:["Try:",e.jsxs("ul",{className:"mt-2 space-y-1 text-left list-disc pl-4",children:[e.jsx("li",{children:"Checking for typos"}),e.jsx("li",{children:"Using fewer keywords"}),e.jsx("li",{children:"Using more general terms"})]})]})]})),X=P.memo(({item:t,decodedCurrentPath:l,collapsedGroups:p,toggleGroupCollapse:r,isVisualizer:c,searchTerm:g})=>{const h=t.writesTo.filter(m=>t.readsFrom.some(T=>T.id===m.id)),u=t.readsFrom.filter(m=>!h.some(T=>T.id===m.id)),L=t.writesTo.filter(m=>!h.some(T=>T.id===m.id)),O=t.writesTo.length>0||t.readsFrom.length>0,M=t.sends&&t.sends.length>0,D=t.receives&&t.receives.length>0;return e.jsx(N,{isCollapsed:p[t.href],onToggle:()=>r(t.href),title:e.jsxs("button",{onClick:m=>{m.stopPropagation(),r(t.href)},className:"flex justify-between items-center pl-2 w-full text-xs",title:t.label,children:[e.jsxs("span",{className:"truncate text-xs font-bold",children:[e.jsx(A,{text:t.label,searchTerm:g}),e.jsx("span",{className:"text-xs text-gray-400",children:t.draft?" (DRAFT)":""})]}),e.jsx("span",{style:{color:t.sidebar?.color||"#9333ea",backgroundColor:t.sidebar?.backgroundColor||"#faf5ff"},className:"ml-2 rounded bg-purple-50 px-2 py-0.5 text-[10px] font-medium text-purple-600",children:t.sidebar?.badge?t.sidebar.badge?.toUpperCase():"SERVICE"})]}),children:e.jsxs("div",{className:"space-y-0.5 border-gray-200/80 border-l pl-3 ml-[9px] mt-1",children:[e.jsx("a",{href:`${t.href}`,"data-active":l===t.href,className:`flex items-center px-2 py-1.5 text-xs text-gray-600 hover:bg-purple-100 rounded-md ${l===t.href?"bg-purple-100":"hover:bg-purple-100"}`,children:e.jsx("span",{className:"truncate",children:"Overview"})}),c&&O&&e.jsx("a",{href:C(`/${t.href}/data`),"data-active":l===`${t.href}/data`,className:`flex items-center px-2 py-1.5 text-xs text-gray-600 hover:bg-purple-100 rounded-md ${l===`${t.href}/data`?"bg-purple-100 ":"hover:bg-purple-100"}`,children:e.jsx("span",{className:"truncate",children:"Data Diagram"})}),!c&&e.jsx("a",{href:Z("/architecture/docs/messages",{serviceName:t.name,serviceId:t.id}),"data-active":window.location.href.includes(`serviceId=${t.id}`),className:`flex items-center px-2 py-1.5 text-xs text-gray-600 hover:bg-purple-100 rounded-md ${window.location.href.includes(`serviceId=${t.id}`)?"bg-purple-100":"hover:bg-purple-100"}`,children:e.jsx("span",{className:"truncate flex items-center gap-1",children:"Architecture"})}),!c&&t.specifications&&t.specifications.length>0&&e.jsx(N,{isCollapsed:p[`${t.href}-specifications`],onToggle:()=>r(`${t.href}-specifications`),title:e.jsxs("button",{onClick:m=>{m.stopPropagation(),r(`${t.href}-specifications`)},className:"truncate underline ml-2 text-xs mb-1 py-1",children:["Specifications (",t.specifications?.length,")"]}),children:e.jsx(he,{specifications:t.specifications,id:t.id,version:t.version})}),D&&e.jsx(N,{isCollapsed:p[`${t.href}-receives`],onToggle:()=>r(`${t.href}-receives`),title:e.jsxs("button",{onClick:m=>{m.stopPropagation(),r(`${t.href}-receives`)},className:"truncate underline ml-2 text-xs mb-1 py-1",children:["Receives messages (",t.receives.length,")"]}),children:e.jsx(k,{messages:t.receives,decodedCurrentPath:l,searchTerm:g})}),M&&e.jsx(N,{isCollapsed:p[`${t.href}-sends`],onToggle:()=>r(`${t.href}-sends`),title:e.jsxs("button",{onClick:m=>{m.stopPropagation(),r(`${t.href}-sends`)},className:"truncate underline ml-2 text-xs mb-1 py-1",children:["Sends messages (",t.sends.length,")"]}),children:e.jsx(k,{messages:t.sends,decodedCurrentPath:l,searchTerm:g})}),!c&&O&&e.jsxs(N,{isCollapsed:p[`${t.href}-data`],onToggle:()=>r(`${t.href}-data`),title:e.jsxs("button",{onClick:m=>{m.stopPropagation(),r(`${t.href}-data`)},className:"truncate underline ml-2 text-xs mb-1 py-1",children:["Data Stores (",h.length+L.length+u.length,")"]}),children:[h.length>0&&e.jsx(N,{className:"ml-4",isCollapsed:p[`${t.href}-writesTo-data`],onToggle:()=>r(`${t.href}-writesTo-data`),title:e.jsx("button",{onClick:m=>{m.stopPropagation(),r(`${t.href}-writesTo-data`)},className:"truncate underline ml-2 text-xs mb-1 py-1",children:"Reads and writes to"}),children:e.jsx(k,{messages:h,decodedCurrentPath:l,searchTerm:g})}),L.length>0&&e.jsx(N,{className:"ml-4",isCollapsed:p[`${t.href}-writesTo-data`],onToggle:()=>r(`${t.href}-writesTo-data`),title:e.jsx("button",{onClick:m=>{m.stopPropagation(),r(`${t.href}-writesTo-data`)},className:"truncate underline ml-2 text-xs mb-1 py-1",children:"Writes to"}),children:e.jsx(k,{messages:L,decodedCurrentPath:l,searchTerm:g})}),u.length>0&&e.jsx(N,{className:"ml-4",isCollapsed:p[`${t.href}-readsFrom-data`],onToggle:()=>r(`${t.href}-readsFrom-data`),title:e.jsx("button",{onClick:m=>{m.stopPropagation(),r(`${t.href}-readsFrom-data`)},className:"truncate underline ml-2 text-xs mb-1 py-1",children:"Reads From"}),children:e.jsx(k,{messages:u,decodedCurrentPath:l,searchTerm:g})})]}),!c&&t.entities.length>0&&e.jsx(N,{isCollapsed:p[`${t.href}-entities`],onToggle:()=>r(`${t.href}-entities`),title:e.jsxs("button",{onClick:m=>{m.stopPropagation(),r(`${t.href}-entities`)},className:"truncate underline ml-2 text-xs mb-1 py-1",children:["Entities (",t.entities.length,")"]}),children:e.jsx(k,{messages:t.entities,decodedCurrentPath:l,searchTerm:g})})]})})}),me=({resources:t,currentPath:l,showOrphanedMessages:p})=>{const r=b.useRef(null),[c]=b.useState(t),[g,h]=b.useState(""),[u,L]=b.useState(""),[O,M]=b.useState(!1),[D,m]=b.useState(!0),[T,B]=b.useState(!1),[V,se]=b.useState(0),[v,F]=b.useState(()=>{if(typeof window<"u"){const s=window.localStorage.getItem(z),a=s?JSON.parse(s):{},f=window.location.pathname,n={"all-services-group":!0,"flows-group":!0,"data-group":!0,"designs-group":!0,"messagesNotInService-group":!0};return t.domains?.forEach(i=>{const $=f.includes(i.href);n[i.href]=!$,n[`${i.href}-entities`]=!0,n[`${i.href}-subdomains`]=!0,n[`${i.href}-services`]=!0}),t.services?.forEach(i=>{const $=f.includes(i.href);n[i.href]=!$,n[`${i.href}-specifications`]=!0,n[`${i.href}-receives`]=!0,n[`${i.href}-sends`]=!0,n[`${i.href}-entities`]=!0,n[`${i.href}-data`]=!0,n[`${i.href}-writesTo-data`]=!0,n[`${i.href}-readsFrom-data`]=!0}),M(!0),{...n,...a}}return{}}),d=window.location.pathname,I=window.location.pathname.includes("/visualiser/");b.useEffect(()=>{const s=setTimeout(()=>{L(g.toLowerCase())},ue);return()=>clearTimeout(s)},[g]);const o=b.useMemo(()=>{if(!u)return c;const s=n=>n.label.toLowerCase().includes(u)||n.id&&n.id.toLowerCase().includes(u),a=n=>n.filter(i=>i.data.name.toLowerCase().includes(u)||i.id.toLowerCase().includes(u)),f=n=>{const i=[];return n.forEach($=>{const x=s($),y=n.some(E=>(E.domains||[]).some(S=>S.data.id===$.id));let W=!1;if(!y){const E=$.domains||[];W=n.some(w=>E.some(S=>S.data.id===w.id&&s(w)))}if((x||W||y&&x)&&i.push($),y&&x){const E=n.find(w=>(w.domains||[]).some(R=>R.data.id===$.id));E&&!i.some(w=>w.id===E.id)&&i.push(E)}}),i};return{"context-map":c["context-map"]?.filter(s)||[],domains:c.domains?f(c.domains):[],services:c.services?.map(n=>({...n,sends:a(n.sends),receives:a(n.receives),isVisible:s(n)||n.sends.some(i=>i.data.name.toLowerCase().includes(u)||i.id.toLowerCase().includes(u))||n.receives.some(i=>i.data.name.toLowerCase().includes(u)||i.id.toLowerCase().includes(u))})).filter(n=>n.isVisible)||[],flows:c.flows?.filter(s)||[],designs:c.designs?.filter(s)||[],messagesNotInService:c.messagesNotInService?.filter(n=>n.label.toLowerCase().includes(u)||n.id.toLowerCase().includes(u))||[]}},[c,u]);b.useEffect(()=>{if(u){const s={...v};Object.keys(s).forEach(a=>{s[a]=!1}),F(s)}},[u]),b.useEffect(()=>{const s=r.current;if(!s)return;const a=()=>{const f=s.scrollTop,n=50;f>n&&f>V?B(!0):f<=n&&B(!1),se(f)};return s.addEventListener("scroll",a),()=>s.removeEventListener("scroll",a)},[V]),b.useEffect(()=>{typeof window<"u"&&window.localStorage.setItem(z,JSON.stringify(v))},[v]),b.useEffect(()=>{const s=document.querySelector('[data-active="true"]');if(s){s.scrollIntoView({behavior:"instant",block:"center"});const a={...v};c.domains?.forEach(x=>{d.includes(x.href)&&(a[x.href]=!1,x.entities?.some(w=>d.includes(w.href))&&(a[`${x.href}-entities`]=!1),x.services?.some(w=>d.includes(w.data.id))&&(a[`${x.href}-services`]=!1),(x.domains||[]).forEach(w=>{const S=c.domains?.find(R=>R.id===w.data.id);S&&d.includes(S.href)&&(a[`${x.href}-subdomains`]=!1,a[S.href]=!1,S.entities?.some(q=>d.includes(q.href))&&(a[`${S.href}-entities`]=!1),S.services?.some(q=>d.includes(q.data.id))&&(a[`${S.href}-services`]=!1))}))}),c.services?.forEach(x=>{d.includes(x.href)&&(a["all-services-group"]=!1,a[x.href]=!1,d.includes("/data")&&(a[`${x.href}-data`]=!1))}),c.flows?.some(x=>d===x.href)&&(a["flows-group"]=!1),c.containers?.some(x=>d===x.href)&&(a["data-group"]=!1),c.designs?.some(x=>d===x.href)&&(a["designs-group"]=!1),c.messagesNotInService?.some(x=>d===x.href)&&(a["messagesNotInService-group"]=!1),F(a)}},[]);const j=b.useCallback(s=>{F(a=>({...a,[s]:!a[s]}))},[]),te=b.useCallback(s=>{h(s.target.value)},[]),Q=b.useCallback(()=>{const s={};o.domains?.forEach(a=>{s[a.href]=!0,s[`${a.href}-entities`]=!0,s[`${a.href}-subdomains`]=!0,s[`${a.href}-services`]=!0}),o.services?.forEach(a=>{s[a.href]=!0,s[`${a.href}-specifications`]=!0,s[`${a.href}-receives`]=!0,s[`${a.href}-sends`]=!0,s[`${a.href}-entities`]=!0}),F(s),m(!1)},[o]),J=b.useCallback(()=>{const s={};o.domains?.forEach(a=>{s[a.href]=!1,s[`${a.href}-entities`]=!1,s[`${a.href}-subdomains`]=!1,s[`${a.href}-services`]=!1}),o.services?.forEach(a=>{s[a.href]=!1,s[`${a.href}-specifications`]=!1,s[`${a.href}-receives`]=!1,s[`${a.href}-sends`]=!1,s[`${a.href}-entities`]=!1}),F(s),m(!0)},[o]),ae=b.useCallback(()=>{D?Q():J()},[D,Q,J]),re=b.useCallback(()=>{window.dispatchEvent(new CustomEvent("sidebarToggle",{detail:{action:"hide"}}))},[]),Y=b.useMemo(()=>s=>(c.domains||[]).some(f=>(f.domains||[]).some(i=>i.data.id===s.id)),[c.domains]),ne=b.useMemo(()=>s=>s.filter(a=>!Y(a)),[Y]),U=b.useMemo(()=>(s,a)=>{const f=s.domains||[];return a.filter(n=>f.some(i=>i.data.id===n.id))},[]),le=b.useMemo(()=>(s,a,f)=>{const n=s.services||[],$=U(s,f).flatMap(x=>(x.services||[]).map(y=>y.data.id));return a.filter(x=>n.some(y=>y.data.id===x.id)&&!$.includes(x.id))},[U]),_=P.memo(({item:s,isSubdomain:a=!1,nestingLevel:f=0})=>{const n=f>0?`ml-${f*4}`:"";return e.jsxs("div",{className:`flex items-center ${n}`,children:[e.jsx("button",{onClick:i=>{i.stopPropagation(),j(s.href)},className:"p-1 hover:bg-gray-100 rounded-md",title:s.label,children:e.jsx("div",{className:`transition-transform duration-150 ${v[s.href]?"":"rotate-180"}`,children:e.jsx(G,{className:"h-3 w-3 text-gray-500"})})}),e.jsxs("button",{onClick:i=>{i.stopPropagation(),j(s.href)},className:`flex-grow flex items-center justify-between px-2 py-0.5 text-xs font-bold rounded-md ${d===s.href?"bg-purple-100":"hover:bg-purple-100"}`,title:s.label,children:[e.jsx("span",{className:"truncate",children:e.jsx(A,{text:s.label,searchTerm:u})}),e.jsx("span",{className:"text-yellow-600 ml-2 text-[10px] font-medium bg-yellow-50 px-2 py-0.5 rounded",children:a?"SUBDOMAIN":"DOMAIN"})]})]})}),K=P.memo(({item:s,nestingLevel:a=0,className:f="",isSubdomain:n=!1})=>{const i=a>0?`ml-${a*4}`:"",$=s.entities&&s.entities.length>0,x=le(s,o.services||[],o.domains||[]);return e.jsx("div",{className:`overflow-hidden transition-[height] duration-150 ease-out ${v[s.href]?"h-0":"h-auto"} ${f}`,children:e.jsxs("div",{className:`space-y-0.5 border-gray-200/80 border-l pl-4  mt-1 ${i||"ml-[9px]"}`,children:[e.jsx("a",{href:`${s.href}`,"data-active":d===s.href,className:`flex items-center px-2 py-1.5 text-xs text-gray-600 hover:bg-purple-100 rounded-md ${d===s.href?"bg-purple-100 ":"hover:bg-purple-100"}`,title:`${s.label} - Overview`,children:e.jsx("span",{className:"truncate",children:"Overview"})}),I&&$&&e.jsx("a",{href:C(`/${s.href}/entity-map`),"data-active":d===`${s.href}/entity-map`,className:`flex items-center px-2 py-1.5 text-xs text-gray-600 hover:bg-purple-100 rounded-md ${d===`${s.href}/entity-map`?"bg-purple-100 ":"hover:bg-purple-100"}`,children:e.jsx("span",{className:"truncate",children:"Entity Map"})}),!I&&e.jsx("a",{href:Z("/architecture/docs/services",{serviceIds:s.services.map(y=>y.data.id).join(","),domainId:s.id,domainName:s.name}),"data-active":window.location.href.includes(`domainId=${s.id}`),className:`flex items-center px-2 py-1.5 text-xs text-gray-600 hover:bg-purple-100 rounded-md ${window.location.href.includes(`domainId=${s.id}`)?"bg-purple-100 ":"hover:bg-purple-100"}`,children:e.jsx("span",{className:"truncate",children:"Architecture"})}),!I&&e.jsx("a",{href:C(`/docs/domains/${s.id}/language`),"data-active":d.includes(`/docs/domains/${s.id}/language`),className:`flex items-center px-2 py-1.5 text-xs text-gray-600 hover:bg-purple-100 rounded-md ${d.includes(`/docs/domains/${s.id}/language`)?"bg-purple-100 ":"hover:bg-purple-100"}`,children:e.jsx("span",{className:"truncate",children:"Ubiquitous Language"})}),x.length>0&&e.jsx(N,{isCollapsed:v[`${s.href}-services`],onToggle:()=>j(`${s.href}-services`),title:e.jsxs("button",{onClick:y=>{y.stopPropagation(),j(`${s.href}-services`)},className:"truncate underline ml-2 text-xs mb-1 py-1",children:["Services (",x.length,")"]}),children:e.jsx("div",{className:"space-y-2 pl-4",children:x.map(y=>e.jsx(X,{item:y,decodedCurrentPath:d,collapsedGroups:v,toggleGroupCollapse:j,isVisualizer:I,searchTerm:u},y.href))})}),s.entities.length>0&&!I&&e.jsx(N,{isCollapsed:v[`${s.href}-entities`],onToggle:()=>j(`${s.href}-entities`),title:e.jsxs("button",{onClick:y=>{y.stopPropagation(),j(`${s.href}-entities`)},className:"truncate underline ml-2 text-xs mb-1 py-1",children:["Entities (",s.entities.length,")"]}),children:e.jsx(k,{messages:s.entities,decodedCurrentPath:d,searchTerm:u})})]})})});if(!O)return null;const ie=u&&!o["context-map"]?.length&&!o.domains?.length&&!o.services?.length&&!o.flows?.length&&!o.messagesNotInService?.length;return e.jsxs("nav",{ref:r,className:"space-y-4 text-gray-800 px-3 py-4 overflow-auto h-full",children:[e.jsxs("div",{className:`flex gap-2 transition-all duration-200 ${T?"sticky -top-5 z-10 bg-white shadow-md -mx-3 px-3 py-2 border-b border-gray-200":""}`,children:[e.jsx("input",{type:"text",value:g,onChange:te,placeholder:"Quick search...",className:"flex-1 p-2 text-sm rounded-md border border-gray-200 h-[30px]"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:ae,title:D?"Collapse All":"Expand All",className:"px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded-md border border-gray-200 h-[30px] flex items-center justify-center",children:D?e.jsx(oe,{className:"h-4 w-4 text-gray-600"}):e.jsx(ce,{className:"h-4 w-4 text-gray-600"})}),e.jsx("button",{onClick:re,title:"Hide Sidebar",className:"px-2 py-1 bg-gray-100 hover:bg-gray-200 rounded-md border border-gray-200 h-[30px] flex items-center justify-center",children:e.jsx(de,{className:"h-4 w-4 text-gray-600"})})]})]}),e.jsx("div",{className:"space-y-2 divide-y divide-gray-200/80",children:ie?e.jsx(fe,{searchTerm:u}):e.jsxs(e.Fragment,{children:[o["context-map"]&&o.domains&&o.domains.length>0&&e.jsx("div",{className:"pt-0",children:e.jsx("ul",{className:"space-y-1",children:o["context-map"].map(s=>e.jsx("li",{children:e.jsxs("a",{href:s.href,"data-active":d===s.href,className:`flex items-center justify-between px-2 py-0.5 text-xs font-bold rounded-md ${d===s.href?"bg-purple-100 text-purple-900":"hover:bg-purple-100"}`,children:[e.jsxs("span",{className:"truncate flex flex-col items-start",children:[e.jsx(A,{text:s.label,searchTerm:u}),e.jsx("span",{className:"text-[10px] text-gray-500 font-light",children:"Explore integrations between domains"})]}),e.jsx("span",{className:"text-blue-600 ml-2 text-[10px] font-medium bg-blue-50 px-2 py-0.5 rounded",children:"DOMAINS"})]})},s.href))})}),o.domains&&e.jsx("div",{className:`${I?"pt-4 pb-2":"p-0"}`,children:e.jsx("ul",{className:"space-y-2",children:ne(o.domains||[]).map(s=>{const a=U(s,o.domains||[]);return e.jsxs("li",{className:"space-y-0","data-active":d===s.href,children:[e.jsx(_,{item:s,isSubdomain:!1}),e.jsx(K,{item:s}),a.length>0&&!v[s.href]&&e.jsx("div",{className:"space-y-0.5 border-gray-200/80 border-l pl-4 ml-[9px] mt-2",children:e.jsx(N,{isCollapsed:v[`${s.href}-subdomains`],onToggle:()=>j(`${s.href}-subdomains`),title:e.jsxs("button",{onClick:f=>{f.stopPropagation(),j(`${s.href}-subdomains`)},className:"truncate underline ml-2 text-xs mb-1 py-1",children:["Subdomains (",a.length,")"]}),children:e.jsx("div",{className:"space-y-2",children:a.map(f=>e.jsxs("div",{className:"space-y-0","data-active":d===f.href,children:[e.jsx(_,{item:f,isSubdomain:!0,nestingLevel:1}),e.jsx(K,{item:f,nestingLevel:3,className:"ml-6",isSubdomain:!0})]},f.href))})})})]},s.href)})})}),o.services&&o.services.length>0&&e.jsx("div",{className:"pt-4 pb-2",children:e.jsx(N,{isCollapsed:v["all-services-group"],onToggle:()=>j("all-services-group"),title:e.jsxs("button",{onClick:s=>{s.stopPropagation(),j("all-services-group")},className:"flex justify-between items-center pl-2 w-full text-xs",children:[e.jsxs("span",{className:"truncate text-xs font-bold",children:["All Services (",o.services.length,")"]}),e.jsx("span",{className:"ml-2 rounded bg-purple-50 px-2 py-0.5 text-[10px] font-medium text-purple-600",children:"SERVICES"})]}),children:e.jsx("div",{className:"space-y-4 border-gray-200/80 border-l pl-3 ml-[9px] mt-3",children:o.services.map(s=>(v[s.href]===void 0&&(v[s.href]=!0),e.jsx(X,{item:s,decodedCurrentPath:d,collapsedGroups:v,toggleGroupCollapse:j,isVisualizer:I,searchTerm:u},s.href)))})})}),o.flows&&o.flows.length>0&&e.jsx("div",{className:"pt-4 pb-2",children:e.jsx(N,{isCollapsed:v["flows-group"],onToggle:()=>j("flows-group"),title:e.jsxs("button",{onClick:s=>{s.stopPropagation(),j("flows-group")},className:"flex justify-between items-center pl-2 w-full text-xs",children:[e.jsxs("span",{className:"truncate text-xs font-bold",children:["All Flows (",o.flows.length,")"]}),e.jsx("span",{className:"ml-2 rounded bg-teal-50 px-2 py-0.5 text-[10px] font-medium text-teal-600",children:"FLOWS"})]}),children:e.jsx("div",{className:"space-y-2 border-gray-200/80 border-l pl-3 ml-[9px] mt-3",children:o.flows.map(s=>e.jsx("div",{"data-active":d===s.href,children:e.jsxs("a",{href:s.href,"data-active":d===s.href,className:`flex items-center justify-between px-2 py-0.5 text-xs font-thin rounded-md ${d===s.href?"bg-purple-100 text-purple-900":"hover:bg-purple-100"}`,title:s.label,children:[e.jsx("span",{className:"truncate",children:e.jsx(A,{text:s.label,searchTerm:u})}),e.jsx("span",{className:"ml-2 text-[10px] font-medium px-2 uppercase py-0.5 rounded bg-teal-50 text-teal-600",children:"FLOW"})]})},s.href))})})}),o.containers&&o.containers.length>0&&e.jsx("div",{className:"pt-4 pb-2",children:e.jsx(N,{isCollapsed:v["data-group"],onToggle:()=>j("data-group"),title:e.jsxs("button",{onClick:s=>{s.stopPropagation(),j("data-group")},className:"flex justify-between items-center pl-2 w-full text-xs",children:[e.jsxs("span",{className:"truncate text-xs font-bold",children:["All Data Stores (",o.containers.length,")"]}),e.jsx("span",{className:"ml-2 rounded bg-blue-50 px-2 py-0.5 text-[10px] font-medium text-blue-600",children:"DATA"})]}),children:e.jsx("div",{className:"space-y-2 border-gray-200/80 border-l pl-3 ml-[9px] mt-3",children:o.containers.map(s=>e.jsx("div",{"data-active":d===s.href,children:e.jsxs("a",{href:s.href,"data-active":d===s.href,className:`flex items-center justify-between px-2 py-0.5 text-xs font-thin rounded-md ${d===s.href?"bg-purple-100 text-purple-900":"hover:bg-purple-100"}`,title:s.label,children:[e.jsx("span",{className:"truncate",children:e.jsx(A,{text:s.label,searchTerm:u})}),e.jsx("span",{className:"ml-2 text-[10px] font-medium px-2 uppercase py-0.5 rounded bg-blue-50 text-blue-600",children:"DATA"})]})},s.href))})})}),o.designs&&o.designs.length>0&&e.jsx("div",{className:"pt-4 pb-2",children:e.jsx(N,{isCollapsed:v["designs-group"],onToggle:()=>j("designs-group"),title:e.jsxs("button",{onClick:s=>{s.stopPropagation(),j("designs-group")},className:"flex justify-between items-center pl-2 w-full text-xs",children:[e.jsxs("span",{className:"truncate text-xs font-bold",children:["All Designs (",o.designs.length,")"]}),e.jsx("span",{className:"ml-2 rounded bg-teal-50 px-2 py-0.5 text-[10px] font-medium text-teal-600",children:"DESIGNS"})]}),children:e.jsx("div",{className:"space-y-2 border-gray-200/80 border-l pl-3 ml-[9px] mt-3",children:o.designs.map(s=>e.jsx("div",{"data-active":d===s.href,children:e.jsxs("a",{href:s.href,"data-active":d===s.href,className:`flex items-center justify-between px-2 py-0.5 text-xs font-thin rounded-md ${d===s.href?"bg-purple-100 text-purple-900":"hover:bg-purple-100"}`,title:s.label,children:[e.jsx("span",{className:"truncate",children:e.jsx(A,{text:s.label,searchTerm:u})}),e.jsx("span",{className:"ml-2 text-[10px] font-medium px-2 uppercase py-0.5 rounded bg-teal-50 text-teal-600",children:"DESIGN"})]})},s.href))})})}),o.messagesNotInService&&o.messagesNotInService.length>0&&p&&e.jsx("div",{className:"pt-4 pb-2",children:e.jsx(N,{isCollapsed:v["messagesNotInService-group"],onToggle:()=>j("messagesNotInService-group"),title:e.jsx("button",{onClick:s=>{s.stopPropagation(),j("messagesNotInService-group")},className:"flex justify-between items-center pl-2 w-full text-xs",children:e.jsx("span",{className:"truncate text-xs font-bold",children:"Orphaned Messages"})}),children:e.jsx("div",{className:"space-y-2 border-gray-200/80 border-l pl-3 ml-[9px] mt-3",children:o.messagesNotInService.map(s=>e.jsx("div",{"data-active":d===s.href,children:e.jsxs("a",{href:s.href,"data-active":d===s.href,className:`flex items-center justify-between px-2 py-0.5 text-xs font-thin rounded-md ${d===s.href?"bg-purple-100 text-purple-900":"hover:bg-purple-100"}`,title:s.label,children:[e.jsx("span",{className:"truncate",children:e.jsx(A,{text:s.label,searchTerm:u})}),e.jsx("span",{className:`ml-2 text-[10px] font-medium px-2 uppercase py-0.5 rounded ${H(s.collection)}`,children:ee(s.collection,s)})]})},s.href))})})})]})})]})},Ce=P.memo(me);export{Ce as default};
